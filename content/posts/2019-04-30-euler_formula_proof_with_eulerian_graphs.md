---
id: 3763
title: "הוכחה לנוסחת אוילר לגרפים בעזרת גרפים אוילריים"
date: 2019-04-30 10:34:33
layout: post
categories: 
  - תורת הגרפים
tags: 
  - גרף אוילרי
  - גרף מישורי
  - נוסחת אוילר
social_media_share: true
---
המטרה שלי בפוסט הזה היא לקשר שני דברים בסיסיים בתורת הגרפים שאני מאוד מחבב אישית: <strong>נוסחת אוילר</strong> לגרפים מישוריים, והמושג של <strong>גרף אוילרי</strong>. ספציפית, אני הולך לתת הוכחה לנוסחת אוילר שמתבססת על גרפים אוילריים, תוך הסתייגות הולמת שזו לא באמת הוכחה פורמלית עד הסוף ואם ממש מתעקשים אפשר גם להציג אותה בלי המושג של גרף אוילרי אבל איפה הכיף פה. באנו היום לכייף.

כפי שאפשר לנחש, הפוסט הזה לא נועד לעמוד בפני עצמו והוא מניח שאתם מכירים את נוסחת אוילר לגרפים מישוריים וגרפים אוילריים. יש לי <a href="https://gadial.net/2010/01/31/euler_formula_and_platonic_solids/">כאן</a> פוסט על נוסחת אוילר <a href="https://gadial.net/2008/05/06/eulerian_graphs/">וכאן</a> פוסט על גרפים אוילריים, אבל אני כן אזכיר את מה שצריך לדעת. חוץ מגרפים. גרפים אני באמת הולך להניח שאתם יודעים וזהו.

נוסחת אוילר מדברת על גרפים <strong>מישוריים</strong>: גרפים שאפשר לצייר במישור בלי ששתי קשתות יחתכו זו את זו (הצמתים הם נקודות והקשתות הן קווים שמחברים את הנקודות; לאו דווקא קווים ישרים למרות שאפשר להראות שכל גרף מישורי אפשר לצייר עם קווים ישרים שכאלה). בשביל לדבר על נוסחת אוילר צריך גם לדרוש שהגרף המישורי יהיה <strong>קשיר</strong> - שיש מסלול שמחבר כל שני צמתים בו.

<strong>גרף אוילרי</strong> הוא גרף שאפשר לצייר מבלי להרים את העפרון מהדף - כזה שיש בו מסלול שעובר דרך כל הקשתות בדיוק פעם אחת. הנה דוגמא לגרף שיש בו גם את זה וגם את זה:

<img class="alignnone size-full wp-image-3771" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted1.png" alt="" width="394" height="580" />

הגרף הזה הוא בעצם ציור הבית מחידת ה"האם אפשר לצייר בית עם איקס בתוכו מבלי להרים את העפרון מהדף" למעט זה שבמקום להשלים את האיקס בתוכו, הקשת שמחברת את הפינה הימנית-תחתונה והפינה השמאלית-עליונה עוברת <strong>מחוץ</strong> לבית כדי לא לחתוך את הקשת שעוברת בתוך הבית. זה מראה שהגרף הזה הוא <strong>מישורי</strong>, בנוסף לכך שהוא אוילרי. כפי שאפשר לנחש, הוא הולך לככב בהמשך הפוסט שלנו.

כשיש לנו ציור של גרף מישורי אפשר לדבר לא רק על הצמתים והקשתות שלו אלא גם על <strong>הפאות</strong> שלו - השטחים הסגורים שנתחמים על ידי הקשתות (המילה "פאות" מגיעה מההקשר המקורי של נוסחת אוילר, עבור פאונים; לא אדבר על כך בפוסט הזה):

<img class="alignnone size-full wp-image-3772" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted2.png" alt="" width="405" height="570" />

בתמונה הנוכחית צבעתי את הפאות בצבעים עליזים - ורוד, ירוק, כחול, צהוב ולבן. רגע, איפה הלבן כאן? ובכן, גם השטח ש"מחוץ" לגרף נחשב לאחת מהפאות שלו, "הפאה החיצונית". כלומר, הצביעה העליזה שלי מראה לנו שלגרף יש חמש פאות. בנוסף לכך יש לו חמישה צמתים (הנקודות הכחולות) ויש לו שמונה קשתות (הקווים השחורים העבים שמחברים צמתים). אם נסמן את מספר הצמתים ב-{% equation %}V{% endequation %}, את מספר הקשתות ב-{% equation %}E{% endequation %} ואת מספר הפאות ב-{% equation %}F{% endequation %} נגלה שמתקיים

{% equation %}V-E+F=2{% endequation %}

והקשר הזה בין מספר הצמתים, הקשתות והפאות מתקיים <strong>תמיד</strong>, בכל גרף מישורי קשיר; זו נוסחת אוילר, שהיא ללא ספק אחת מהנוסחאות החביבות עלי במתמטיקה. המטרה שלי בפוסט הזה היא להוכיח שהיא אכן מתקיימת תמיד, בכל גרף מישורי קשיר (חייבים קשירות כי אחרת אפשר להגדיל את מספר הצמתים {% equation %}V{% endequation %} בלי להשפיע על מספר הקשתות או הפאות, סתם על ידי הוספת צמתים מבודדים), אבל <strong>הוכחה</strong> היא מילה די גדולה בהקשר הזה - שנתפשר על "המחשה יפה"?

רגע, למה בעצם אני לא יכול לתת הוכחה של ממש? ובכן, כל המושג של "גרף מישורי" הוא די קשה מבחינה פורמלית. מה זה אומר "לצייר את הגרף במישור כך שאין חיתוכים"? צריך לערב כאן עולם מושגי חדש לגמרי - המישור {% equation %}\mathbb{R}^{2}{% endequation %} ומה זה אומר "לצייר" בו משהו - זה אומר ליצור עקומות; עקומה היא פונקציה רציפה {% equation %}f:\left[0,1\right]\to\mathbb{R}^{2}{% endequation %}, ועכשיו צריך לדבר על חיתוך של עקומות, ועל מה זו בעצם פאה - רכיב קשירות נפרד של המישור כשמסירים ממנו את האיזורים שמכוסים על ידי עקומות? כל הדברים הללו מובילים אותנו אל משפט מפלצתי שנקרא <strong>משפט ז'ורדן </strong>ואומר (בנפנוף ידיים) שאם מציירים עיגול במישור אז הוא מפרק את המישור ל"בפנים" וה"בחוץ" של העיגול. זה משפט קשה עם הוכחה קשה. אז לא, אני לא אכנס לפורמליזם הזה פה ואפילו לא אנסה - בדיוק בשביל זה הבלוג נקרא "לא מדויק".

הרעיון ב"הוכחה" שלי הוא פשוט ויפה וניתן לתיאור בפסקה אחת לפני שנדגים אותו בצורה מפורטת. אנחנו נצייר את הגרף המישורי שלנו מבלי להרים את העט מהדף, ונעקוב כל הזמן אחרי מספר הפאות הנוכחי. כל "צעד" שלנו כולל ציור של קשת אחת, ולכן אחרי {% equation %}E{% endequation %} צעדים הציור יושלם. כשאנחנו רק מתחילים והציור ריק, יש לנו רק פאה אחת - הפאה החיצונית. מתי נוצרות פאות חדשות? בדיוק בצעדים שמחזירים אותנו לצומת שבה כבר היינו. כמה צעדים כאלו יש? אם יש {% equation %}E{% endequation %} צעדים בסך הכל ולכן אנחנו מבקרים בסך הכל ב-{% equation %}E+1{% endequation %} צמתים במהלך הציור - הפלוס אחד מגיע מכך שאנחנו נמצאים בצומת כלשהי כבר בהתחלה, עוד לפני שציירנו קשת אחת. יש בסך הכל {% equation %}V{% endequation %} צמתים ולכן אנחנו מבקרים ב-{% equation %}E+1-V{% endequation %} צמתים יותר מפעם אחת. לכן מספר הפאות <strong>שמתווספות</strong> אל האחת הראשונית יהיה {% equation %}E+1-V{% endequation %}, כלומר {% equation %}F-1=E+1-V{% endequation %}, ואחרי העברת אגפים נקבל {% equation %}V-E+F=2{% endequation %}.

איבדתן אותי? לא לדאוג, מייד תבוא דוגמא. לא איבדתן אותי אבל מעצבן אתכן שה"הוכחה" שלי עובדת רק אם הגרף המישורי שלי הוא גם במקרה על הדרך באופן ממוזל גרף אוילרי אבל בבירור רוב הגרפים המישוריים אינם כאלו? אז אני אגלה כבר עכשיו שזה פתיר בקלות רבה - קחו גרף מישורי כלשהו ופשוט שכפלו כל קשת פעמיים. גם לזה נחזור עם תמונות בהמשך.

בואו נעקוב אחרי תהליך הציור של התמונה לעיל, עם ספירה של מספר הקשתות והפאות בכל רגע נתון. כל חמשת הצמתים יופיעו כל הזמן - כלומר, {% equation %}V=5{% endequation %} הולך להיות קבוע. בהתחלה יש רק את הצמתים, ודמיינו שאנחנו עומדים בצומת הימני-תחתון ומחכים בהתרגשות לתחילת המסע שלנו בגרף:

<img class="alignnone size-full wp-image-3764" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted3.png" alt="" width="262" height="458" />

כאן {% equation %}E=0{% endequation %} ו-{% equation %}F=1{% endequation %} (כי הפאה החיצונית, הלבנה).

עכשיו נבצע את הצעד הראשון:

<img class="alignnone size-full wp-image-3765" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted4.png" alt="" width="250" height="497" />

ועכשיו {% equation %}E=1{% endequation %} ו-{% equation %}F=1{% endequation %} נשאר כמו קודם - מכיוון שהקשת הגיעה לצומת שטרם ביקרנו בו, לא יצרנו פאה חדשה. אנחנו רואים שלבקר בצומת שטרם ביקרנו בו זה משעמם, אז בואו נבצע את כל יתר הצעדים הנדרשים כדי שנבקר <strong>בכל</strong> הצמתים; מרגע זה והלאה, כל צעד נוסף יצור פאה חדשה:

<img class="alignnone size-full wp-image-3766" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted5.png" alt="" width="236" height="455" />

כרגע {% equation %}E=4{% endequation %} (כמספר הצמתים פחות אחד - לא מקרי, כמובן, הקשר {% equation %}E=V-1{% endequation %} מתקיים בכל <strong>עץ</strong>) ו-{% equation %}F=1{% endequation %}. כלומר, כבר כרגע מתקיימת הנוסחה {% equation %}V-E+F=2{% endequation %}, וזה לא מפתיע כי הגרף שקיבלנו כרגע הוא גם מישורי וגם <strong>קשיר</strong> (זוכרות? קשירות הייתה הכרחית בשביל נוסחת אוילר, בדיוק בגלל שצמתים מבודדים כמו בתמונות הקודמות לא משפיעים על {% equation %}E{% endequation %} ועל {% equation %}F{% endequation %} ואפשר להוסיף כמה מהם שרוצים). מה שיקרה מכאן ואילך הוא שכל צעד <strong>ישמר</strong> את הקשר הזה, {% equation %}V-E+F=2{% endequation %}; כי כל צעד גם יוסיף קשת אחת (יגדיל את {% equation %}E{% endequation %} ב-1) וגם יצור פאה חדשה (יגדיל את {% equation %}F{% endequation %} ב-1). בואו נראה את זה קורה בפעם הראשונה:

<img class="alignnone size-full wp-image-3767" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted6.png" alt="" width="243" height="448" />

מה שנחמד פה הוא שהפאה שיצרנו לא מופיעה בתמונה הסופית, פשוט כי הצעד הבא מפרק אותה לשתי פאות:

<img class="alignnone size-full wp-image-3768" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted7.png" alt="" width="220" height="449" />

ונראה לי שהרעיון ברור אז אני אצייר את שתי הקשתות הבאות ביחד:

<img class="alignnone size-full wp-image-3769" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted8.png" alt="" width="366" height="553" />

זה מסיים את ה"הוכחה", אבל עדיין צריך להתייחס למקרה שבו הגרף המישורי שלנו איננו אוילרי, מה שמחזיר אותנו לשאלה בסיסית קצת יותר - מתי גרף הוא <strong>כן</strong> אוילרי? כאן נדרשים שני דברים. ראשית, שהגרף יהיה קשיר; אבל אנחנו מניחים שהגרף המישורי שלנו קשיר, כך שזה לא רלוונטי. שנית, צריך ש<strong>הדרגה</strong> של כל צומת תהיה זוגית, פרט אולי לשני צמתים בדיוק. דרגה של צומת היא מספר הקשתות שנוגעות בו; מכיוון שבמסלול אוילרי בכל פעם שבה אנחנו נכנסים לצומת ו"שורפים" את הקשת שאיתה נכנסנו אנחנו גם יוצאים ממנו ו"שורפים" את הקשת שאיתה יצאנו, קל לראות שמספר הקשתות שמתאימות לכל צומת חייב להיות זוגי למעט בצמתי ההתחלה והסיום. האתגר הגדול יותר הוא להראות שזה גם <strong>תנאי מספיק</strong> לכך שיהיה מסלול אוילרי בגרף, אבל אני לא אעשה את זה כאן הפעם אלא רק אשתמש בזה.

בגלל שהקריטריון הזה לאוילריות של גרף הוא כל כך פשוט, אנחנו יכולים לנצל אותו ולהפוך גרף לאוילרי בקלי קלות - פשוט נכפיל את מספר הקשתות. הנה דוגמא:

<img class="alignnone size-full wp-image-3770" src="{{site.baseurl}}{{site.post_images}}/2019/04/pasted9.png" alt="" width="876" height="366" />

הגרף הימני הוא הגרף המפורסם של "בעיית הגשרים של קניגסברג" שאוילר פתר. כל הצמתים שם מדרגה אי זוגית ולכן הגרף אינו אוילרי, למרות שהוא בבירור מישורי ובבירור מקיים את נוסחת אוילר ({% equation %}V=4{% endequation %} ו-{% equation %}E=7{% endequation %} ו-{% equation %}F=5{% endequation %}). הגרף השמאלי הוא מה שקורה לגרף הימני כשאני לוקח כל קשת ומפצל אותה לשתיים. ההשפעה של הפיצול הזה על הגרף היא זו:
<ol>
 	<li>מספר הקשתות החדש בגרף הוא פי 2 מאשר בגרף הישן. אסמן זאת {% equation %}E^{\prime}=2E{% endequation %}.</li>
 	<li>מספר הצמתים בגרף החדש זהה למספר הצמתים בגרף הישן. אסמן זאת {% equation %}V^{\prime}=V{% endequation %}.</li>
 	<li>עבור כל קשת בגרף המקורי יצרנו פאה חדשה, של השטח ש"כלוא" בין שתי הקשתות החדשות שהחליפו את הקשת הזו - אני מסמן את הפאות החדשות בירוק. כלומר, {% equation %}F^{\prime}=F+E{% endequation %}.</li>
 	<li>הגרף החדש עכשיו אוילרי ולכן מקיים את נוסחת אוילר: {% equation %}V^{\prime}-E^{\prime}+F^{\prime}=2{% endequation %}.</li>
</ol>
כל מה שנשאר לעשות הוא להציב במשוואה של 4 את המשוואות של 1-3. נקבל:

{% equation %}V-2E+\left(F+E\right)=2{% endequation %}

כלומר {% equation %}V-E+F=2{% endequation %}, שזה מה שרצינו להוכיח, וסיימנו.

כפי שאמרתי קודם, ההוכחה הזו לא באמת נותנת נקודת מבט שונה מהותית על הנושא ביחס להוכחות הסטנדרטיות יותר שמשתמשות באינדוקציה וכדומה. סוג הטיעונים כמעט זהה. ההבדל העיקרי הוא שההוכחה הזו, לתחושתי, פשוט כיפית יותר.

