---
id: 2832
title: "מה שהיה הוא שיהיה"
date: 2007-04-23 18:12:47
layout: post
categories: 
  - משחקים וחידות מתמטיות
summary: הפוסט הראשון בבלוג! על האופן שבו המושג המתמטי של "שמורות" פותר לנו את חידת "לכסות לוח על ידי אבני דומינו" ואת חידת ה-15
social_media_share: true
---
<p class="MsoNormal" dir="rtl"><span>כל מי שאוהב מתמטיקה מוצא את עצמו נאלץ להתגונן פה ושם מפני מבטים חקרניים ושפתיים רועדות ששואלות את השאלה המתבקשת: “למה"? וגם אני לא פטור מכך.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>מכיוון שלענות לשאלה זה קשה, ואולי גם בלתי אפשרי (איך אומרים "כי זה מה שאני אוהב" בצורה שתהווה שכנוע אובייקטיבי?) חשבתי לנסות ולתקוף את הבעיה מכיוון אחר – אולי השואל לא באמת מכיר את אותה המתמטיקה כמוני. אולי בשבילו היא באמת רק הרבה מניפולציות של מספרים וסמלים ועוד כל מני קשקו</span><span>שי</span><span>ם </span><span>שי</span><span>רדו לתהום הנ</span><span>שי</span><span>יה בתום הבגרות, או שאולי בשבילו היא רק עוד </span><span dir="ltr"> </span><span dir="ltr"><span dir="ltr"> </span>60</span><span dir="rtl"> </span><span><span dir="rtl"> </span> בקורסי המבוא שטוב ששכחנו משנה א' באוניברסיטה. אולי לא יצא לו לראות את המתמטיקה בצורה רחבה יותר, אלא רק בתור אוסף כלים לע</span><span>שי</span><span>ית כל מני דברים – כלי עבודה, אשר כמו כל כלי עבודה אחר, גורמים לשלפוחיות אינספור בידיים, נשברים בדיוק כשצריך אותם, ובסוף נזרקים למחסן עם בוץ יבש עליהם כדי </span><span>שי</span><span>עלו חלודה.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>לדעתי המתמטיקה היא יותר מסתם כלי – היא דרך ח</span><span>שי</span><span>בה. אני אנסה להדגים זאת בעזרת שתי חידות נחמדות, שממבט ראשון לא נראות דומות במיוחד, אך הגישה לפתרון שתיהן נובעת מאותו עיקרון. שתי החידות פשוטות ואפשר לשחק בהן בבית: החידה האחת עוסקת בלוח שחמט ואבני דומינו, והשנייה במשחק לוחיות שכנראה יצא לכם פעם להיתקל בו - “משחק ה-</span><span dir="ltr"> </span><span dir="ltr"><span dir="ltr"> </span>15</span><span dir="rtl"> </span><span><span dir="rtl"> </span>”.</span></p>
<p class="MsoNormal" dir="rtl"><a href="{{site.baseurl}}{{site.post_images}}/2007/04/220px-15-puzzle.svg_.png"><img class="alignnone size-full wp-image-1168" title="220px-15-puzzle.svg" src="{{site.baseurl}}{{site.post_images}}/2007/04/220px-15-puzzle.svg_.png" alt="" width="220" height="220" /></a></p>
<p class="MsoNormal" dir="rtl"><span>נתחיל ממשחק ה-</span><span dir="ltr"> </span><span dir="ltr"><span dir="ltr"> </span>15</span><span dir="rtl"> </span><span><span dir="rtl"> </span>. תמונה אחת שווה אלף מילים כאן, כי ההסבר הוא מסורבל: יש לנו חמש עשרה לוחיות מרובעות עם מספרים מ-</span><span dir="ltr"> </span><span dir="ltr"><span dir="ltr"> </span>1</span><span dir="rtl"> </span><span><span dir="rtl"> </span> ועד </span><span dir="ltr"> </span><span dir="ltr"><span dir="ltr"> </span>15</span><span dir="rtl"> </span><span><span dir="rtl"> </span> עליהם, שמסודרות בתוך מסגרת. משבצת אחת במסגרת נשארת ריקה, ובאמצעותה אפשר לסדר מחדש את הלוחיות – מחליקים לוחית כלשהי לתוך המשבצת הריקה, וקיבלנו משבצת ריקה חדשה שגם אליה אפשר להזיז לוחיות, וכן הלאה. המשחק עצמו הוא פשוט למדי: מתחילים כשה"לוח" מעורבב, ומנסים לסדר אותו כך שהמספרים יהיו לפי הסדר.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>לא חסרות וריאציות על המשחק – אפשר גם לוח של </span><span dir="ltr"> </span><span dir="ltr"><span dir="ltr"> </span>8</span><span dir="rtl"> </span><span><span dir="rtl"> </span> לוחיות, </span><span dir="ltr">24</span><span> לוחיות, </span><span dir="ltr">35</span><span> לוחיות וכדומה (חידה: למה דווקא המספרים הללו?) ואפשר גם שעל הלוחיות תהיה תמונה ולא מספרים (ואז קשה יותר לפתור, כמובן), אבל המשחק התמים והנחמד הזה פחות מעניין. מעניינת החידה שנקשרה בשמו.</span></p>
<p class="MsoNormal" dir="rtl"><a href="{{site.baseurl}}{{site.post_images}}/2007/04/220px-15-puzzle-loyd.svg_.png"><img class="alignnone size-full wp-image-1169" title="220px-15-puzzle-loyd.svg" src="{{site.baseurl}}{{site.post_images}}/2007/04/220px-15-puzzle-loyd.svg_.png" alt="" width="220" height="220" /></a></p>
<p class="MsoNormal" dir="rtl"><span>החידה (שאיני בטוח מי המציא – קראתי שסם לויד המציא אותה, וקראתי שסם לויד שקרן ונויס צ'פמן המציא אותה, וקראתי שצ'פמן רק המציא את המשחק ואחד צ'רלס פיווי המציא את החידה) היא פשוטה: בואו נסתכל על הלוח כשהוא מעורבב "טיפה" – החלפנו את המיקום של לוחית מס' </span><span dir="ltr">14</span><span> ושל לוחית מס' </span><span dir="ltr">15</span><span>. כיצד אפשר לסדר את הלוח מחדש כשזו הסיטואציה ההתחלתית?</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>נו, לכ</span><span>אור</span><span>ה לא יותר קשה לפתור את הלוח הזה מאשר לפתור לוח מעורבב כולו, נכון? לכן אפשר היה לצפות שמהר מאוד יימצא פתרון. אלא שפתרון שכזה בושש להגיע. יתר על כן, הוצע לזוכה פרס כספי, וידוע שפרס כספי מבטיח שאם קיים פתרון טריוויאלי, הוא יצוץ מייד. אלא שפתרון לא צץ. והמ</span><span>שי</span><span>ך לא לצוץ. ועדיין לא צץ. ובינתיים המשחק הפך ל</span><span>שי</span><span>געון בסדרי הגודל של ההולה הופ והקובייה ההונגרית (</span><span>שי</span><span>בואו רק עשרות שנים אחריו) ואז צץ מתמטיקאי מעצבן ואמר שהכל טוב ויפה, אבל אין שום דרך לפתור את המשחק הזה. ואז ה</span><span>שי</span><span>געון החולף חלף.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>הכל טוב ויפה, אבל איך אפשר לומר בביטחון שכזה "אי אפשר לפתור את זה"? אולי המתמטיקאי סתם טיפש ולא יודע לגלות את הפתרון? </span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>נעבור לחידה השנייה, שפורסה במקור על ידי הגורו של הפופולריזציה של המתמטיקה, מרטין גרדנר. לצערי היא לא עוררה </span><span>שי</span><span>געון חולף בסדרי הגודל של משחק ה-</span><span dir="ltr">15</span><span> (אולי כי בזמן שבו הפכה לפופולרית כבר היו מספיק מתמטיקאים </span><span>שי</span><span>עצרו אותה מלהתפתח... ) אך היא יפה לא פחות, ואולי אף יותר. היא הולכת כך:</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>ניקח לוח שחמט סטנדרטי (לוח בגודל </span><span dir="ltr">8</span><span> כפול </span><span dir="ltr">8</span><span> משבצות, בשחור-לבן) ו"נגזור" את הפינה הימנית התחתונה והשמאלית העליונה שלו. את הצורה שקיבלנו ננסה לכסות באבני דומינו, כשהכלל המנחה פשוט: כל אבן מכסה בדיוק שתי משבצות, ואין משבצת </span><span>שי</span><span>ש בה שתי אבנים או יותר. השאלה היא, כרגיל, איך ניתן לעשות זאת?</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>קרוב לודאי שכבר ברור לכם שלא ניתן לעשות זאת, אבל אולי פחות ברור למה. הרי אף אחד לא בדק את כל האפשרויות להשמה של אבני דומינו על הלוח – אם כן, מאיפה הביטחון שאי אפשר?</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>וכאן נכנסת המתמטיקה לתמונה עם המושג שאותו אני רוצה להציג כאן: שמורות (</span><span dir="ltr">Invariants</span><span>). זה רעיון כללי ופשוט, ועם זאת חזק מאוד – אם יש לנו אובייקט מתמטי כלשהו – ויהא זה לוח שחמט מרוצף או משחק ה-</span><span dir="ltr">15</span><span> </span><span>או מרחב טופולוגי – ננסה להתמקד בתכונות מאפיינות שלו שנשמרות תחת פעולות שמפעילים עליו. אם נצליח לגלות כאלו, נוכל לדעת במדויק מה הפעולות הללו <span style="text-decoration: underline;">לא</span> יכולות לעשות – הן לא יכולות להביא את האובייקט לצורה שבה השמורות לא קיימות בו.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>אחרי פסקה אבסטרקטית ומפוצצת שכזו נדרשת דוגמה, ולכן נעלה על המזבח את חידת לוח השחמט. לפני שנעשה זאת, אני ממליץ לכל מי שמעוניין בכך לעצור את הקריאה ולחשוב על דרך לפתרון החידה בעצמו. זה לא קל, אך אם מצליחים למצוא את הפתרון לבד (ואין צורך בידע מתמטי, פרט לרעיון שכבר הצגתי – וגם אותו לא באמת צריך להבין) ההנאה ממנו גדולה בהרבה מזו שבקריאת הפתרון הקיים.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>אז מה עו</span><span>שי</span><span>ם? שמים לב לעובדה הבאה: בלוח שחמט, כל משבצת לבנה היא שכנה רק של משבצות שחורות, ולהפך. כלומר, אם מניחים אבן דומינו על הלוח, היא תכסה תמיד משבצת לבנה אחת ומשבצת שחורה אחת. לכן, בזמן שאנחנו מניחים אבני דומינו על הלוח, כל הזמן נשמרת התכונה הבאה שלו: ההפרש בין מספר המשבצות הלבנות הגלויות למספר המשבצות השחורות הגלויות <span style="text-decoration: underline;">נשאר קבוע</span>.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>מה ההפרש הזה? ובכן, גזרנו את המשבצת הימנית התחתונה והשמאלית העליונה, ושתיהן היו לבנות. כלומר, לפני שהתחלנו לכסות את הלוח באבני דומינו ההפרש היה </span><span dir="ltr">2</span><span> (בהתחלה ההפרש היה אפס; בגזירה הורדנו </span><span dir="ltr">2</span><span> משבצות לבנות, ואפס משבצות שחורות). גם אחרי שנניח אבן דומינו אחת על הלוח ההפרש יהיה </span><span dir="ltr">2</span><span>. גם אחרי שנניח </span><span dir="ltr">20</span><span> אבנים על הלוח הוא יהיה </span><span dir="ltr">2</span><span>, וגם אחרי שנניח </span><span dir="ltr">31</span><span> אבני דומינו על הלוח ההפרש יהיה </span><span dir="ltr">2</span><span>...</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>אבל רגע, יש בלוח הגזור </span><span dir="ltr">62</span><span> משבצות, אז אם הנחנו </span><span dir="ltr">31</span><span> אבני דומינו עליו, זה אומר שכיסינו את כולו (כי כל אבן דומינו מכסה </span><span dir="ltr">2</span><span> משבצות). כלומר, אין בכלל משבצות גלויות, ולכן ההפרש בין מספר המשבצות הלבנות הגלויות למספר המשבצות השחורות הגלויות הוא </span><span dir="ltr">0</span><span>, וזה לא בסדר. זה סותר את התכונה שראינו שנשמרת. לכן <span style="text-decoration: underline;">לא ייתכן</span> שנצליח ל</span><span>שי</span><span>ם </span><span dir="ltr">31</span><span> אבני דומינו על הלוח – כלומר, אין סיכוי שנכסה אותו.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>זה סופה של החידה הזו. למעשה, העובדה שהיא מוצגת כחידה על לוח שחמט הופכת אותה לקלה יחסית, שכן ניתן לזהות את התכונה של ההפרש בין השחור ללבן בקלות יחסית. ניסוח מאתגר יותר של החידה מדבר על לוח משבצות לא צבוע – והרעיון של צביעה אמור להגיע מהפותר, לא מהשאלה. ישנן הכללות לא מעטות לחידה התמימה הזו, שאולי אדבר עליהן בעתיד.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>ומכאן לחידת משחק ה-15. כאן השמורה היא חמקמקה הרבה יותר, וקיימת סכנה של אובדן קוראים במהלך הפירוט שלה. לכן נתחיל מהסוף: מה שעו</span><span>שי</span><span>ם הוא להתאים מספר כלשהו לכל לוח משבצות. השמורה היא הזוגיות של המספר הזה – כלומר, אם הוא זוגי, כך הוא יישאר גם אחרי שנשחק עם הפאזל ונזיז משבצות (בצורה חוקית! לא על ידי עקירה והשתלה מחודשת במקום אחר בלוח), ואם הוא אי זוגי הוא יוותר אי זוגי תמיד. מכאן נובעת אי הפתירות של החידה מייד: המספר הזה הוא זוגי בלוח ה"נכון", ואי זוגי בלוח ה"מעורבב". לכן אין שום דרך להגיע ללוח הנכון מהלוח המעורבב ללא הפעלת כוח פיזי בלתי מתון.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>לפני שנציג את המספר הזה ולמה הוא שמורה, רק הערת סיכום אחת. שאלה נפוצה במיוחד בדיונים על נושאים מתמטיים היא "בשביל מה זה טוב?". השאלה "בשביל מה זה טוב, שאלות "בשביל מה זה טוב?"" היא נושא לדיון נרחב בפני עצמו, ולכן רק אציין בינתיים שאיני חובב גדול של השאלה, ולכן גם התשובות שלי יהיו בהתאם – אנסה להציג "</span><span>שי</span><span>מו</span><span>שי</span><span>ם" שלא מנצחים את הסרטן ולא מביאים אדם לירח ובחזרה, אבל בכל זאת יש להם נגיעה כלשהי למציאות.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>במקרה של חידת משחק ה-15, אפשר לחשוב על הבעיה הבאה: נניח שאתה (ה</span><span>שי</span><span>מוש בלשון זכר נובע משוביניסטיותה של השפה העברית וגו', והן בגלל שנ</span><span>שי</span><span>ם נבונות מכדי לבצע את השגיאה שאני עומד לתאר) מתכנת מתחיל בחברת תוכנה מצליחה שאת שמה לא נזכיר כאן, ואתה רוצה לכתוב משחק קטן </span><span>שי</span><span>תלווה לגרסה החדשה של מערכת ההפעלה שלך – כמו "סוליטייר". ניסיון העבר מראה שבמשחק הזה ישחקו מיליונים (בעיקר חיילים משועממים בקריה), ולכן כדאי שלא יהיו בו שגיאות מביכות. אתה מחליט ליצור גרסה ממוחשבת של משחק ה-15, ותוך זמן קצר עולה הדבר בידך ויש לנו לוח עם משבצות שאפשר להזיז וכולם שמחים ומאושרים. רק דבר אחד נותר – לכתוב את קטע הקוד שמערבב את הלוח.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>כדי לא לסבך לעצמך יותר מדי את החיים, אתה כותב קטע קוד פשוט: לכל משבצת בלוח אתה מגריל מספר כלשהו עבורה (ומוודא שאף מספר לא יוגרל פעמיים), ואז שמח ומאושר אתה הולך לישון ומפיץ את המשחק עם מערכת ההפעלה. בינתיים בא אלייך העובד מקיוביקל ג' 3 ואומר שהוא ניסה לשחק קצת ולא הצליח לפתור את המשחק, אבל אתה מנפנף אותו, ובצדק; הרי הוא לא הצליח לפתור אפילו את משחק מס' 11,982 בפריסל!</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>איך אפשר היה למנוע את השגיאה הזו? טוב, התשובה שאני אמור לומר היא כנראה "היית מכיר את חידת ה-15 ומבין שלא כל מצב בלוח הוא ניתן לפתרון!". בפועל כנראה שהדבר שהיה חסר כאן הוא פשוט </span><span>השלב של בדיקת התוכנה – לא קשה לכתוב פותר ממוחשב למשחק, ואם הוא היה נכשל היה ברור </span><span>שי</span><span>ש כאן בעיה גם בלי השכן מהקיוביקל.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>אז מה עו</span><span>שי</span><span>ם בתוכנות אמיתיות שמדמות את המשחק? פשוט משחקים אותו: נותנים למחשב "לערבב" את הלוח על ידי כך </span><span>שי</span><span>זיז באקראי משבצות בתוך הלוח – כלומר, יבצע המון מהלכים חוקיים. בערך כמו הצורה שבה אנחנו מערבבים את הקובייה ההונגרית.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>לסיום, השורדים מקבלים את הפרס המובטח: השמורה של לוח משחק ה-15. אולי יש שמורה פשוטה יותר (אשמח לדעת עליה!), אבל בינתיים זה מה יש. הרעיון הבסיסי הוא להשתמש במושג של "הפרת סדר". יש בלוח הפרת סדר על כל זוג לוחיות שנמצאות במקום לא נכון זו ביחס לזו – למשל, אם לוחית מס' 13 נמצאת <span style="text-decoration: underline;">לפני</span> לוחית מס' 5 בלוח (כשהסדר הוא משמאל לימין ומלמעלה למטה), זו הפרת סדר. בהינתן לוח כלשהו זה כאב ראש רציני לספור כמה הפרות סדר יש בו – אבל למרבה המזל, זה לא מה שמעניין אותנו. מעניינת אותנו רק הזוגיות של מספר הפרות הסדר.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>קצת יותר במדויק – המספר שאנחנו מסתכלים בזוגיות שלו הוא המספר שמורכב ממספר הפרות הסדר שבלוח, <span style="text-decoration: underline;">ועוד</span> מספר השורה שבה נמצאת המשבצת הריקה. למשל, בלוח המקורי, המסודר, המספר הזה הוא 4: יש 0 הפרות סדר, והשורה שבה נמצאת המשבצת הריקה היא 4. לעומת זאת, בלוח שבו בוצעה ההחלפה בין 14 ו-15, יש הפרת סדר בודדת, ועדיין השורה שבה נמצאת המשבצת הריקה היא 4, ולכן המספר הוא 5. כלומר, בלוח המסודר המספר שלנו הוא זוגי, ובלוח המעורבב הוא אי זוגי. לכן כל מה </span><span>שי</span><span>ש להראות הוא שזוגיות המספר הזה נשמרת על ידי הפעולות החוקיות שאפשר לבצע על הלוח.</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>אילו פעולות יש? הזזה של לוחית ימינה או שמאלה, למעלה או למטה במקום המשבצת הריקה. הזזה ימינה או שמאלה לא משנה כלום (כי המשבצת הריקה נותרת באותה שורה, ואף לוחית לא עוקפת אף לוחית אחרת, כך שמספר הפרות הסדר לא משתנה). הזזה למעלה או למטה עושה שני דברים: היא משנה ב-1 את מספר השורה שבה נמצאת המשבצת הריקה, והיא משנה את מספר הפרות הסדר בלוח ב-1 או ב-3, כי הלוחית שהוזזה עוקפת שלוש לוחיות אחרות (נסו לעשות את החשבון!). לכן המספר שלנו משתנה ב-0, ב-2 או ב-4 (שוב, נסו לעשות את החשבון!) ולכן ה<span style="text-decoration: underline;">זוגיות</span> שלו אינה משתנה (אף שהוא עצמו משתנה).</span></p>
<p class="MsoNormal" dir="rtl"><span> </span></p>
<p class="MsoNormal" dir="rtl"><span>זוהי השמורה, וזו הסיבה שבגללה אלפי אנ</span><span>שי</span><span>ם ניסו לשווא לפתור את החידה בימים עברו. ומה יקרה בימינו, אם למשל תוצע חידה של סודוקו בלתי פתיר או דבר מה דומה? הייתי שמח לומר ש"מה </span><span>ש</span><span>היה הוא </span><span>שי</span><span>היה", אבל אני חושד שבהקשר הזה, זה תקף במתמטיקה בלבד.</span></p>

