---
id: 148
title: "אני מתחייב לאפשר למגלי העתידות לשכנע אותי"
date: 2008-08-04 23:16:49
layout: post
categories: 
  - קריפטולוגיה
---
<p>
<p dir="rtl">יצא לי פעם לראות קטע משעשע מאוד מ<a href="http://he.wikipedia.org/wiki/%D7%A9%D7%99%D7%A9%D7%99_%D7%91%D7%92%D7%90%D7%95%D7%9F" target="_blank">תוכנית האירוח</a> של <a href="http://he.wikipedia.org/wiki/%D7%99%D7%94%D7%95%D7%A8%D7%9D_%D7%92%D7%90%D7%95%D7%9F" target="_blank">יהורם גאון</a>. הוא אירח את <a href="http://www.liormanor.co.il/" target="_blank">ליאור מנור</a>, והלה ניבא איזו נבואה עתידית של משהו שאין לו עליו שליטה ושם את הנבואה בכספת באחריות מפיקי התוכנית. לאחר זמן מה, שוב בתוכנית ולאחר שתוצאת האירוע המנובא הייתה ידועה לכל, פתח גאון את הכספת והוציא את הנבואה, שהתגלתה כנכונה לחלוטין, כמובן. מי שהראה לי את הוידאו השתעשע בעיקר ממה שהיה גלוי לחלוטין כאשר גאון פתח את הכספת - הקוד שלה היה 1-2-3-4, כנראה קוד ברירת המחדל הנפוץ בעולם. יש סיפורי אימה מזוויעים לספר על האסונות הקריפטוגרפיים שמתרחשים מכך שדבקים בברירת המחדל, אך לא ניכנס אליהם כעת. הסיבה שאני מספר על השטות הזו כעת היא כי מן הסתם, מה שראיתי לא שכנע אותי שלליאור מנור יש כוחות נבואיים (מצד שני, ובניגוד לקוסמים אחרים מסויימים, למיטב
ידיעתי מנור לא טוען שיש לו כאלו). מה בעצם הבעיה במה שראיתי, שמונעת ממני להשתכנע? הבעיה היא בכך שהעובדה שמנור שם את הפתק בכספת לא מהווה "התחייבות" אמינה שלו לנבואה שלו, מכיוון שהוא יכול לשנות אותה די בקלות - הרי אני לא באמת רואה מה עושים עם הכספת, או אפילו אם זו אותה כספת, ואין לי שום סיבה להניח שמפיקי התוכנית לא משתפים פעולה עם מנור. מצד שני, איך אפשר אחרת? הרי מנור ואני לא מתקשרים על בסיס יומיומי.

טוב, ברור שיש דרך טריוויאלית - מנור יגיד בטלוויזיה מה הנבואה במקום להסתבך עם מעטפות, וחסל; אבל הרי החוק הראשון של הנבואה אומר שאסור לעשות דברים כאלו. אם כן, האם יש דרך שבה מנור יכול "להתחייב" לאיזו שהיא תוצאה, מבלי שיוכל אחר כך לשנות את התוצאה שעליה התחייב, ועם זאת כל עוד הוא לא "יפתח" את ההתחייבות הזו, לא אדע בעצמי מהי?

<a href="http://en.wikipedia.org/wiki/Commitment_scheme" target="_blank">סכימת התחייבות</a> (Commitment scheme) הוא המושג הקריפטוגרפי שעוסק בדיוק בסיטואציה שכזו. הרעיון התיאורטי הוא כזה: יש שני "שחקנים" - אליס ובוב מיועדנו משכבר הימים, אבל לצורך הגיוון אשנה אותם לאריק ובנץ. לאריק יש סוד והוא רוצה להתחייב עליו בפני בנץ, מבלי לחשוף אותו לבינתיים - כלומר, לשלוח לבנץ מידע כלשהו שיהווה "התחייבות", ולאחר זמן מה "לפתוח" את ההתחייבות על ידי שליחת מידע נוסף שיגלה לבנץ מהו הסוד, וישכנע אותו שזה אכן הסוד שעליו בוצעה ההתחייבות מלכתחילה. לצורך פשטות נניח שהסוד הוא בן ביט אחד - כלומר, הוא 0 או 1 (זה לא מגביל אותנו, כי אם יש סוד שמורכב מכמה ביטים, אפשר להתחייב על כל ביט בנפרד). יש שתי דרישות שנשמעות סבירות מפרוטוקול שישמש את אריק ובנץ - סודיות ומחוייבות. סודיות פירושה שבנץ לא מסוגל לגלות מהו הסוד בהינתן ה"התחייבות", ומחוייבות פירושה שאריק לא יוכל לשנות את הסוד לאחר שביצע את ההתחייבות - דהיינו, אם הוא ינסה, בנץ ישים לב לרמאות.

אפשר לדבר על כמה רמות שונות של סודיות ומחוייבות. ניקח למשל סודיות. יש סודיות מושלמת, שפירושה שלא משנה מה בנץ יעשה ולא משנה איך - מובטח, תמיד, שהוא לא יצליח לגלות את הסוד של אריק, כל עוד אריק לא פתח את ההתחייבות. לעומת זאת, יש סודיות חישובית - פירוש הדבר שאם בנץ מוגבל מבחינה חישובית רק ל<a href="http://he.wikipedia.org/wiki/%D7%9E%D7%9B%D7%95%D7%A0%D7%AA_%D7%98%D7%99%D7%95%D7%A8%D7%99%D7%A0%D7%92_%D7%94%D7%A1%D7%AA%D7%91%D7%A8%D7%95%D7%AA%D7%99%D7%AA" target="_blank">חישובים הסתברותיים פולינומיים</a> (המשמעות המדוייקת אינה חשובה - חשבו על כך בתור "חישוב שאפשר לבצע בזמן סביר בתוכנית מחשב שיכולה לבצע הגרלות"), הסיכוי שהוא יצליח לגלות את הסוד של אריק הוא אפסי (רמת ביניים היא "סודיות סטטיסטית", שפירושה שגם אם אריק לא מוגבל חישובית, הסיכוי שלו לגלות את הסוד הוא נמוך ביותר ותלוי בצורה האקראית שבה ההתחייבות נוצרה). כל אלו תקפים גם עבור מחוייבות - כך למשל מחוייבות חישובית פירושה שאם אריק מוגבל לחישובים יעילים בלבד, ההסתברות שהוא יצליח לרמות ולשנות את הסוד היא אפסית.

נתחיל מהחדשות הרעות - אין, לא הייתה ולא תהיה סכימת התחייבות שגם הסודיות וגם המחוייבות שלה מושלמים. הסיבה לכך היא אלמנטרית מבחינה מתמטית - כמעט פילוסופית. נניח שיש לנו סודיות מושלמת. זה אומר שלא משנה מה בנץ עושה, יש לפחות שני "סודות פוטנציאליים" שכל אחד מהם עשוי להיות הסוד שעליו אריק התחייב, ובנץ לא יכול להבדיל ביניהם; אפילו אם הוא "ינחש" כל דבר אפשרי שאריק יגיד לו בזמן פתיחת ההתחייבות, עדיין יהיו שני סודות שהם לגיטימיים. מכאן שאריק יכול לרמות - הוא יתחייב על סוד א', אבל בזמן פתיחת ההתחייבות יגיד את מה שצריך להגיד כדי להפוך את סוד ב' ללגיטימי. הפואנטה כאן היא שאנו מקווים שלאריק לא יהיה מושג מה צריך להגיד כדי להפוך את סוד ב' ללגיטימי, ושחיפוש התשובה הזו ייקח לו יותר מדי זמן. מכאן רואים גם שאם יש מחוייבות מושלמת, אז יש רק סוד אחד שאריק מסוגל לשכנע בו את בנץ, ואז בנץ יכול "לנחש" מה אריק יגיד כדי לשכנע אותו, ולהשתכנע. זו רק שאלה של הזמן שיידרש לבנץ כדי למצוא את השכנוע הזה.

מבולבלים? הגיוני למדי, בהתחשב בכך שלא נתתי שום דוגמה קונקרטית. אם כן, הנה דוגמה פשוטה, שאותה הציג <a href="http://he.wikipedia.org/wiki/%D7%A0%D7%95%D7%92%D7%94_%D7%90%D7%9C%D7%95%D7%9F" target="_blank">נוגה אלון</a> בהרצאתו שכבר דיברתי עליה <a href="http://www.gadial.net/?p=146" target="_blank">כאן</a> (בהקשר של אחד השימושים של סכימות התחייבות - "הטלת מטבע דרך הטלפון"): אם אריק רוצה להתחייב על 0, הוא מגריל שני מספרים ראשוניים בני 300 ספרות כל אחד, מכפיל אותם ומביא לבנץ. אם הוא רוצה להתחייב על 1 הוא מגריל שלושה ראשוניים בני 200 ספרות כל אחד ושולח לבנץ. מנקודת מבטו של בנץ, הוא תמיד מקבל מספר בן 600 ספרות שהפירוק שלו לא ידוע (ועד להודעה חדשה, <a href="http://he.wikipedia.org/wiki/%D7%A4%D7%99%D7%A8%D7%95%D7%A7_%D7%9C%D7%92%D7%95%D7%A8%D7%9E%D7%99%D7%9D" target="_blank">פירוק לגורמים</a> הוא דבר קשה מבחינה חישובית). כשאריק רוצה לפתוח את ההתחייבות שלו הוא פשוט שולח לבנץ את הפירוק של המספר. האם המחוייבות כאן מושלמת? והסודיות?

הנה דוגמה נוספת, מורכבת יותר, שמבוססת על בעיה אחרת מ<a href="http://he.wikipedia.org/wiki/%D7%AA%D7%95%D7%A8%D7%AA_%D7%94%D7%9E%D7%A1%D7%A4%D7%A8%D7%99%D7%9D" target="_blank">תורת המספרים</a>, ומתאפיינת במחוייבות מוחלטת אבל בסודיות חישובית בלבד, וגם כאן, כמו בדוגמה הקודמת, זה נכון רק תחת ההנחה שבעיה מסויימת (שכיום לא ידוע לה פתרון יעיל) היא אכן בלתי פתירה בזמן חישוב יעיל. הרעיון די פשוט. אנחנו מסתכלים על המספרים מ-1 ועד p-1 כאשר p הוא ראשוני כלשהו, עם פעולת <a href="http://he.wikipedia.org/wiki/%D7%97%D7%A9%D7%91%D7%95%D7%9F_%D7%9E%D7%95%D7%93%D7%95%D7%9C%D7%A8%D7%99" target="_blank">כפל מודולו</a> p - כלומר, כדי לכפול שני מספרים כופלים אותם "כרגיל" ואז מחלקים ב-p ומחזירים את השארית. כך למשל אם p הוא חמש, אז שלוש כפול ארבע יתן 2 - השארית של חלוקת 12 ב-5.

כעת, הבעיה היא כזו: אם p הוא גדול יחסית, ואם {% equation %}g{% endequation %} הוא מספר בתחום שלנו שבאמצעות העלאה שלו בחזקה (מודולו p) אפשר לקבל את <strong>כל</strong> המספרים מ-1 ועד p-1 - למספר שכזה קוראים "<a href="http://he.wikipedia.org/wiki/%D7%97%D7%91%D7%95%D7%A8%D7%94_%D7%A6%D7%99%D7%A7%D7%9C%D7%99%D7%AA" target="_blank">יוצר</a>", מושג שמגיע מ<a href="http://he.wikipedia.org/wiki/%D7%AA%D7%95%D7%A8%D7%AA_%D7%94%D7%97%D7%91%D7%95%D7%A8%D7%95%D7%AA" target="_blank">תורת החבורות</a> - אז אם אנחנו יודעים את {% equation %}g{% endequation %}, ואם יש לנו את הערך של חזקה כלשהי שלו, דהיינו מתוך המשוואה {% equation %}g^x=y{% endequation %} ידוע לנו גם {% equation %}y{% endequation %}, עדיין קשה לנו למצוא את המעריך של g, כלומר את {% equation %}x{% endequation %}. הבעיה הזו נקראת "<a href="http://he.wikipedia.org/wiki/%D7%91%D7%A2%D7%99%D7%99%D7%AA_%D7%94%D7%9C%D7%95%D7%92%D7%A8%D7%99%D7%AA%D7%9D_%D7%94%D7%93%D7%99%D7%A1%D7%A7%D7%A8%D7%98%D7%99" target="_blank">בעיית הלוגריתם הדיסקרטי</a>". לוגריתם כי <a href="http://he.wikipedia.org/wiki/%D7%9C%D7%95%D7%92%D7%A8%D7%99%D7%AA%D7%9D" target="_blank">לוגריתם</a> פירושו בדיוק
למצוא מעריך של חזקה ביחס לבסיס מסויים שנותן ערך נתון; דיסקרטי, כי אנחנו לא עובדים מעל <a href="http://he.wikipedia.org/wiki/%D7%A9%D7%93%D7%94_%D7%94%D7%9E%D7%A1%D7%A4%D7%A8%D7%99%D7%9D_%D7%94%D7%9E%D7%9E%D7%A9%D7%99%D7%99%D7%9D" target="_blank">המספרים הממשיים</a>, שבהם מציאת לוגריתם אינה מסובכת, אלא מעל אוסף של מספרים טבעיים, ובהם העסק הרבה פחות קל.

שתי הדוגמאות הללו נחמדות, אך הן אד-הוקיות מאוד במובן מסויים: הן מתבססות על קושי של בעיה "אמיתית" ספציפית, ואם הבעיה הזו תישבר, השיטה תלך לכל הרוחות. האם קיימת דרך "גנרית" לבנות סכמת התחייבות, שמתבססת על מעין "קופסאות שחורות" גנריות? התשובה היא כן, וזה בדיוק מה שה<a href="http://he.wikipedia.org/wiki/%D7%A7%D7%A8%D7%99%D7%A4%D7%98%D7%95%D7%92%D7%A8%D7%A4%D7%99%D7%94" target="_blank">קריפטוגרפיה</a> התיאורטית מתעסקת בו: ניתוח כללי וגנרי של מושגים כמו "בעיה קשה מבחינה קריפטוגרפית" (חשוב להבין שזה לא שם נרדף ל"בעיה קשה מבחינה חישובית", ואסביר בהמשך), שאחר כך מאפשרים לה לבנות, למשל, מערכות הצפנה שהן בטוחות באופן מוכח. מה הבעיה כאן? למשל, שכל עוד לא ידוע לנו ש-<a href="http://www.gadial.net/?p=96" target="_blank">P שונה מ-NP</a>, ייתכן שכל הקריפטוגרפיה התיאורטית מבוססת על מגדלים פורחים באוויר, שכן כל מה שהיא עוסקת בו פחות או יותר דורש את ההנחה ש-P שונה מ-NP.

אחד המושגים הבסיסיים ביותר, אולי הבסיסי ביותר (יש סיבה מדוע הוא מופיע על <a href="http://books.google.com/books?hl=en&id=uyhDTk-2arMC&dq=oded+goldreich&printsec=frontcover&source=web&ots=CKbZ-PZ7m9&sig=k1qb3hZ2DJ9-Ed7z3_VoTDJVL2A&sa=X&oi=book_result&resnum=5&ct=result" target="_blank">כריכת ספרו</a> של <a href="http://en.wikipedia.org/wiki/Oded_Goldreich" target="_blank">עודד גולדרייך</a> שעוסק בקריפטוגרפיה תיאורטית) הוא <a href="http://he.wikipedia.org/wiki/%D7%A4%D7%95%D7%A0%D7%A7%D7%A6%D7%99%D7%94_%D7%97%D7%93_%D7%9B%D7%99%D7%95%D7%95%D7%A0%D7%99%D7%AA" target="_blank">פונקציה חד כיוונית</a> - פונקציה {% equation %}f(x){% endequation %} שקל לחשב אותה, אבל קשה, בהינתן {% equation %}y=f(x){% endequation %} למצוא {% equation %}x^\prime{% endequation %} כך ש-{% equation %}f(x^\prime)=y{% endequation %}. מהיצור הזה אפשר לבנות שלל כלים קריפטוגרפיים חביבים. בינתיים לא ארחיב כמעט על כלום, כי אני רוצה להציג דבר אחד ספציפי - סכימת התחייבות. לשם כך צריך פונקציה חד כיוונית שמקיימת תכונה נוספת - היא הפיכה (יותר במדוייק, היא <a href="http://he.wikipedia.org/wiki/%D7%A4%
D7%A8%D7%9E%D7%95%D7%98%D7%A6%D7%99%D7%94" target="_blank">פרמוטציה</a>, אך לא ניכנס לזאת), כלומר לכל פלט יש קלט אחד ויחיד שנותן אותו. האם אתם כבר רואים את הסכימה מתחילה להיבנות?

טוב, אז אפשר לפעול בדיוק כמו במקרה הלוגריתם הדיסקרטי - לבחור {% equation %}x{% endequation %} שייצג את הסוד, לחשב את {% equation %}f(x){% endequation %}, לשלוח לבנץ ושלום על ישראל. מה הבעיה? שבנץ אולי לא יצליח למצוא את ה-{% equation %}x{% endequation %} שממנו התחלנו (הרי דרשנו ש-{% equation %}f{% endequation %} היא חד כיוונית), אבל אולי הוא מסוגל להפיק אינפורמציה <strong>כלשהי</strong> על {% equation %}x{% endequation %}, למשל שהביט האחרון שלו הוא 0, או שסכום הביטים שלו הוא 1, וכדומה (זה שפונקציה היא חד כיוונית לא סותר זאת). מצד שני, חייבים לשלוח את {% equation %}f(x){% endequation %} אחרת זה יפגום במחוייבות המוחלטת של אריק; לכן הרעיון הוא לחפש מידע כלשהו - לצורך העניין, ביט בודד - שניתן להפיק מ-{% equation %}x{% endequation %} בקלות, אך קשה להפיק אותו מ-{% equation %}f(x){% endequation %}. למידע שכזה קוראים "פרדיקט ליבה" (<a href="http://en.wikipedia.org/wiki/Hard-core_predicate" target="_blank">Hard-core predicate</a>). במילים אחרות, פרדיקט ליבה הוא פונקציה קלה לחישוב {% equation %}h(x){% endequation %} שמובטח לנו שקשה לחשב (במובן הקריפטוגרפי של המילה, שטרם הצגתי פורמלית) אם נתון לנו רק {% equation %}f(x){% endequation %} (בפרט, הפרדיקט הוא ביחס לפונקציה חד כיוונית ספציפית).

בהינתן פונקציה חד כיוונית, ניתן באמצעות התחכמות מסויימת להפיק ממנה פונקציה חד כיוונית אחרת עם פרדיקט ליבה ספציפי, כך שאפשר להניח תמיד שיש לפונקציה החד כיוונית שאנו עובדים איתה פרדיקט ליבה. כצפוי, לא אכנס לפרטי ה"התחכמות" הזו כרגע. באמצעות פרדיקט הליבה הזה, סכמת ההתחייבות היא פשוטה: בהינתן סוד {% equation %}S{% endequation %} של ביט בודד, אריק מגריל {% equation %}x{% endequation %}, מחשב את {% equation %}f(x){% endequation %} ואת פרדיקט הליבה {% equation %}h(x){% endequation %}, שולח לבנץ את {% equation %}f(x){% endequation %} ואת {% equation %}S\oplus h(x){% endequation %} (כלומר, את הסוד כשהוא "מכוסה" באמצעות ערכו של פרדיקט הליבה), וזהו. כשאריק רוצה לפתוח את ההתחייבות, הוא פשוט שולח את {% equation %}x,S{% endequation %}; בנץ יחשב את {% equation %}f(x){% endequation %} ויוודא שזה אכן הערך שיש ברשותו, ואז יוכל לחשב את פרדיקט הליבה, להסיר את הכיסוי מה-S שאריק שלח לו קודם ולראות שהכל בסדר. יש לנו כאן מחוייבות מושלמת (כי {% equation %}f{% endequation %} היא הפיכה, ולכן אין עוד מקור ל-{% equation %}f(x){% endequation %}), ומצד שני יש לנו בטיחות חישובית <strong>מוכחת</strong>, שכן זוהי בדיוק המהות של פרדיקט ליבה. אז מה העוקץ כאן? כמובן, שכיום לא ידוע על אף פונקציה שהיא חד כיוונית באופן מוכח, ואם נגלה אחת כזו, זה יגרור מייד ש-P שונה מ-NP (כי אם P=NP, אז כל דבר שקל לוידוא הוא קל לחישוב; מכיוון שקל לוודא ש-{% equation %}x{% endequation %} ספציפי הוא המקור של {% equation %}f(x){% endequation %}, פשוט על ידי חישוב {% equation %}f{% endequation %}, ינבע מכך ש-P=NP שקל גם למצוא {% equation %}x{% endequation %} שכזה).

מעניין? אני מתחייב להרחיב בהמשך בנושאי הקריפטוגרפיה התיאורטית, ובצורה יותר מסודרת מאשר כאן. בינתיים, אני מקווה שיצוץ מגלה עתידות שיפרסם באתר האינטרנט שלו התחייבות על איזה אירוע עתידי באמצעות מכפלה של שניים או שלושה ראשוניים; אלא שהמציאות עגומה הרבה יותר. מגידי עתידות רבים טורחים לפרסם תחזיות ספציפיות, שמרבית הזמן מתבדות. האם מישהו שם לכך לב, עם או בלי סכימות התחייבות?

