<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מה הקשר בין חוגי פולינומים לאימות חומרה? - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <meta name="description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://gadial.net/2018/01/07/polyonomial_rings_and_hardware_verification/">
    <meta property="og:title" content="מה הקשר בין חוגי פולינומים לאימות חומרה?">
    <meta property="og:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta property="og:site_name" content="לא מדויק">
    

<meta property="og:image" content="http://gadial.net/img/main/default-card.png" />


        
    <!-- Twitter -->
    

<meta name="twitter:card" content="summary">


    <meta name="twitter:url" content="https://gadial.net/2018/01/07/polyonomial_rings_and_hardware_verification/">
    <meta name="twitter:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta name="twitter:site" content="@" />
    <meta property="twitter:title" content="מה הקשר בין חוגי פולינומים לאימות חומרה?">
    

<meta property="twitter:image" content="http://gadial.net/img/main/default-card.png" />


    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="לא מדויק - RSS Feed" href="/feed.xml">
       
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Hamburger menu button */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.8em;
            color: white;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .menu-toggle:hover {
            opacity: 0.8;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .top-nav .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-nav .site-title {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0;
                padding: 10px 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            /* Hide nav links by default on mobile */
            .top-nav .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                margin-top: 10px;
            }
            
            /* Show when expanded */
            .top-nav .nav-links.expanded {
                display: flex;
            }
            
            .top-nav .nav-links > a {
                text-align: center;
                padding: 12px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box {
                width: 100%;
                flex-direction: column;
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box input {
                width: 100%;
                margin-bottom: 5px;
                min-width: 0;
            }
            
            .top-nav .search-box button {
                width: 100%;
            }
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="site-title">
                <a href="/" style="color: white; text-decoration: none;">לא מדויק</a>
                <button class="menu-toggle" onclick="toggleMobileMenu()" aria-label="תפריט">
                    ☰
                </button>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <a href="/categories/">קטגוריות</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2018/01/01/zero_power_equals_one/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">אז למה דברים בחזקת 0 שווים 1?</span>
            </a>
            

            
            <a href="/2018/01/21/is_pi_infinite/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">האם פאי הוא מספר אינסופי?</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>מה הקשר בין חוגי פולינומים לאימות חומרה?</h1>
            <div class="post-meta">
                <span class="date">2018-01-07</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/אלגברה מופשטת.html">אלגברה מופשטת</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/אימות חומרה.html">אימות חומרה</a>
                    
                    <a href="/tags/בסיס גרובנר.html">בסיס גרובנר</a>
                    
                    <a href="/tags/חוגי פולינומים.html">חוגי פולינומים</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>ביקשו ממני לכתוב פוסט שיתן שימוש כלשהו למה שדיברתי עליו על חוגים במדעי המחשב. ובכן, לא הצלחתי לחשוב על משהו מוחץ ממש. התחום השימושי ביותר הוא ככל הנראה תורת השדות, בפרט שדות סופיים, אבל אני לא מחשיב את התחום הזה כחלק מתורת החוגים אלא כתחום העומד בפני עצמו. האם אני יכול לשלוף מהשרוול דוגמא שמשתמשת רק בדברים שראינו עד כה - וספציפית, אידאלים?</p>
<p>ואז קפץ לי לראש <a href="http://www.cs.utexas.edu/users/hunt/FMCAD/FMCAD17/preprints/s1p3.pdf">מאמר</a> מ-2017 שקראתי לא מזמן ("Column-Wise Verification of Multipliers Using Computer Algebra" של Ritirc, Biere, Kauers) ונותן הצצה לשימוש בחוגים שהוא אולי לא מתבקש לגמרי במבט ראשון - שימוש בתחום של <strong>אימות חומרה</strong>. אני לא טוען שמה שמוצג במאמר הזה הוא הדבר הכי טוב שאפשר לעשות עם חוגים באימות חומרה (וממילא רוב הטכניקות לאימות חומרה שאני מכיר לא משתמשות בכלל בחוגים) אבל המאמר הזה נותן הקדמה טובה ל"איך עושים את זה" שהיא מה שאני רוצה לדבר עליו פה, ולא על התוכן היותר ספציפי וטכני שלו.</p>
<p>הבעיה הבסיסית של <strong>אימות חומרה</strong> היא זו: נתון לנו מעגל לוגי כלשהו עם קלט ופלט, שאמור לחשב פונקציה מסויימת. אנחנו רוצים לוודא שהוא אכן מחשב אותה. מה זה "מעגל לוגי"? אפשר לחשוב עליו בתור גרף מכוון וחסר מעגלים שבו כל צומת מייצג ביט בודד (0 או 1). הצמתים שאין להם כניסות הם הקלטים, הצמתים שאין להם יציאות הם הפלטים, ולכל צומת שאיננו קלט מתאימה פעולה לוגית כלשהי. למשל, פעולת AND שמחזירה 1 רק אם שני הקלטים שלה הם בעצמם 1, ואחרת מחזירה 0, או פעולת NOT שמקבלת קלט בודד ומחזירה 1 אם הקלט היה 0 ואחרת מחזירה 0. הרעיון הוא זה: תציבו ערכים באופן שרירותי בקלטים, תבצעו את החישוב שמתאים לצמתים שאינם קלט ותראו איזה פלט תקבלו בסוף.</p>
<p>נשמע פשוט? ובכן, צריך לזכור שבמעגלים אמיתיים יכולים להיות עשרות אלפי קלטים ומיליוני צמתים פנימיים. במעגלים אמיתיים הסיטואציה גם מסובכת יותר כי החישוב מתבצע ב"סיבובים" כשהפלטים של כל סיבוב יכולים להיות חלק מהקלטים של הסיבוב הבא, וסוג השאלות שנשאל הוא בסגנון "האם אחרי עשרים סיבובים הפלט הזה-והזה עשוי לצאת 0?". מצד שני, הבעיה היא <strong>באמת</strong> פשוטה יחסית לניסוח; באימות תוכנה, למשל, הסיטואציה הרבה יותר מורכבת.</p>
<p>צורה מקובלת מאוד בתחום לתאר מעגל היא באמצעות שערי AND ו-NOT בלבד, ואפילו בצורה מפושטת: בגרף מציירים רק שערי AND, ואילו שערי ה-NOT מופיעים בתור סימונים שיכולים להופיע על הקשתות שנכנסות לשערי ה-AND. הנה דוגמא מתוך המאמר:</p>
<p><a href="/img/2018/01/CircuitsAndPolynomialRings.png" rel="attachment wp-att-3531"><img class="aligncenter size-full wp-image-3531" src="/img/2018/01/CircuitsAndPolynomialRings.png" alt="CircuitsAndPolynomialRings" width="571" height="338" /></a></p>
<p>במעגל השמאלי ביותר הפונקציה שמחושבת היא <span class="math">\(g=a\wedge\neg b\)</span>. באמצעי החישוב כבר כולל שלושה צמתי ביניים:</p>
<ul>
    <li><span class="math">\(l=a\wedge b\)</span></li>
    <li><span class="math">\(r=\neg a\wedge\neg b\)</span></li>
    <li><span class="math">\(s=\neg l\wedge\neg r\)</span></li>
</ul>
<p>ואם חושבים על זה לרגע, רואים שהפונקציה שמחושבת פה היא <span class="math">\(s=\left(a\ne b\right)\)</span> (כלומר, <span class="math">\(s\)</span> מקבלת 1 אם ורק אם <span class="math">\(a,b\)</span> שונים זה מזה). עכשיו בואו תעשו כמוני עבור המעגל הימני ביותר ותגלו איזו פונקציה הוא מחשב כי בחיי שאין לי כוח לבדוק בעצמי.</p>
<p>המבנה הזה של גרף, שנקרא AIG (קיצור של And-Inverter Graph) הוא מאוד מועיל בתור ייצוג ביניים שמופק ממעגל חומרה "אמיתי" (כזה שנכתב ב-VHDL, למשל) ואפשר לבצע בו אופטימיזציות ואז לשלוח אותו הלאה, לאלגוריתם שמבצע אימות חומרה בפועל. אבל האלגוריתמים הללו על פי רוב משתמשים בייצוגים שונים ויותר מתאימים להם של <strong>הפונקציה</strong> שהגרף מחשב. בעבר הייצוג הפופולרי היה סוג של גרף מאופטמז שנקרא BDD, אבל לא אציג כאן. הייצוג הפופולרי ביותר בימינו הוא נוסחת CNF שמקודדת את המעגל - למשל, המעגל השמאלי ניתן לתיאור על ידי הנוסחה <span class="math">\(\left(\neg a\vee b\vee g\right)\wedge\left(a\vee\neg c\right)\wedge\left(\neg b\vee\neg c\right)\)</span> שמקבלת 1 אם ורק אם מתקיים <span class="math">\(g=a\wedge\neg b\)</span>. בצורה הזו, <strong>השמה מספקת</strong> לנוסחת ה-CNF מתאימה ל<strong>חישוב חוקי</strong> במעגל. אבל אם לא הבנתם כלום מזה, לא חשוב - אני לא הולך לדבר על שיטת הייצוג הזו מעבר לאזכור שלה.</p>
<p>מה שאנחנו רוצים לדבר עליו הוא ייצוג של המעגל בעזרת <strong>פולינומים</strong>. הרעיון הוא כזה: נניח ש-<span class="math">\(g,a,b\)</span> הם כולם <strong>משתנים</strong> (מה שבדרך כלל אנחנו משתמשים עבורו ב-<span class="math">\(x,y,z\)</span>). הנה פולינום לדוגמא שמשתמש במשתנים הללו: <span class="math">\(p\left(g,a,b\right)=a\left(1-b\right)-g\)</span>. לפולינום הזה יש את התכונה הבאה: אם נציב למשתנים ערכים שהם או 0 או 1, אז הפולינום יתאפס רק על ערכים שבהם <span class="math">\(g=a\wedge\neg b\)</span>. כלומר, <strong>השורשים של הפולינום</strong> מתאימים ל<strong>חישוב חוקי</strong> של <span class="math">\(g=a\wedge\neg b\)</span>. דרך אחת לומר את זה היא לומר שהקשר <span class="math">\(g=a\wedge\neg b\)</span> ניתן לתיאור באמצעות <strong>זהות פולינומית</strong>.</p>
<p>הנה האופן שבו אפשר להמיר את כל השערים הבסיסיים שאפשר לצפות לפגוש במעגל בוליאני בזהויות פולינומיות מתאימות:</p>
<ul>
    <li>את <span class="math">\(g=\neg a\)</span> אפשר לתאר עם <span class="math">\(p\left(g,a\right)=\left(1-a\right)-g\)</span></li>
    <li>את <span class="math">\(g=a\wedge b\)</span> אפשר לתאר עם <span class="math">\(p\left(g,a,b\right)=ab-g\)</span></li>
    <li>את <span class="math">\(g=a\vee b\)</span> אפשר לתאר עם <span class="math">\(p\left(g,a,b\right)=ab-\left(a+b\right)+g\)</span> (אפשר להגיע לזה בקלות משני הקודמים בעזרת כללי דה-מורגן).</li>
    <li>את <span class="math">\(g=a\oplus b\)</span> אפשר לתאר עם <span class="math">\(p\left(g,a,b\right)=2ab-\left(a+b\right)+g\)</span></li>
</ul>
<p>באופן כללי, "זהות פולינומית" במעגל <span class="math">\(C\)</span> היא פולינום <span class="math">\(p\left(x_{1},\dots,x_{n}\right)\)</span> שהמשתנים שלו מתאימים לצמתים במעגל (דהיינו יש לנו משתנה לכל צומת של <span class="math">\(C\)</span> והפולינום <span class="math">\(p\)</span> משתמש בחלק מהם) כך שכל הצבה למשתנים <strong>שמתאימה למה שקורה במעגל</strong> מחזירה 0.</p>
<p>במאמר מסמנים ב-<span class="math">\(I\left(C\right)\)</span> את קבוצת כל הזהויות הפולינומיות שמתאימות למעגל <span class="math">\(C\)</span> מסויים. זו הגדרה סטנדרטית בתחום שנקרא <strong>גאומטריה אלגברית</strong>: שם בהינתן קבוצת נקודות <span class="math">\(V\)</span> במרחב כלשהו, מסמנים ב-<span class="math">\(I\left(V\right)\)</span> את אוסף כל הפולינומים שמתאפסים מעל המרחב הזה. האוסף הזה הוא <strong>אידאל</strong>: אם שני פולינומים מתאפסים על אותן נקודות, אז גם הסכום שלהם יתאפס על אותן נקודות, וכמובן שאם <span class="math">\(p\left(a\right)=0\)</span> ו-<span class="math">\(q\)</span> הוא פולינום כלשהו, אז <span class="math">\(\left(pq\right)\left(a\right)=0\)</span> גם כן (כי מקבלים את המכפלה של 0 ב-<span class="math">\(q\left(a\right)\)</span> שלא משנה מה הוא).</p>
<p>רוצים לדעת אם המעגל <span class="math">\(C\)</span> מקיים תכונה כלשהי שניתן לנסח בתור זהות פולינומית? יפה! כל מה שנשאר לעשות הוא לבדוק שייכות לאידאל <span class="math">\(I\left(C\right)\)</span>. במאמר מדגימים את זה עבור התכונה של "המעגל מבצע פעולת כפל". כדי לנסח את זה, מסמנים את הקלטים של המעגל ב-<span class="math">\(a_{0},a_{1},\dots,a_{n-1},b_{0},b_{1},\dots,b_{n-1}\)</span> - שתי סדרות של <span class="math">\(n\)</span> ביטים שמקודדות שני מספרים, <span class="math">\(a,b\)</span>. אם המעגל מחשב את <span class="math">\(c=ab\)</span> אז התוצאה עשויה להיות בת <span class="math">\(2n\)</span> ביטים, ולכן הפלט של המעגל יהיה <span class="math">\(c_{0},c_{1},\dots,c_{2n-1}\)</span>. חוץ מזה יהיו במעגל גם שערים פנימיים עם משתנים נוספים שמתאימים להם, אבל זה פחות קריטי. עכשיו, הביטו בפולינום הבא:</p>
<p><span class="math">\(\sum_{k=0}^{2n-1}2^{k}c_{k}-\left(\sum_{k=0}^{n-1}2^{k}a_{k}\right)\left(\sum_{k=0}^{n-1}2^{k}b_{k}\right)\)</span></p>
<p>הפולינום הזה מקודד בדיוק את הטענה ש-<span class="math">\(c=ab\)</span>, ולכן הבדיקה של "האם המעגל מבצע כפל" היא בדיוק בדיקת שייכות של הפולינום הזה ל-<span class="math">\(I\left(C\right)\)</span>.</p>
<p>אתם עשויים לשאול, כמובן, על מה כל המהומה הזו. האם אין פשוט שיטה אחת וזהו לבצע כפל באמצעות מעגל? ובכן, לא. יש דרכים רבות ושונות ומסובכות שמושפעות מאילוצים שונים ומשונים על המעגל ואני מעדיף לא להיכנס לזה בכלל. סמכו עלי שאפילו השאלה הזו של האם מעגל מבצע כפל יכולה להיות מעניינת. אתם גם עשויים לשאול אם לא פשוט יותר להציב את כל הערכים האפשריים ולבדוק - ובכן, חשבו על כך שערך טיפוסי עבור <span class="math">\(n\)</span> הוא 64, מה שאומר שאין שום סיכוי שנוכל לעבור סדרתית על כל הקלטים האפשריים למעגל.</p>
<p>איך בודקים שייכות של פולינום לאידאל? כשמדובר על חוג פולינומים במספר משתנים מעל שדה, אפשר להראות שלכל אידאל קיים בסיס מיוחד, שנקרא <strong>בסיס גרובנר</strong>, שנותן אלגוריתם שמאפשר לבדוק שייכות של פולינום כלשהו לאידאל, על ידי משהו שמזכיר מעין חילוק ארוך עבור פולינומים במספר משתנים. זה נושא מרתק שראוי לפוסט משל עצמו, ולכן לא אכנס כרגע להגדרות. עבור <span class="math">\(I\left(C\right)\)</span> המדובר כאן קיים בסיס גרובנר פשוט למדי, שכולל את הזהויות הפולינומיות שמתאימות לשערי המעגל - אותן הזהויות שכתבתי למעלה. בנוסף לכך הוא כולל גם פולינומים שהמטרה שלהם היא לומר "הקלט הוא או 0 או 1": הפולינום <span class="math">\(p\left(x\right)=x\left(x-1\right)\)</span> משיג את המטרה הזו - החליפו את <span class="math">\(x\)</span> ב-<span class="math">\(a_{i}\)</span> או <span class="math">\(b_{i}\)</span> כלשהו כדי לקבל את כל הפולינומים מהצורה הזו שמתווספים לבסיס.</p>
<p>המאמר לא נגמר בנקודה הזו; הוא בקושי מתחיל. כל זה הוא רק ההקדמה התיאורטית, שאחריה באה ההסתייגות הרגילה של "אבל גם עם בסיס גרובנר, זו עדיין בעיה קשה חישובית לבדוק שייכות של פולינום לאידאל" ("קשה חישובית" כאן פירושו NP-קשה). בשל הקושי הזה המשך המאמר מתמקד בשיטה שרלוונטית ספציפית לבדיקת מכפילים ומשתמשת בתעלולים שמשפרים את ביצועי החישוב, אבל לא אכנס אליהם כאן. הנקודה המעניינת שרציתי להדגים פה היא האופן שבו חוגים ואידאלים (וספציפית חוגי פולינומים במספר משתנים ובסיס גרובנר) צצים "בשטח", גם במקומות לא לגמרי צפויים.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('expanded');
        }
        
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>