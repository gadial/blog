<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>דיון שאינו חסר תוחלת במשתנים מקריים - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://gadial.net/2010/08/14/random_variables/">
    <meta property="og:title" content="דיון שאינו חסר תוחלת במשתנים מקריים">
    <meta property="og:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta property="og:site_name" content="לא מדויק">
    
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://gadial.net/2010/08/14/random_variables/">
    <meta name="twitter:title" content="דיון שאינו חסר תוחלת במשתנים מקריים">
    <meta name="twitter:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Hamburger menu button */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.8em;
            color: white;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .menu-toggle:hover {
            opacity: 0.8;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .top-nav .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-nav .site-title {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0;
                padding: 10px 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            /* Hide nav links by default on mobile */
            .top-nav .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                margin-top: 10px;
            }
            
            /* Show when expanded */
            .top-nav .nav-links.expanded {
                display: flex;
            }
            
            .top-nav .nav-links > a {
                text-align: center;
                padding: 12px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box {
                width: 100%;
                flex-direction: column;
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box input {
                width: 100%;
                margin-bottom: 5px;
                min-width: 0;
            }
            
            .top-nav .search-box button {
                width: 100%;
            }
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        /* Force KaTeX content to wrap by overriding its internal structure */
        .katex-html {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .base {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .mord,
        .katex .mbin,
        .katex .mrel,
        .katex .mopen,
        .katex .mclose,
        .katex .mpunct,
        .katex .minner {
            display: inline !important;
            white-space: normal !important;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
            
            /* Hide post navigation on mobile */
            .post-navigation {
                display: none;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="site-title">
                <a href="/" style="color: white; text-decoration: none;">לא מדויק</a>
                <button class="menu-toggle" onclick="toggleMobileMenu()" aria-label="תפריט">
                    ☰
                </button>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2010/08/10/breaking_news_p_vs_np_proof/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">הוכחה ש-P שונה מ-NP?</span>
            </a>
            

            
            <a href="/2010/08/15/p_vs_np_overview/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">אז מה זה עניין P=NP, בעצם?</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>דיון שאינו חסר תוחלת במשתנים מקריים</h1>
            <div class="post-meta">
                <span class="date">2010-08-14</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/הסתברות.html">הסתברות</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/התפלגות בינומית.html">התפלגות בינומית</a>
                    
                    <a href="/tags/משתנים מקריים.html">משתנים מקריים</a>
                    
                    <a href="/tags/מתמטיקה תיכונית.html">מתמטיקה תיכונית</a>
                    
                    <a href="/tags/תוחלת.html">תוחלת</a>
                    
                    <a href="/tags/תורת ההסתברות.html">תורת ההסתברות</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>בואו נדבר על כסף. רולטה. נניח שאני מהמר בשיטת כך-וכך, בכמה אני זוכה? מכיוון שרולטה היא עסק הסתברותי ובכל משחק אני זוכה או מפסיד משהו שונה, עדיף לשאול שאלה יותר מדוייקת - בכמה <strong>בממוצע</strong> אני זוכה? נניח שאני משחק אלף סיבובים ומרוויח בסך הכל אלף ש"ח, אפשר לומר שבממוצע, זכיתי בש"ח אחד לסיבוב (אפילו אם מה שקרה בפועל הוא שבכל סיבוב הרווחתי מאה ש"ח או הפסדתי מאה ש"ח).</p>
<p>שאלות מהסוג הזה מעבירות אותנו לשלב הבא ב<a href="http://www.gadial.net/2010/07/29/probability_intro/">דיון שלנו</a> <a href="http://www.gadial.net/2010/08/05/conditional_probability/">על הסתברות</a>, ונותנות לנו מוטיבציה להכנסה של מה שהוא אולי המושג המרכזי בהסתברות - המשתנה המקרי. הרעיון במשתנים מקריים הוא להוסיף לנו רמת אבסטרקציה "מעל" מרחב המדגם שמאפשרת לנו לשאול בנוחות שאלות יותר כלליות מאשר "מה הייתה תוצאת ההגרלה?". הדרך הפשוטה ביותר להסביר זאת היא באמצעות דוגמת הרולטה: בהימור רולטה מרחב המדגם שלנו הוא פשוט יחסית - יש 38 (או 37, תלוי ברולטה) תוצאות אפשריות, וכולן (תיאורטית) שוות הסתברות. לעומת זאת, הסכום שבו אני זוכה (או מפסיד) בסיבוב של הימור הוא כבר מספר שונה לגמרי, שמחושב בצורה מתוחכמת למדי מתוך תוצאת הרולטה (ותלוי, כמובן, גם באופן שבו אני מהמר). לא אכנס כאן לחוקי הזכייה המדוייקים כי אני בכלל לא יודע אותם; אבל לצורך פשטות אפשר להניח משהו מפגר כזה - שאם התקבל ברולטה מספר זוגי אני זוכה ב-5 ש"ח, ואם התקבל מספר אי זוגי אני מפסיד 5 ש"ח.</p>
<p>כעת אפשר למדל את הסיטואציה באופן הסתברותי על ידי <strong>שינוי</strong> של מרחב המדגם - במקום לדבר על מרחב המדגם של הרולטה נדבר על מרחב מדגם פשוט יותר, שאבריו הם הזכיות האפשריות שלי, ו-<span class="math">\(5\)</span> הוא בעל הסתברות חצי בו, וגם <span class="math">\(-5\)</span> הוא בעל הסתברות חצי בו, וחסל; אלא ששיטת עבודה שכזו, של שינוי מרחב המדגם, היא מסורבלת למדי באופן כללי, ובעייתית מאוד אם אנחנו רוצים לשאול שאלות מורכבות יותר - למשל, "בהינתן שבהטלת שתי קוביות סכום ערכי הקוביות הוא זוגי, מה ההסתברות שגם מכפלתן זוגית?". לכן משתלם להוסיף למשחק את המושג הפשוט של משתנה מקרי. פורמלית, משתנה מקרי הוא פשוט פונקציה ממרחב המדגם אל המספרים הממשיים (כמובן שאפשר גם יותר מכך אבל אני לא נכנס לזה פה), שמייצגת את ה"ערך" של כל תוצאה אפשרית. מסמנים משתנים מקריים לרוב באותיות לטיניות גדולות, ובפרט ב-<span class="math">\(X\)</span>. אפשר לחשוב על משתנה מקרי כאילו הוא מקבל ערכים באופן הבא: ראשית מבצעים את ההגרלה הבסיסית של מרחב המדגם, ולאחר מכן מחשבים את הפונקציה על תוצאת ההגרלה, וזהו ערכו של <span class="math">\(X\)</span>. לכן השאלה הבסיסית שאפשר לשאול על משתנה מקרי הוא "באיזו הסתברות אתה מקבל את הערך הזה והזה?". אנחנו נסמן <span class="math">\(\text{P}\left(X=a\right)\)</span> בתור ההסתברות ש-<span class="math">\(X\)</span> קיבל את הערך <span class="math">\(a\)</span>. זה כל הבסיס ההגדרתי שאנחנו צריכים כאן.</p>
<p>בואו ניקח דוגמה פשוטה. נניח שאנחנו מטילים שתי קוביות משחק רגילות, ומגדירים משתנה מקרי <span class="math">\(X\)</span> בתור סכומן. מה ההסתברויות לערכים שונים ומשונים ש-<span class="math">\(X\)</span> עשוי לקבל? ברור, למשל, ש-<span class="math">\(\text{\text{P}}\left(X=1\right)=0\)</span> כי הסכום הוא בין 2 ל-12 (ולכן בעצם <span class="math">\(\text{P}\left(X=a\right)=0\)</span> לכל <span class="math">\(a\)</span> שאינו מספר טבעי בין 2 ל-12). כדי לדעת את ההסתברויות לערכים אחרים, כדאי לחשוב קצת על מרחב המדגם שלנו - הוא כולל את כל הזוגות מהצורה <span class="math">\(\left(a,b\right)\)</span> כאשר <span class="math">\(a,b\)</span> בין 1 ל-6. סך הכל ישנם <span class="math">\(6\cdot6=36\)</span> זוגות אפשריים (עקרון הכפל הקומבינטורי). מכיוון שכל זוג הוא שווה-הסתברות, ההסתברות שלו הוא <span class="math">\(\frac{1}{36}\)</span> (עקרון ה"הסתברות במרחב סופי היא אחד חלקי קומבי") ולכן כדי לדעת מה ההסתברות לקבל <span class="math">\(5\)</span>, למשל, צריך לספור את כל הזוגות שנותנים בדיוק 5. זוגות אלו הם <span class="math">\(\left(1,4\right),\left(2,3\right),\left(3,2\right)\left(4,1\right)\)</span>; שימו לב שיש חשיבות לסדר ו-<span class="math">\(\left(1,4\right)\)</span> ו-<span class="math">\(\left(4,1\right)\)</span> הם זוגות שונים (כי הראשון אומר "בהטלה הראשונה קיבלנו 1 ובשנייה 4" והשני אומר "בהטלה הראשונה קיבלנו 4 ובשנייה 1"). לכן ההסתברות לקבל 5 היא <span class="math">\(\frac{4}{36}=\frac{1}{9}\)</span>. את אותו חישוב אפשר לעשות לכל מספר; לא קשה לראות שההסתברות הגדולה ביותר היא לקבל 7, והיא <span class="math">\(\frac{6}{36}=\frac{1}{6}\)</span> ואת ההסתברות הנמוכה ביותר חולקים 2 ו-12, עם הסתברות של <span class="math">\(\frac{1}{36}\)</span>. בקיצור, המשתנה האקראי הזה מקבל ערכים בהסתברויות מאוד לא אחידות, למרות שמרחב המדגם המקורי היה מאוד אחיד. אני רוצה להכניס כאן לשימוש מילה חדשה - <strong>התפלגות</strong>; התפלגות של משתנה מקרי היא בסך הכל שם מקוצר ל"הערכים שהמשתנה המקרי עשוי לקבל וההסתברויות שבהם הוא עשוי לקבל אותן". אז במקרה הזה אני יכול לומר שהתפלגותו של <span class="math">\(X\)</span> היא מאוד לא אחידה.</p>
<p>הבה נעבור למשתנה מקרי מעניין יותר וחשוב הרבה יותר. נניח שאנחנו מטילים מטבע <span class="math">\(n\)</span> פעמים, אבל לא מדובר על מטבע הוגנת בהכרח - ההסתברות שהיא תיפול על "עץ" היא בדיוק <span class="math">\(p\)</span>, כאשר <span class="math">\(0\le p\le1\)</span>. מה ההסתברות שהמטבע תיפול <strong>בדיוק</strong> <span class="math">\(k\)</span> פעמים על עץ? כדי למדל את השאלה הזו אנו מגדירים משתנה מקרי <span class="math">\(X\)</span> ש"סופר" את מספר ההטלות שבהן התקבל עץ בהטלה, והשאלה שלנו היא מהו <span class="math">\(\text{P}\left(X=k\right)\)</span> לכל <span class="math">\(0\le k\le n\)</span> טבעי (ברור שלערכים אחרים ההסתברות היא 0 - מדוע?)</p>
<p>מפתה לומר עכשיו משהו בסגנון "ההסתברות ש-<span class="math">\(X\)</span> ייפול על עץ היא <span class="math">\(p\)</span>, אז מעקרון הכפל עולה שההסתברות שהוא ייפול על עץ בדיוק <span class="math">\(k\)</span> פעמים היא <span class="math">\(p^{k}\)</span>". זו חשיבה בכיוון הנכון, אבל היא שגויה כי היא מתעלמת מגורם נוסף - <span class="math">\(n\)</span>, שהוזכר בתנאי השאלה ומאוד לא סביר שלא ישפיע כלל על הפתרון (זו דרך חשיבה נכונה לחיים באופן כללי - אם פתרתם תרגיל מבלי להשתמש בכל הנתונים, זה מצריך חשיבה נוספת - אם כי, כמובן, לפעמים באמת לא צריך את כל הנתונים והעובדה שהתוצאה אינה תלויה בנתון מסויים שעל פניו נראה הכרחי היא יפה). העניין הוא בכך שאנחנו רוצים שהמטבע יפול על עץ <strong>בדיוק</strong> <span class="math">\(k\)</span> פעמים; ב-<span class="math">\(n-k\)</span> ההטלות הנותרות אנחנו רוצים לקבל פלי. ההסתברות לקבל פלי היא <span class="math">\(1-p\)</span> (כי מקבלים או עץ או פלי, וסכום ההסתברויות לקבלת שניהם יחד צריך להיות 1), ולכן ההסתברות לקבל <span class="math">\(k\)</span> פעמים עץ וביתר הפעמים פלי היא <span class="math">\(p^{k}\left(1-p\right)^{n-k}\)</span>. כדי לפשט טיפה את הסימון נהוג להגדיר <span class="math">\(q=1-p\)</span> ואז אפשר לכתוב את ההסתברות הזו בתור <span class="math">\(p^{k}q^{n-k}\)</span>.</p>
<p>אבל רגע, גם זה לא נכון! כי שוב, התעלמנו כאן ממשהו. הדרך הטובה לראות זאת היא לבדוק מקרים פרטיים קטנים. נניח ש-<span class="math">\(n=2\)</span> ו-<span class="math">\(k=1\)</span> והמטבע הוגן, כלומר <span class="math">\(p=\frac{1}{2}\)</span>. אז הצבה בנוסחה נותנת לנו <span class="math">\(\left(\frac{1}{2}\right)^{1}\cdot\left(\frac{1}{2}\right)^{1}=\frac{1}{4}\)</span>, כלומר שההסתברות לקבל עץ באחת משתי הטלות היא רבע. אבל בואו נכתוב רגע את מרחב המדגם באופן מפורש, כש-1 הוא תוצאה של עץ ו-0 היא תוצאה של פלי: <span class="math">\(\left\{ \left(0,0\right),\left(1,0\right),\left(0,1\right),\left(1,1\right)\right\} \)</span>. קל לראות שבדיוק בשתיים מארבע התוצאות מקבלים פעם אחת עץ, כלומר ההסתברות צריכה להיות חצי. מה השתבש?</p>
<p>מה שקרה הוא שהתעלמנו מכך שעץ יכול להתקבל פעם אחת <strong>בכמה אופנים שונים</strong>. במקרה הפשוט שלנו, אפשר לקבל פעם אחת עץ בהטלה הראשונה (ואז בשניה יהיה פלי), או שאפשר לקבל עץ פעם אחת בהטלה השניה (ואז בראשונה יהיה פלי). זה לא בא לידי ביטוי בספירה שלנו. באופן כללי, התשובה <span class="math">\(p^{k}q^{n-k}\)</span> איננה התשובה הנכונה לשאלה "מה ההסתברות שעץ יתקבל בדיוק <span class="math">\(k\)</span> פעמים" אלא לשאלה "מה ההסתברות שעץ יתקבל בדיוק ב-<span class="math">\(k\)</span> המקומות הספציפיים הבאים...". למשל, מה ההסתברות שעץ יתקבל בדיוק ב-<span class="math">\(k\)</span> ההטלות הראשונות, או ב-<span class="math">\(k\)</span> ההטלות האחרונות, וכדומה. לכל בחירה אפשרית של <span class="math">\(k\)</span> מקומות שבהם יתקבל עץ, ההסתברות שדווקא הסיטואציה הזו תתקיים היא <span class="math">\(p^{k}q^{n-k}\)</span>; אבל יש הרבה בחירות אפשריות כאלו. כמה יש? ובכן, כשדיברנו על קומבינטוריקה כיסינו בדיוק את השאלה הזו - יש <span class="math">\({n \choose k}\)</span> בחירות אפשריות שכאלו, ולכן <span class="math">\(\text{P}\left(X=k\right)={n \choose k}p^{k}q^{n-k}\)</span>. נראה מוכר? אכן, <span class="math">\({n \choose k}p^{k}q^{n-k}\)</span> היה בדיוק האיבר הכללי בנוסחת <a href="http://www.gadial.net/2010/06/22/newton_binom/">הבינום של ניוטון</a>; ולכן ההתפלגות של <span class="math">\(X\)</span> שלנו מכונה "התפלגות בינומית". מכיוון שההתפלגות הבינומית תלויה בשני ערכים - מספר החזרות <span class="math">\(n\)</span> וההסתברות להצלחה בכל חזרה <span class="math">\(p\)</span>, נהוג לכתוב <span class="math">\(X\sim\text{Bin}\left(n,p\right)\)</span> (קרי: "<span class="math">\(X\)</span> מתפלג בינומית עם פרמטרים <span class="math">\(n,p\)</span>") כדי לתאר באופן מקוצר את ההתפלגות הזו.</p>
<p>בדיקת השפיות שיש לעשות לאחר חישוב התפלגות של משתנה מקרי כלשהי היא לסכום את הסתברות כל הערכים ש-<span class="math">\(X\)</span> יכול לקבל ולוודא שקיבלנו 1. במקרה שלנו, פירוש הדבר הוא לבדוק שהסכום <span class="math">\(\sum_{k=0}^{n}{n \choose k}p^{k}q^{n-k}\)</span> הוא 1. כאן נחלץ הבינום של ניוטון לעזרתנו - הסכום הזה שווה, על פי הבינום של ניוטון, ל-<span class="math">\(\left(p+q\right)^{n}\)</span>; אבל <span class="math">\(p+q=1\)</span> ולכן הסכום אכן שווה ל-1, כנדרש. שימו לב שכאן אנחנו משתמשים בנוסחת הבינום בכיוון שהוא לכאורה ההפוך - במקום "לפתוח" את הסוגריים אנחנו דווקא מצמצמים סכום "אל תוך" הסוגריים. זה שימוש שיותר נדיר לראות כשאתה תיכוניסט ופותר תרגילים טכניים, אבל הוא כנראה יותר נפוץ בעולם המתמטי האמיתי.</p>
<p>בואו נעבור עכשיו לשאלה של תחילת הפוסט - מהו "הערך הממוצע" שמקבל משתנה מקרי. הערך הזה מכונה <strong>תוחלת</strong>, ונהוג לסמן אותו ב-<span class="math">\(\text{E}\left[X\right]\)</span> (E מהמילה Expectation). כדי לראות איך מחשבים אותו, בואו ונתבונן בדוגמה פשוטה - שוב הטלת מטבע עם הסתברות <span class="math">\(p\)</span> לקבלת עץ. נניח שכשיוצא עץ אנחנו מרוויחים 2 ש"ח, וכשיוצא פלי אנחנו מפסידים 3 ש"ח - עבור איזו הסתברות <span class="math">\(p\)</span> נוכל בממוצע להרוויח? די ברור ש-<span class="math">\(p\)</span> צריך להיות גדול מחצי כי המשחק אינו הוגן, אבל כמה?</p>
<p>בואו נניח שאנחנו משחקים <span class="math">\(n\)</span> משחקים, ומתוכם ב-<span class="math">\(a\)</span> משחקים קיבלנו עץ, וב-<span class="math">\(b\)</span> משחקים קיבלנו פלי. אז הרווח הממוצע שלנו הוא <span class="math">\(\frac{2a-3b}{n}\)</span> - זהו בעצם <strong>ממוצע משוקלל</strong> שבו המשקולת של התוצאה <span class="math">\(2\)</span> היא מספר הפעמים הצפוי שהיא תצוץ בו, וכך עבור התוצאה <span class="math">\(-3\)</span>. את הממוצע המשוקלל הזה אפשר לכתוב גם כ-<span class="math">\(2\frac{a}{n}-3\frac{b}{n}\)</span>. ככל ש-<span class="math">\(n\)</span> גדול יותר כך אנו מצפים שהערכים <span class="math">\(\frac{a}{n}\)</span> ו-<span class="math">\(\frac{b}{n}\)</span> ילכו ויתייצבו - אנו מצפים ש-<span class="math">\(\frac{a}{n}\)</span> יישאף ל-<span class="math">\(p\)</span> (ולכן ש-<span class="math">\(\frac{b}{n}\)</span> יישאף ל-<span class="math">\(q\)</span>). זהו כמובן נפנוף ידיים, אבל חשוב לזכור שאי אפשר להוכיח מתמטית את הטענה הזו, שהיא בסופו של דבר טענה אמפירית, ואפילו הגדרתית; הרי איך אנחנו מפרשים את "ההסתברות שהאירוע יקרה היא <span class="math">\(p\)</span>" אם לא בתור "כשנחזור על אותו ניסוי מספר רב של פעמים הפרופורציה של הפעמים שבהן נקבל את התוצאה הזו תשאף ל-<span class="math">\(p\)</span>"? (ובכן, כן, יש דרכים שונות לגשת לכך, אבל זה כבר עניין לפוסט נפרד).</p>
<p>אם כן, הרווח הממוצע שלנו שואף ל-<span class="math">\(p\cdot2+q\cdot\left(-3\right)\)</span>. ושוב, הדרך הנכונה לחשוב על כך היא כעל שקלול של הערכים האפשריים ש-<span class="math">\(X\)</span> יכול לקבל, כשהמשקולת של כל ערך היא ההסתברות שנקבל אותו. אם נציב <span class="math">\(q=1-p\)</span> נקבל <span class="math">\(\text{E}\left[X\right]=2p-3\left(1-p\right)=5p-3\)</span>, ולכן כאשר <span class="math">\(p=\frac{3}{5}\)</span> התוחלת היא אפס (כלומר, אנחנו לא מצפים לא להרוויח ולא להפסיד מהמשחק בטווח הארוך) וכמובן שעבור ערכי <span class="math">\(p\)</span> גדולים יותר היא תהיה חיובית.</p>
<p>באופן יותר כללי ופורמלי התוחלת מוגדרת כך: <span class="math">\(\text{E}\left[X\right]=\sum a\cdot\text{P}\left[X=a\right]\)</span>, כשהסכום נלקח על פני כל הערכים <span class="math">\(a\)</span> שהמשתנה <span class="math">\(X\)</span> בכלל יכול לקבל. אתם עשויים לשאול מה יקרה אם <span class="math">\(X\)</span> יכול לקבל אינסוף ערכים שונים; במקרה זה אכן מקבלים סכום אינסופי וצריך לטפל בו בכלים המתאימים לסכומים אינסופיים - חומר שחורג ממה שנלמד בתיכון, אך הוא סטנדרטי למדי במתמטיקה אוניברסיטאית.</p>
<p>לעת עתה, הבה ונבצע חישוב שהוא סופי, אך גם כן אינו פשוט לגמרי - נניח כי <span class="math">\(X\sim\text{Bin}\left(n,p\right)\)</span>, מהי <span class="math">\(\text{E}\left[X\right]\)</span>? הבה ונבצע את החישוב באופן ישיר, על פי ההגדרה: <span class="math">\(\text{E}\left[X\right]=\sum_{k=0}^{n}k\cdot{n \choose k}p^{k}q^{n-k}\)</span>. אוי ווי. מבט אחד בסכום ובא לבכות. איך בכל זאת מטפלים בסכומים כאלו? ובכן, יש תעלולים שמשתמשים בחשבון דיפרנציאלי בסיסי ומאפשרים לחשב אותו במדוייק, אך זה דורש פוסט משל עצמו ואני מעדיף לא להיכנס לכך כעת. במקום זאת אציג גישה שונה לגמרי לחישוב התוחלת, שתהפוך את פתרון השאלה הזו לטריוויאלי, ובתקווה תתחיל להמחיש עד כמה הדיבורים על משתנים מקריים מועילים לנו.</p>
<p>בואו נדבר לרגע על בעיה שלכאורה בלתי קשורה בעליל לבעיה שלנו - נניח שיש לנו מרחב הסתברות ומעליו אנו מגדירים שני משתנים מקריים שונים <span class="math">\(X,Y\)</span> (למשל - <span class="math">\(X\)</span> הוא סכום הערכים בהטלת שתי קוביות ו-<span class="math">\(Y\)</span> הוא מכפלתם). כעת אנו מסוגלים להגדיר באמצעותם משתנים מקריים נוספים, למשל <span class="math">\(Z=X+Y\)</span>. האם ניתן לתאר את <span class="math">\(\text{E}\left[Z\right]\)</span> באופן פשוט באמצעות <span class="math">\(\text{E}\left[X\right]\)</span> ו-<span class="math">\(\text{E}\left[Y\right]\)</span>? למשל, האם אפשר לקוות למשוואה יפה כמו <span class="math">\(\text{E}\left[Z\right]=\text{E}\left[X\right]+\text{E}\left[Y\right]\)</span>? התשובה חיובית. למעשה, למרות שזה אולי לא נראה כך, זו תשובה מפתיעה למדי למי שכבר השתפשף קצת, שכן היא נכונה בלי קשר לשאלה האם יש תלות בין <span class="math">\(X,Y\)</span> או אין. איכשהו אנחנו מצליחים לחשב את תוחלת <span class="math">\(Z\)</span> על ידי הסתכלות על <span class="math">\(X\)</span> ו-<span class="math">\(Y\)</span> <strong>בנפרד</strong>, למרות שכל ערך ש-<span class="math">\(Z\)</span> מקבל תלוי בתוצאה של שניהם <strong>יחד</strong> (עם זאת, לעתים התלות כן חשובה - למשל, <span class="math">\(\text{E}\left[XY\right]=\text{E}\left[X\right]\text{E}\left[Y\right]\)</span> לא מתקיים תמיד, אבל כן מתקיים בודאות אם הם בלתי תלויים). ההוכחה של הטענה הזו אינה כה קשה אך היא דורשת הכנסת עוד מושג אחד לתמונה (התפלגות משותפת של משתנים מקריים) ולא אכנס לכך כעת.</p>
<p>כעת הבה ונסתכל על המשתנה הבינומי באופן קצת שונה. נגדיר משתנים <span class="math">\(X_{1},X_{2},\dots,X_{n}\)</span> כך ש-<span class="math">\(X_{k}\)</span> הוא המשתנה שמקבל 1 אם בהטלת המטבע ה-<span class="math">\(k\)</span>-ית התקבל עץ, ו-0 אם התקבל פלי. למשתנה כזה, שמקבל או 0 או 1, קוראים "אינדיקטור", ואחד היתרונות שבו הוא שחישוב התוחלת שלו טריוויאלי: על פי הגדרה, <span class="math">\(\text{E}\left[X_{i}\right]=p\cdot1+q\cdot0=p\)</span>, כלומר התוחלת של אינדיקטור שווה להסתברות שהוא יקבל 1.</p>
<p>כעת, <span class="math">\(X=\sum_{k=0}^{n}X_{k}\)</span> - לכל סדרת הטלות במרחב המדגם, מספר ההטלות שבהן התקבל עץ באותה סדרה שווה למספר האינדיקטורים שקיבלו 1 עבור סדרה זו. על פי נוסחת התוחלת שלמעלה (שניתנה עבור שני משתנים אבל נכונה באותה המידה גם עבור <span class="math">\(n\)</span> או כל סכום סופי אחר של משתנים), החישוב הוא כעת טריוויאלי:</p>
<p><span class="math">\(\text{E}\left[X\right]=\text{E}\left[\sum_{k=0}^{n}X_{k}\right]=\sum_{k=0}^{n}\text{E}\left[X_{k}\right]=\sum_{k=0}^{n}p=np\)</span></p>
<p>וזוהי אכן התוחלת של משתנה שמתפלג בינומית עם פרמטרים <span class="math">\(n,p\)</span> - וגם אינטואיטיבית תוצאה זו די ברורה (אם למשל <span class="math">\(p=\frac{1}{2}\)</span>, אנחנו מצפים שבערך בחצי מההטלות נקבל עץ, כלומר ב-<span class="math">\(n\cdot\frac{1}{2}\)</span>). עם זאת, ברור שהחישוב שנתתי כעת קל מהחישוב הטכני שהיינו צריכים לבצע אם היינו משתמשים ישירות בהגדרה. כמו שאוהבים לומר, מתמטיקאים הם עצלנים, ולכן התוצאות התיאורטיות שהם מוכיחים נועדות (לפעמים...) לעשות את החישובים המעצבנים לקלים יותר.</p>
<p>נו, תשאלו בעצבנות, אז מה עם הרולטה? בכמה בממוצע אני זוכה אם אני משחק ברולטה? ובכן, אין לי מושג - זה סתם חישובים טכניים מעצבנים. אבל אני יכול להבטיח לכם שבשורה התחתונה, אתם מפסידים. הקזינו לא טמבל.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('expanded');
        }
        
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>