<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>הפוסט שיודע להדפיס את עצמו - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .top-nav .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-nav .site-title {
                text-align: center;
                margin-bottom: 10px;
            }
            
            .top-nav .nav-links {
                flex-direction: column;
                width: 100%;
            }
            
            .top-nav .nav-links a {
                text-align: center;
                padding: 8px;
            }
            
            .top-nav .search-box {
                width: 100%;
                flex-direction: column;
            }
            
            .top-nav .search-box input {
                width: 100%;
                margin-bottom: 5px;
                min-width: 0;
            }
            
            .top-nav .search-box button {
                width: 100%;
            }
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2009/11/04/01_graph_law_proof/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">כלל ה-0-1 של גרפים - ההוכחה</span>
            </a>
            

            
            <a href="/2009/11/30/zug_o_pered/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">זוג או פרד (כן, עם ד’!)</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>הפוסט שיודע להדפיס את עצמו</h1>
            <div class="post-meta">
                <span class="date">2009-11-27</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/חישוביות.html">חישוביות</a>
                    
                    <a href="/categories/תכנות.html">תכנות</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/הפניה עצמית.html">הפניה עצמית</a>
                    
                    <a href="/tags/חישוביות.html">חישוביות</a>
                    
                    <a href="/tags/רובי.html">רובי</a>
                    
                    <a href="/tags/תכנות.html">תכנות</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>הפניה עצמית היא אחד מהרעיונות שטבועים עמוק בלב <a href="http://he.wikipedia.org/wiki/%D7%97%D7%99%D7%A9%D7%95%D7%91%D7%99%D7%95%D7%AA">תורת החישוביות</a> ו<a href="http://he.wikipedia.org/wiki/%D7%9C%D7%95%D7%92%D7%99%D7%A7%D7%94_%D7%9E%D7%AA%D7%9E%D7%98%D7%99%D7%AA">הלוגיקה המתמטית</a>. היא מה שעומד בבסיס <a href="http://he.wikipedia.org/wiki/%D7%9E%D7%A9%D7%A4%D7%98%D7%99_%D7%94%D7%90%D7%99_%D7%A9%D7%9C%D7%9E%D7%95%D7%AA_%D7%A9%D7%9C_%D7%92%D7%93%D7%9C">משפטי אי השלמות של גדל</a> והוכחת אי כריעות <a href="http://he.wikipedia.org/wiki/%D7%91%D7%A2%D7%99%D7%99%D7%AA_%D7%94%D7%A2%D7%A6%D7%99%D7%A8%D7%94">בעיית העצירה</a>. זה מעלה את השאלה עד כמה ניתן להכליל את השיטה הזו. האם מודל חישובי - לצורך העניין מכונת טיורינג, אבל אפשר גם תוכנית מחשב - מסוגל להשתמש בייצוג של עצמו באופן ישיר? האם תוכנית יכולה להשתמש ישירות בקוד שלה? ואם נפשט, האם תוכנית מחשב יכולה לעשות דבר מה פשוט כמו הדפסת הקוד שלה עצמה?כיום השאלה הזו נראית די טיפשית. יש <a href="http://en.wikipedia.org/wiki/RepRap_Project">מדפסות תלת ממדיות</a> שיודעות לייצר עותק מושלם של עצמן, אז מהי תוכנית מחשב בהשוואה לכך? אך בזמן שתורת החישוביות הייתה עוד צעירה והתוצאה הזו הוכחה לראשונה, עוד לא היו דברים כאלו. הבה ננסה לשכוח שניה ממה שאנחנו יודעים ולחשוב מה הבעיה העקרונית כאן. איך גורמים לתוכנית מחשב להדפיס את הקוד של עצמה? כמובן, אפשר לבחור בגישה ה"רמאית" ולהגיד "התוכנית תפתח את הקובץ שבו שמור הקוד שלה ותדפיס אותו", אלא שאנחנו לא רוצים להסתמך על עזרים חיצוניים שכאלו, ולכן אנחנו מתמקדים בשאלה הקונקרטית על <a href="http://he.wikipedia.org/wiki/%D7%9E%D7%9B%D7%95%D7%A0%D7%AA_%D7%98%D7%99%D7%95%D7%A8%D7%99%D7%A0%D7%92">מכונת טיורינג</a>, שלא מסוגלת לעשות תעלולים שכאלו. אבל באותה מידה ניתן לשאול האם ניתן לכתוב תוכנית מחשב שאיכשהו מסוגלת להדפיס את הקוד שלה עצמה בלי גישה לקבצים ובלי שום דבר דומה (כשה"קופסה השחורה" היחידה שבה היא פונקצית ההדפסה). תוכניות מחשב שכאלו, שמדפיסות את עצמן, נקראות באופן כללי <a href="http://en.wikipedia.org/wiki/Quine_%28computing%29">quine</a> (על שם לוגיקאי אמריקאי שחיבב מאוד הפניות עצמיות).</p>
<p>אם תנסו לכתוב תוכנית שכזו תגלו שזו משימה מעט טריקית. אתמקד בכתיבה בשפת התכנות <a href="http://he.wikipedia.org/wiki/Ruby">רובי</a>, שבה הכל יוצא "נקי" יחסית; פונקצית ההדפסה הסטנדרטית בשפה זו היא print. אם כן, נניח שאני רוצה לכתוב תוכנית שמדפיסה את עצמה ואני נוקט בגישה נאיבית, אז התוכנית שלי תהיה מהצורה "..." print, כאשר שלוש הנקודות בתוך המרכאות מייצגות את מה שאני רוצה להדפיס - במקרה זה, קוד התוכנית עצמה. הקוד של התוכנית מתחיל ב-print ולכן התוכנית תהיה חייבת להיות מהצורה ""..." print "print, אלא שכעת <strong>שיניתי</strong> את קוד התוכנית, ולכן מה שמקבלת פקודת ה-print חייב לגדול שוב, ושוב, ושוב - ולעולם לא אצא מזה. כלומר, הגישה הנאיבית נכשלת כשלון חרוץ. למי שעדיין לא הבין מה לעזאזל השתבש - פשוט נסו לכתוב את התוכנית בעצמם, זה ייתן מייד את התחושה (אין צורך לדעת לתכנת - מספיק להכיר את פקודת print ותו לא).</p>
<p>מכונות טיורינג סובלות מאותה הבעיה. כל מכונת טיורינג ניתן לקודד בתור מחרוזת, אבל אם ננסה לגרום למכונה לכתוב את המחרוזת הזו על הסרט שלה, הדרך הנאיבית לעשות זאת תכלול הרחבה מהותית של הקידוד של המכונה - ולכן גם שינוי של המחרוזת שמייצגת אותה. אנחנו חייבים לנקוט פה בגישה עקיפה לפני שיהיה לנו את קוד התוכנית "ביד". התעלול שבו נשתמש הוא פשוט ומקסים, וגם כללי מאוד באופיו - ניתן להשתמש באותו רעיון כדי לכתוב בקלות תוכנית מחשב פרקטית שמדפיסה את הקוד של עצמה.</p>
<p>תזכורת קצרצרה למהי מכונת טיורינג - תחשבו עליה כעל מחשב פרימיטיבי שבמקום זכרון יש לו "סרט" שניתן לכתיבה וקריאה. זה בערך כל מה שצריך לדעת עליהן בהקשר הנוכחי. בתוכניות "אמיתיות" את הסרט הזה מחליפים משתנים.</p>
<p>הרעיון הוא לבנות מכונה שמורכבת משתי "תת מכונות", <span class="math">\(A,B\)</span>, כך ש-<span class="math">\(A\)</span> עושה משהו ואז עוצרת, והשליטה עוברת ל-<span class="math">\(B\)</span> שגם כן עושה משהו ועוצרת, ואחרי שהיא עוצרת על הסרט יהיה כתוב הקידוד של <span class="math">\(A\)</span> ולאחר מכן הקידוד של <span class="math">\(B\)</span>, מה שאסמן בתור <span class="math">\(\left\langle AB\right\rangle \)</span>. על פניו אני קצת מרמה כאן טכנית - בהגדרות מקובלות של קידודי מכונות טיורינג לא מרשים "פירוק" כזה של מכונה לשתי תת מכונות. אלא שאין בעיה עם הגדרה שכן מרשה "פירוק" שכזה; וכפי שנראה בהמשך, ההנחה אפילו לא הכרחית, רק מפשטת את ההבנה של הבניה.</p>
<p>אם כן, מה <span class="math">\(A\)</span> תעשה? פשוט מאוד - תכתוב את הקידוד של <span class="math">\(B\)</span> (כלומר, <span class="math">\(\left\langle B\right\rangle \)</span>) על הסרט ואז תעצור. אבל רגע, מאיפה <span class="math">\(A\)</span> יודעת מה הקידוד של <span class="math">\(B\)</span>? עדיין לא אמרנו מהי <span class="math">\(B\)</span> בכלל! אם כן, עלינו להגדיר את <span class="math">\(B\)</span> במדוייק, אבל להיות מאוד זהירים כשנעשה זאת; אם <span class="math">\(B\)</span> תהיה תלויה באופן כלשהו ב-<span class="math">\(A\)</span>, תהיה לנו כאן תלות מעגלית (הקוד של <span class="math">\(B\)</span> תלוי ב-<span class="math">\(A\)</span>, אבל מכיוון ש-<span class="math">\(A\)</span> מדפיסה את הקוד של <span class="math">\(B\)</span>, בוודאי שהקוד של <span class="math">\(A\)</span> תלוי ב-<span class="math">\(B\)</span>!). לכן נגדיר את <span class="math">\(B\)</span> בלי לדבר בכלל על <span class="math">\(A\)</span>.</p>
<p>כש-<span class="math">\(B\)</span> "מתעוררת" כתוב קלט כלשהו על הסרט. נקרא לו <span class="math">\(w\)</span>. מה שב-<span class="math">\(B\)</span> תעשה יהיה לבנות קידוד של מכונה שכל ייעודה בחיים הוא לכתוב את <span class="math">\(w\)</span> על הסרט ולעצור. זה רעיון מעט מחוכם, אבל לא קשה במיוחד. נסו לחשוב האם אתם יכולים, בהינתן קלט <span class="math">\(w\)</span> כלשהו, לכתוב תוכנית מחשב שכל מה שהיא עושה הוא לכתוב <span class="math">\(w\)</span> ולעצור; ואם כן, האם אתם מסוגלים לכתוב פונקציה שמקבלת <span class="math">\(w\)</span> כקלט ומוציאה כפלט קוד של תוכנית מחשב שמדפיסה את <span class="math">\(w\)</span>?</p>
<p>אם כן, נסמן ב-<span class="math">\(M_{w}\)</span> מכונת טיורינג שמה שהיא עושה הוא לכתוב <span class="math">\(w\)</span> על הסרט ולעצור. אז מה ש-<span class="math">\(B\)</span> עושה הוא לבנות את <span class="math">\(\left\langle M_{w}\right\rangle \)</span> ולכתוב אותו ליד הקלט <span class="math">\(w\)</span> הקיים, כלומר בסופה של ריצת <span class="math">\(B\)</span> יהיה כתוב על הסרט <span class="math">\(\left\langle M_{w}\right\rangle w\)</span>. כדי להיות עוד יותר מדוייקים נדבר ממש על פונקציה, <span class="math">\(q\)</span>, שמקבלת כקלט <span class="math">\(w\)</span> ומוציאה כפלט קידוד של <span class="math">\(M_{w}\)</span> ספציפית (שהרי יש הרבה מכונות שונות שכותבות <span class="math">\(w\)</span> על הסרט ועוצרות).</p>
<p>תיארנו את <span class="math">\(B\)</span> בלי להזדקק ל-<span class="math">\(A\)</span>, ולכן אין בעיה לכתוב מכונה <span class="math">\(A\)</span> שכל מה שהיא עושה בחיים הוא לכתוב <span class="math">\(\left\langle B\right\rangle \)</span> על הסרט ולעצור. כאן מגיע הפאנץ': אפשר בתור <span class="math">\(A\)</span> לבחור את המכונה שהקידוד שלה הוא <span class="math">\(q\left(\left\langle B\right\rangle \right)=\left\langle M_{\left\langle B\right\rangle }\right\rangle\)</span>! כלומר, את המכונה שאת הקידוד שלה הפונקציה <span class="math">\(q\)</span> מחזירה. האם אתם כבר רואים לאן הולכים מכאן?</p>
<p>אז מה ש-<span class="math">\(A\)</span> עושה הוא לכתוב <span class="math">\(\left\langle B\right\rangle \)</span> על הסרט ולעצור. אז <span class="math">\(B\)</span> "מתעוררת", רואה קלט <span class="math">\(w=\left\langle B\right\rangle \)</span> (<span class="math">\(w\)</span> הוא הקידוד של <span class="math">\(B\)</span>, אך <span class="math">\(B\)</span> לא "יודעת" זאת), ומחשבת את <span class="math">\(q\left(\left\langle B\right\rangle \right)=M_{\left\langle B\right\rangle }=\left\langle A\right\rangle \)</span>. לסיום היא כותבת את הפלט הזה משמאל ל-<span class="math">\(w\)</span> שהיא קיבלה, כלומר בסיום ריצת <span class="math">\(B\)</span> כתוב על הסרט <span class="math">\(\left\langle AB\right\rangle \)</span>, בדיוק כפי שרצינו. תעלול פשוט, אך מבריק.</p>
<p>כעת אפשר להסביר מדוע ההנחה שהקידוד של המכונה מורכב קודם כל מהקידוד של <span class="math">\(A\)</span> ולאחר מכן מהקידוד של <span class="math">\(B\)</span> היא לגיטימית - כי מה שקורה ל-<span class="math">\(B\)</span> בסופו של דבר היא שהיא מחזיקה אצלה הן את הקידוד של <span class="math">\(A\)</span> (בתור ה-<span class="math">\(q\left(w\right)\)</span> והן את הקידוד של <span class="math">\(B\)</span> (בתור ה-<span class="math">\(w\)</span>) והיא יכולה לעשות איתם מה שמתחשק לה. אנחנו ביקשנו ממנה לרשום אותם האחד אחרי השני, אבל אם היה צורך להשתמש בהם באופן מחוכם יותר, <span class="math">\(B\)</span> הייתה יכולה לעשות גם את זה. בעצם כל מה שאנחנו מניחים הוא שאם יש לנו מכונה שמורכבת משתי תת-מכונות <span class="math">\(A,B\)</span> ויש לנו את הקוד של אותן שתי תתי-מכונות, אז אפשר לבנות את הקוד של המכונה ה"מורכבת" - וזה דבר שאני מניח שתסכימו איתי שהוא אפשרי.</p>
<p>עכשיו אפשר לקחת את הבניה הזו צעד אחד קדימה ולבנות מכונה שיודעת להשתמש בקוד של עצמה כמה שתרצה. לצורך העניין, נחשוב על מכונה <span class="math">\(T\)</span> שמקבלת שני פרמטרים, <span class="math">\(\left\langle M\right\rangle ,w\)</span>, כאשר <span class="math">\(w\)</span> הוא הקלט ה"רגיל" של המכונה ואילו <span class="math">\(\left\langle M\right\rangle \)</span> הוא קידוד של מכונה כלשהי, ו-<span class="math">\(T\)</span> פועלת כפונקציה של שני הקלטים הללו. מה שאנחנו רוצים להראות הוא קיום של מכונה <span class="math">\(R\)</span> כך ש-<span class="math">\(R\left(w\right)=T\left(\left\langle R\right\rangle ,w\right)\)</span>. כלומר, <span class="math">\(R\)</span> מתנהגת כמו <span class="math">\(T\)</span> בכל הנוגע לקלט <span class="math">\(w\)</span>, ועבור הקוד <span class="math">\(\left\langle M\right\rangle \)</span> שלה עצמה. מבלבל? אז חשבו על תוכנית מחשב שמקבלת קלט מהמשתמש ועוד משתנה של "הקוד שלי"; אנחנו רוצים לגרום לתוכנית לרוץ כך שהמשתנה "הקוד שלי" יכיל את הערך הנכון.</p>
<p>אין כאן שום גאונות חדשה, אלא רק הרחבה פשוטה של הבניה שכבר ראינו. נוסיף את הקוד של המכונה <span class="math">\(T\)</span> למשחק, כך שהיא תתחיל לפעול אחרי <span class="math">\(B\)</span>, ולכן הקוד של המכונה ה"משולשת" יהיה <span class="math">\(\left\langle ABT\right\rangle \)</span>. מה ש-<span class="math">\(A\)</span> יעשה הפעם יהיה לכתוב <span class="math">\(\left\langle BT\right\rangle \)</span> על הסרט, ואילו <span class="math">\(B\)</span> יעשה בדיוק את אותו הדבר כמו קודם ויחשב את <span class="math">\(\left\langle A\right\rangle \)</span>. כש-<span class="math">\(B\)</span> יסיים את ריצתו על הסרט יהיה כתוב <span class="math">\(\left\langle ABT\right\rangle \)</span> וזה בדיוק מה ש-<span class="math">\(T\)</span> תראה כאשר היא תתחיל את ריצתה (ואיפה הקלט של <span class="math">\(T\)</span> נמצא? אפשר להניח שכבר <span class="math">\(A\)</span> שמרה אותו בצד - זה לא גורר שינוי משמעותי בהגדרות שלנו).</p>
<p>ועכשיו - לקוד בפועל, בשפת רובי, שמשתמש בדיוק ברעיונות שתיארתי כאן:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">def q(w)</span><span class="se">\n\t\&quot;</span><span class="s2">b = </span><span class="se">\#</span><span class="s2">{w.inspect}</span><span class="se">\&quot;\n</span><span class="s2">end</span><span class="se">\n\n</span><span class="s2">print q(b) + b&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">q</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="w">    </span><span class="s2">&quot;b = </span><span class="si">#{</span><span class="n">w</span><span class="o">.</span><span class="n">inspect</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>

<span class="nb">print</span><span class="w"> </span><span class="n">q</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span>
</code></pre></div>


</div>

<p dir="rtl">לא צריך לדעת יותר מדי רובי כדי להבין מה קורה כאן. הדבר המחוכם ביותר הוא האופן שבו אני מתאר מחרוזת: בתוך מחרוזת אני יכול לכתוב ביטויים כמו n\ ו-t\ שמתפרשים בתור התווים המתאימים לירידת שורה או לטאבים. מה שכתוב בתוך השורה הראשונה בקובץ הוא פשוט כל יתר השורות בקובץ. כל זה מושם בתוך המשתנה b; חשבו על זה בתור הריצה של <span class="math">\(A\)</span>, שכותבת את המחרוזת שמתארת את <span class="math">\(B\)</span> לא על ה"סרט" (כי אין סרט) אלא לתוך המשתנה b.</p>
<p>החל מהשורה השניה מגיע התיאור של <span class="math">\(B\)</span>. ראשית, הפונקציה <span class="math">\(q\)</span> שמקבלת <span class="math">\(w\)</span> ופולטת תוכנית שמה שהיא עושה בחיים הוא להדפיס את <span class="math">\(w\)</span>. האופן שבו היא עושה את זה הוא המקום העיקרי שבו צריך להבין טיפה רובי. ראשית, ברובי לא חייבים לכתוב במפורש return כדי להחזיר ערך מפונקציה; הערך האחרון שמחושב בתוך פונקציה הוא אוטומטית ערך ההחזרה שלה. לכן הפונקציה בת השורה הבודדת הזו כוללת רק מחרוזת, והמחרוזת הזו אוטומטית תהיה הפלט של הפונקציה.</p>
<p>שנית, כשאני כותב מחרוזת בשפת רובי אני יכול "להשתיל" בתוך המחרוזת ערכים של ביטויים. התחביר עבור "השתלה" כזו הוא כתיבה של סולמית (#) ואז את הביטוי שאני רוצה להשתיל במחרוזת כשהוא בתוך סוגריים מסולסלים. במקרה שלנו אני משתיל את הערך של w, אבל לא לפני שאני מבצע שינוי כלשהו לערך הזה באמצעות הפעלת הפונקציה inspect עליו. הפונקציה הזו, כשהיא מופעלת על מחרוזת, מחזירה גרסה חדשה של המחרוזת שכתובה בצורה יותר מפורשת. למשל, אם במחרוזת המקורית היה תו של ירידת שורה (ולכן כשהמחרוזת הייתה מודפסת על המסך הייתה מופיעה ירידת שורה) הרי ש-inspect החליפה את התו הזה בזוג תווים, n\; זה מתאים לאופן שבו תיארתי את ירידת השורה בתוך המחרוזת b מלכתחילה. במהלך ריצת התוכנית מה שקורה הוא שראשית המשתנה b מאותחל על ידי לקיחת המחרוזת ששמים לתוכו וביצוע כל מני המרות בה שהופכות זוג רצוף של תווים כמו n\ לתו ירידת שורה; inspect פשוט מבצעת את התהליך הזה בכיוון ההפוך.</p>
<p>לאחר הגדרת <span class="math">\(q\)</span> מגיע יתר הקוד של <span class="math">\(B\)</span>; ראשית היא מחשבת את <span class="math">\(q\)</span> על "תוכן הסרט" הנוכחי (כלומר, על המשתנה b) ומקבלת תוצאה שהיא <span class="math">\(\left\langle A\right\rangle \)</span>; וכעת היא פולטת את השרשור של הפלט הזה עם התוכן של b, בדיוק כמו ש-<span class="math">\(B\)</span> התיאורטית שלי עבדה.</p>
<p>בשביל מה כל זה טוב? ראשית, האפשרות של מכונה לדעת את הקידוד של עצמה מקלה על פתרון בעיות מסויימות בחישוביות (למשל, להראות שבעיה בסגנון "יש לבדוק האם המכונה הבאה היא המכונה בעלת הקידוד המינימלי מבין כל המכונות ששקולות לה" היא בלתי פתירה). שנית, כי זה מגניב. שלישית, כדי לנטרל טענות מגוחכות שלפעמים צצות בדיונים לפיהן מחשבים אינם מסוגלים "להבין" את עצמם עד הסוף, או שאינם מסוגלים "לשכפל את עצמם" (להבדיל מבני אדם שיש להם מנגנון טבעי לכך). מעתה אמרו: מחשבים, בני אדם ומטאטאים - כולנו מסוגלים לשכפל את עצמנו (בכל הנוגע ל"הבנה", זה כבר עניין לדיון אחר בזמן אחר).</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>