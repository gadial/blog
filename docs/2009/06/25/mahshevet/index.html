<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחשבת - נקמתן של השמורות - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/new_blog/favicon.ico">
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/new_blog/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/new_blog/">דף הבית</a>
                <a href="/new_blog/random.html">פוסט אקראי</a>
                <a href="/new_blog/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/new_blog/2009/06/07/lion_in_the_desert/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">איך תופסים אריה במדבר?</span>
            </a>
            

            
            <a href="/new_blog/2009/06/26/sums_of_squares_and_quadratic_reciprocity/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">על סכומי ריבועים והקשר להדדיות ריבועית</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>מחשבת - נקמתן של השמורות</h1>
            <div class="post-meta">
                <span class="date">2009-06-25</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/משחקים וחידות מתמטיות.html">משחקים וחידות מתמטיות</a>
                    
                </span>
                
                
            </div>
        </header>
        
        <article>
            <p><a href="http://www.gadial.net/">הפוסט הראשון שלי בבלוג</a> תיאר את הצורה שבה מושג השמורות (Invariants) מחסל שני משחקים ומראה שהם בלתי פתירים - משחק ריצוף (כיסוי לוח שחמט חתוך באמצעות אבני דומינו), ומשחק ה-15. אני רוצה לחזור לאותו נושא בדיוק, אבל למשחק אחר ושמורה טיפה יותר מחוכמת - המשחק שנקרא בישראל "<a href="http://he.wikipedia.org/wiki/%D7%9E%D7%97%D7%A9%D7%91%D7%AA">מחשבת</a>" (ובאנגלית, Peg Solitaire).</p>
<p>מחשבת הוא משחק לשחקן בודד. לוח המשחק נראה בתחילת המשחק כך:</p>
<p><a href="/new_blog/img/2009/06/PegSolitaire1.png"><img class="alignnone size-full wp-image-1040" title="PegSolitaire1" src="/new_blog/img/2009/06/PegSolitaire1.png" alt="" width="350" height="350" /></a></p>
<p>כאשר עיגול שחור בתוך משבצת מציין "חייל", בדומה לחייל של דמקה. המשחק מורכב מסדרה של מהלכים, כאשר כל מהלך דומה ל"אכילה" בדמקה: חייל א' קופץ מעל חייל ב' שצמוד אליו (מלמעלה, למטה, משמאל או מימין; לא באלכסון) אל משבצת פנויה שאחריו, ואז חייל ב' מוסר מהלוח. בתחילת המשחק יש רק ארבעה מהלכים אפשריים (מהם?) אבל מהר מאוד נפתחות המון אפשרויות שונות. המטרה: להיוותר עם חייל אחד בלבד. כדי לקבל תחושה של המשחק ועד כמה הוא מאתגר אפשר לשחק בו באחד מאתרי הרשת שמציע אותו - למשל, <a href="http://alefefes.macam98.ac.il/games/game.asp?n=19">זה</a>.</p>
<p>לפני שנים רבות (שלושים?) רעשה וגעשה הארץ כאשר יצאה לשוק גרסה "מורחבת" של המשחק, שבה הלוח גדול יותר, ונראה כך:</p>
<p><a href="/new_blog/img/2009/06/PegSolitaire2.png"><img class="alignnone size-full wp-image-1041" title="PegSolitaire2" src="/new_blog/img/2009/06/PegSolitaire2.png" alt="" width="350" height="350" /></a><br />
דא עקא? הלוח המורחב, בדומה למשחק ה-15 הידוע לשמצה, גורם למשחק להיות בלתי פתיר - כלומר, לא ניתן להגיע למצב שבו רק חייל בודד נותר על הלוח. עד כדי כך חמור היה הדבר עד שהידיעה הגיעה עד ל"כלבוטק". על המחדל הצביע דוקטורנט למתמטיקה, שגדל והפך לפרופסור אלי אלחדף מהפקולטה למתמטיקה בטכניון; הוא לא המציא את השיטה שאציג כאן ולא ברור מי המציא - זו אחת מאותן דוגמאות ל"פולקלור מתמטי", דברים שכנראה מתגלים במקביל במקומות רבים והם פשוטים מכדי שיתפרסם מאמר העוסק בהם, אך מעניינים מספיק כדי שיסופרו באופן לא פורמלי. מה שאעשה יהיה לתפוס שתי ציפורים במכה אחת - גם להראות שהלוח המורחב אינו פתיר, אך גם להראות שמשחק בלוח המקורי, אם הוא מסתיים בניצחון, יכול להסתיים רק באחת מבין חמש משבצות אפשריות - זו שבאמצע, או כל אחת מהמשבצות שבקצה ה"צלב". למעשה, אתחיל מלהוכיח זאת, שכן אחר כך אי הפתירות של המשחק המורחב היא כמעט מובנת מאליה.</p>
<p>הרעיון הבסיסי הוא להשתמש בשיקול צביעה. אצבע כל משבצת בלוח בצבע מסויים, ואז התכונה שתישאר קבועה לכל אורך המשחק היא "סכום הצבעים של המשבצות שעליהן יש חיילים". לשם כך צריכה להיות משמעות למושג של "סכום צבעים", ולכן אתן תיאור פורמלי. מי שמכיר את תורת החבורות יזהה מייד שהטיעון הוא "הצבעים הם האיברים הלא טריוויאליים של חבורת קליין", אבל מי שאינו מכיר - לא נורא, רק סמכו עלי שמה שאני מציע אינו שרירותי.</p>
<p>לצבעים אני הולך לקרוא <span class="math">\(a,b,c\)</span>. בנוסף יהיה עוד צבע, <span class="math">\(e\)</span>, שלא אצבע בו את הלוח אבל יבוא לידי ביטוי בכללי החשבון. הכללים הם פשוטים: <span class="math">\(a+a=b+b=c+c=e\)</span>, כלומר סכום של כל צבע עם עצמו הוא <span class="math">\(e\)</span>, ו-<span class="math">\(a+e=a,b+e=b,c+e=c\)</span>, כלומר הסכום של <span class="math">\(e\)</span> עם כל צבע לא משנה את אותו הצבע (החיבור אצלי מקיים את חוק החילוף, כלומר <span class="math">\(a+e=e+a\)</span> וכך לכל זוג צבעים). שימו לב שמשני הכללים שכבר נתתי נובעים דברים מורכבים יותר, נניח <span class="math">\(a+a+a=a+e=a\)</span>.</p>
<p>הכלל האחרון שאני נזקק לו הוא הכלל הבא: <span class="math">\(a+b=c,b+c=a,c+a=b\)</span>. כלומר, סכום של שניים משלושת הצבעים ה"מעניינים" נותן את הצבע השלישי. מכאן נובע, למשל, ש-<span class="math">\(a+b+c=c+c=e\)</span>. תכף נראה איך כל זה טוב לנו.</p>
<p>לאלו מכם שכל העסק נראה שרירותי מדי, אפשר לתת לסימבולים הללו משמעות מתמטית יותר קונקרטית. חשבו על <span class="math">\(\mathbb{Z}_{2}^{2}\)</span> - אוסף הזוגות של 0 ו-1, עם פעולת חיבור רכיב-רכיב מודולו 2 (כלומר, בהינתן שני זוגות <span class="math">\(\left(x,y\right),\left(u,v\right)\)</span> הסכום שלהם הוא <span class="math">\(\left(x+u,y+v\right)\)</span> ובנוסף לכך מחלקים כל רכיב ב-2 ולוקחים את השארית). לא קשה לראות שאז אפשר לחשוב על <span class="math">\(e=\left(0,0\right),a=\left(1,0\right),b=\left(0,1\right),c=\left(1,1\right)\)</span>. ליצור הזה - אוסף ארבעת האיברים יחד עם פעולת החיבור הספציפית הזו - קוראים "חבורת קליין".</p>
<p>כעת נצבע את הלוח, באופן הבא:</p>
<p><a href="/new_blog/img/2009/06/PegSolitaire3.png"><img class="alignnone size-full wp-image-1043" title="PegSolitaire3" src="/new_blog/img/2009/06/PegSolitaire3.png" alt="" width="350" height="350" /></a><br />
במבט ראשון הצביעה עשויה להיראות כמעט אקראית; אבל השיטה מאוד פשוטה. אני מעביר אלכסונים דרך הלוח, וצובע כל אלכסון באחד מהצבעים - תחילה ב-<span class="math">\(a\)</span>, אחר כך ב-<span class="math">\(b\)</span>, אחר כך ב-<span class="math">\(c\)</span> ואז שוב ב-<span class="math">\(a\)</span> וחוזר חלילה. האלכסונים עוברים מלמעלה מימין אל למטה משמאל. המטרה בצביעה בסגנון הזה פשוטה - להבטיח שבכל שלוש משבצות שאקח, שהן סמוכות זו לזו במאוזן, או סמוכות זו לזו במאונך, יהיו לי כל שלושת הצבעים <span class="math">\(a,b,c\)</span> יחד (בדקו שזה אכן כך!). תכף יתברר מדוע זה טוב.</p>
<p>כזכור, הגדרנו את ה"ערך" של לוח בתור "סכום הצבעים של כל המשבצות שיש עליהן חיילים". בתחילה יש חיילים על כל משבצת פרט לאמצעית (זו שכתוב עליה <span class="math">\(b\)</span>), אז מהו הסכום הזה? דרך אחת לחשב אותו היא כך: נתבונן, למשל, בשתי השורות העליונות - באחת יש <span class="math">\(a,b,c\)</span> ובשניה יש <span class="math">\(b,c,a\)</span>. אם נסכום את האיברים בשורה הראשונה, נקבל <span class="math">\(e\)</span>, וכך עבור האיברים בשורה השניה; לכן אפשר להתעלם מהן. באותו אופן אפשר להתעלם משתי השורות האחרונות ומארבע העמודות, הימניות והשמאליות ביותר. נשארנו רק עם הריבוע שבאמצע. גם בו, אפשר להתעלם מה-<span class="math">\(c,a,b\)</span> העליון ומה-<span class="math">\(b,c,a\)</span> העליון כי סכומם <span class="math">\(e\)</span>, ולכן נותרנו רק עם השלשה האמצעית - שממנה, כאמור, <span class="math">\(b\)</span> חסר ולכן נותרנו עם <span class="math">\(a,c\)</span> שסכומם הוא <span class="math">\(b\)</span>. אם כן, הערך של הלוח בתחילת המשחק הוא <span class="math">\(b\)</span>. כעת הטענה היא שלא משנה אילו מהלכים אני מבצע במהלך המשחק, הערך הזה נותר קבוע.</p>
<p>כדי לראות זאת, בואו נחשוב שוב מה אומר "מהלך" - קחו שלוש משבצות סמוכות (בשורה או בעמודה) שיש חיילים על שתיים סמוכות מהן והשלישית פנויה, ו"תחליפו" את הסיטואציה בכזו שבה שני החיילים הוסרו, ובמקום זאת יש לנו חייל על המשבצת שקודם הייתה פנויה. אם, למשל, המשבצות היו <span class="math">\(a,b,c\)</span> כך שהמשבצות התפוסות היו <span class="math">\(a,b\)</span>, אז בתחילה התרומה של החלק הזה לסכום הכולל של הלוח הייתה <span class="math">\(a+b\)</span> שהוא <span class="math">\(c\)</span>; ואחרי שסילקנו את החיילים מ-<span class="math">\(a,b\)</span> ושמנו אחד ב-<span class="math">\(c\)</span>, התרומה של החלק הזה לסכום הכולל היא עדיין <span class="math">\(c\)</span>, ולכן שום דבר לא השתנה. זה הכל.</p>
<p>נסו לשחק את המשחק הזה בעצמכם. קחו זוג חיילים, שימו אותו על הלוח באופן שרירותי, בדקו מה הערך שהחיילים תורמים, ובצעו מהלך חוקי - תראו שהערך נותר קבוע גם לאחר מכן. הסיבה שהתעלול עובד היא שבחרנו כללי חיבור כאלו שבהן סכום של שני איברים מהחבורה (שאינם <span class="math">\(e\)</span>) נותן את האיבר השלישי (שאינו <span class="math">\(e\)</span>) שלה; ושבחרנו צביעה מחוכמת ללוח, כזו שבה בכל שלשה סמוכה של משבצות כל שלושת הצבעים מופיעים.</p>
<p>כל זה טוב ויפה, אבל לאן זה מוביל? המסקנה הסופית מדהימה בכוח שלה. מכיוון שערך הלוח נותר קבוע לכל אורך המשחק, ומכיוון שערכו בהתחלה היה <span class="math">\(b\)</span>, אז גם בסוף הוא יהיה <span class="math">\(b\)</span>. מכיוון שבסוף המשחק (אם אפשר בכלל להגיע אליו) יש רק חייל בודד על הלוח, הוא חייב להיות במשבצת שכתוב עליה <span class="math">\(b\)</span>. עד כאן זה רק חצי מרשים, כי יש הרבה משבצות שכתוב עליהם <span class="math">\(b\)</span>, אבל חלקן הן עדיין בלתי אפשריות ושיקול סימטריה פשוט מראה זאת: למשל, המשבצת הראשונה בשורה השנייה היא בלתי אפשרית, שכן שום דבר לא מייחד אותה לעומת המשבצת האחרונה בשורה השנייה, שצבועה דווקא ב-<span class="math">\(a\)</span>; אם אפשר לסיים משחק במשבצת הראשונה בשורה השנייה, אז אפשר לשחק את "תמונת הראי" של אותו משחק, כשכל מהלך שאני מבצע הוא תמונת ראי ביחס לציר הסימטריה האנכי שעובר במרכז הלוח, ולסיים את המשחק דווקא במשבצת שכתוב עליה <span class="math">\(a\)</span>, מה שבלתי אפשרי. לכן המשבצות היחידות שאני יכול לסיים בהן את המשחק הן המשבצות הסימטריות - ה-<span class="math">\(b\)</span> שבאמצע הלוח, וכל אחד מה-<span class="math">\(b\)</span>-ים שבאמצע השורות והעמודות הקיצוניות (ה-<span class="math">\(b\)</span> השני הן בשורה העליונה והן בתחתונה, וה-<span class="math">\(b\)</span> השני הן בעמודה הימנית והן השמאלית).</p>
<p>ועכשיו, בואו ננסה להשתמש בשיקול הזה גם על הלוח ה"מורחב":</p>
<p><a href="/new_blog/img/2009/06/PegSolitaire4.png"><img class="alignnone size-full wp-image-1044" title="PegSolitaire4" src="/new_blog/img/2009/06/PegSolitaire4.png" alt="" width="350" height="350" /></a><br />
מה נשתנה בעצם? הוספנו ללוח ארבע משבצות, שנצבעות ב-<span class="math">\(a,b,b,c\)</span>. כלומר, סכום הצבעים שלהן הוא <span class="math">\(a+c+b+b=b+b+b=b\)</span>. מכאן שסכום הצבעים הכולל של הלוח הוא <span class="math">\(b+b=e\)</span>. מכאן שגם בסוף המשחק סכום הצבעים צריך להיות <span class="math">\(e\)</span>, ומכיוון שצבע זה לא מופיע בכלל על הלוח (הוא קיים רק כ"סכום" של צבעים, מבחינתנו), לא ייתכן שבסיום המשחק (או בכל שלב שלו) יהיה חייל בודד על הלוח. כלומר- המשחק לא פתיר, סוף פסוק.</p>
<p>ישנן דרכים רבות ושונות שבהן ניתן לתקוף את המשחק הזה, וזו שהצגתי איננה היחידה. אני חושב שהיא יפה ומעניינת במיוחד, מכיוון שהיא נדמית כל כך "תפורה" באופן שמתאים לו - השימור של סכום הצבעים נראה ממש טבעי. כמובן שזה נובע, כאמור, מבחירה חכמה הן של הצבעים (כלומר, של החבורה שבאיברים מתוכה משתמשים לצביעה) והן של הצורה שבה מבוצעת הצביעה עצמה. זה מה שהופך טיעוני צביעה ל"אמנות" בפני עצמה.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/new_blog/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>