<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>המגדל הלוהט - לא מדויק</title>
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2007/09/03/pi_movie_sucks/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">על מתמטיקאים קולנועיים מטורפים ו-216 הספרות של &#34;פאי&#34;</span>
            </a>
            

            
            <a href="/2007/09/09/towers_of_hanoi_solutions/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">המגדל הלוהט 2: הנקמה</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>המגדל הלוהט</h1>
            <div class="post-meta">
                <span class="date">2007-09-07</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/משחקים וחידות מתמטיות.html">משחקים וחידות מתמטיות</a>
                    
                    <a href="/categories/תורת הסיבוכיות.html">תורת הסיבוכיות</a>
                    
                </span>
                
                
            </div>
        </header>
        
        <article>
            <p>הפוסט הקודם, שבו דיברתי על משך הזמן העצום שיידרש בכדי לכתוב את כל המספרים בני ה-216 ספרות, הזכיר לי אסוציאטיבית משחק מתמטי שהאגדה שבבסיסו "לוקה" בכשל דומה. המשחק הזה מכונה "<a href="http://he.wikipedia.org/wiki/%D7%9E%D7%92%D7%93%D7%9C%D7%99_%D7%94%D7%90%D7%A0%D7%95%D7%99">מגדלי האנוי</a>".</p>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/0/07/Tower_of_Hanoi.jpeg" /></p>
<p>המשחק הוא פשוט למדי, ומוצג לעיל בתמונה: הוא כולל שלושה "מגדלים" (מוטות), ומספר דיסקיות בגדלים שונים, שמונחות זו על זו (קטן על גדול). בתחילת המשחק כל הדיסקיות מונחות על אחד המוטות לפי הסדר, ומטרת המשחק היא להעביר את כולן לאחד מהמוטות האחרים, תוך היעזרות במוט השלישי. ישנם שני כללים לגבי העברת הדיסקיות:</p>
<ol>
    <li>מותר להזיז רק דיסקית אחת בכל פעם ("להזיז" פירושו "להוציא מהמוט ולהשחיל על מוט אחר").</li>
    <li>אסור לשים דיסקית על דיסקית שקטנה ממנה.</li>
</ol>
<p>כמובן שמהחוקים עולה שלא ניתן להוציא דיסקית "מהאמצע" - חייבים להזיז רק את הדיסקיות שנמצאות הכי למעלה.</p>
<p>הנה המחשה גרפית של פתרון המשחק כאשר יש רק שלוש דיסקיות (והמוטות וירטואליים):</p>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/4/4f/Tower_of_Hanoi.gif" /></p>
<p>עבור שלוש דיסקיות זה קל; עבור ארבע דיסקיות זה סביר; עבור חמש דיסקיות אני כבר מתחיל להזיע, ומעולם לא פתרתי את המשחק עבור שש דיסקיות ומעלה - כלומר, עד ששמעתי מה הפתרון.</p>
<p>כי למשחק יש פתרון פשוט יחסית, שלא דורש שום מחשבה, ומקלקל אותו לחלוטין. אחזור לפתרון הזה בסוף, כדי לא "להרוס" את המשחק לאלו שעוד לא מכירים אותו (אני ממליץ על משחק אחד או שניים בארבע דיסקיות - מעבר לזה הוא כבר הופך למשעמם).</p>
<p>המשחק הומצא בסוף המאה ה-19 על ידי מתמטיקאי צרפתי, והופץ עם סיפור רקע אגדתי על מקדש של <a href="http://he.wikipedia.org/wiki/%D7%91%D7%A8%D7%94%D7%9E%D7%94">ברהמינים</a> שבו ישנם שלושה מוטות, ולא פחות מאשר 64 דיסקיות, והם עוסקים במרץ בהעברתן - והאגדה מספרת כי כאשר יסיימו, יגיע העולם לקיצו.</p>
<p>נשמע מאוד מפחיד, אלא שאפשר להוכיח שהמספר המינימלי של העברות שנדרש כדי לסיים את המשחק עם <span class="math">\(n\)</span> דיסקיות הוא <span class="math">\(2^n-1\)</span> . כלומר, כל דיסקית שנוסיף למשחק תכפיל פי 2 בערך את הזמן הנדרש לנו כדי לסיים אותו. כאשר יש ארבע דיסקיות, צריך לבצע 15 העברות; כאשר יש חמש דיסקיות, צריך לבצע 31, ועבור שש צריך כבר 63 העברות. זו אחת הסיבות מדוע איני ממליץ לשחק עבור חמש או שש דיסקיות - גם אם יודעים בדיוק איך לפתור (ואז זה פשוט חסר טעם לשחק), זה יקח זמן.</p>
<p>עבור 64 דיסקיות תוכלו לעשות את החשבון בעצמכם - כמו במקרה של המספר בן 216 הספרות, תקבלו שנדרש פרק זמן עצום, הרבה יותר מגילו של היקום, כדי לבצע את ההעברות גם אם מעבירים דיסקית בשניה. אמנם, הזמן הזה מתגמד באופן מחריד לעומת הזמן שנדרש כדי לכתוב את כל המספרים בני ה-216 ספרות - עבור מגדלי האנוי צריך <span class="math">\(2^{64}-1\)</span> העברות, ועבור המספרים בני 216 הספרות צריך יותר מ-<span class="math">\(10^{215}\)</span> מספרים, ובכתיב אחר: יותר מאשר <span class="math">\(2^{700}\)</span> מספרים.</p>
<p>הקושי האינהרנטי שבבעיה הזו נותן לה עניין כלשהו מבחינת תורת הסיבוכיות - הנה דוגמה לבעיה שנדרש זמן אקספוננציאלי כדי לסיימה ("<a href="http://en.wikipedia.org/wiki/Exponential_time">זמן אקספוננציאלי</a>", בערך, פירושו שהגדלה ב-1 של גודל הקלט לבעיה מגדיל את זמן הפתרון פי משהו - במקרה שלנו, פי 2). אלו בעיות שהן כמעט במוצהר מחוץ להישג ידינו; גם אם נעמול קשה, נצליח לפתור רק את המקרים הקטנים והפשוטים יותר של הבעיה. המילה "לפתור" כאן מתייחסת ל"לכתוב רשימה של המהלכים שדרושים כדי לסיים בהצלחה את המשחק" - כי כאמור, ידוע שיטה פשוטה למדי לפתור כל משחק גם מבלי שיהיה צורך לתת רשימה מפורשת של מהלכים, אלא שביצוע כל המהלכים הללו עדיין ידרוש זמן אקספוננציאלי. יש להודות שזוהי דוגמה עלובה למדי; הסיבה לקושי הגודל היא לא איזה תחכום אינהרנטי שיש במשחק, אלא פשוט העובדה שרשימת המהלכים שיש להוציא היא ענקית. באותה מידה גם התוכנית שמקבלת מספר <span class="math">\(n\)</span> וצריכה להדפיס למסך את כל הספרות של <span class="math">\(10^{10^n}\)</span> תדרוש זמן אקספוננציאלי - ובכל זאת, אני חושב שמגדלי האנוי היא דוגמה "טבעית" יותר, ולכן יפה יותר.</p>
<p>למרות שמבחינה "משחקית", ערכו של המשחק דל למדי, נהוג לתת אותו בתור תרגיל בית לכאלו שהתחילו ללמוד מדעי המחשב, בגלל כוחו בהמחשת מושג ה<a href="http://he.wikipedia.org/wiki/%D7%A8%D7%A7%D7%95%D7%A8%D7%A1%D7%99%D7%94"><strong>רקורסיה</strong></a> וכוחו. בפוסט הבא אציג את הפתרון הרקורסיבי, וגם את הפתרון הפשוט המובטח.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>