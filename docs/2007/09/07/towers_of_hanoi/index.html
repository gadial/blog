<!DOCTYPE html>
<html lang="he" dir="rtl"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>המגדל הלוהט | לא מדויק</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="המגדל הלוהט" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
<meta property="og:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
<link rel="canonical" href="http://gadial.net/2007/09/07/towers_of_hanoi/" />
<meta property="og:url" content="http://gadial.net/2007/09/07/towers_of_hanoi/" />
<meta property="og:site_name" content="לא מדויק" />
<meta property="og:image" content="http://gadial.net/assets/img/main/default-card.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2007-09-07T12:57:24+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="http://gadial.net/assets/img/main/default-card.png" />
<meta property="twitter:title" content="המגדל הלוהט" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"url":"http://gadial.net/2007/09/07/towers_of_hanoi/","@type":"BlogPosting","description":"לא מדויק - בלוג על מתמטיקה ומדעי המחשב","headline":"המגדל הלוהט","dateModified":"2007-09-07T12:57:24+00:00","datePublished":"2007-09-07T12:57:24+00:00","image":"http://gadial.net/assets/img/main/default-card.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://gadial.net/2007/09/07/towers_of_hanoi/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon"><link type="application/atom+xml" rel="alternate" href="http://gadial.net/feed.xml" title="לא מדויק" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3924539-2', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        processEscapes: true
      },
      TeX: {extensions: ["AMSmath.js","AMSsymbols.js"]},
      "HTML-CSS": { 
        linebreaks: { automatic: true }
      },
      SVG: { 
        linebreaks: { automatic: true } 
      }
    });
  </script>
  <!-- "https://www.gadial.net/wp-includes/js/xypic.js" -->

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

</head>
<body><header>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="/">לא מדויק</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        
            
            <li class="nav-item">
                <a class="nav-link" href="/">דף הבית</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/post_list">רשימת הפוסטים</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/categories">קטגוריות</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/random">פוסטים אקראיים</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/lecture_notes">סיכומי הרצאות</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/about/">אודות</a>
            </li>
            
        
      </ul>
      <form class="form-inline mt-2 mt-md-0" action="/post_list/" method="get">
        <input class="form-control mr-sm-2" type="text" placeholder="חיפוש" aria-label="חיפוש" name="s">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">חיפוש</button>
      </form>
    </div>
  </nav>
</header><main class="page-content" aria-label="Content" role="main">
      <div class="wrapper text-right">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><div class="PageNavigation">
    
      <a class="prev" href="/2007/09/03/pi_movie_sucks/">&laquo; על מתמטיקאים קולנועיים מטורפים ו-216 הספרות של "פאי"</a>
    
    
      <a class="next" href="/2007/09/09/towers_of_hanoi_solutions/">המגדל הלוהט 2: הנקמה &raquo;</a>
    
  </div><header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">המגדל הלוהט</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2007-09-07T12:57:24+00:00" itemprop="datePublished">Sep 7, 2007
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>הפוסט הקודם, שבו דיברתי על משך הזמן העצום שיידרש בכדי לכתוב את כל המספרים בני ה-216 ספרות, הזכיר לי אסוציאטיבית משחק מתמטי שהאגדה שבבסיסו “לוקה” בכשל דומה. המשחק הזה מכונה “<a href="http://he.wikipedia.org/wiki/%D7%9E%D7%92%D7%93%D7%9C%D7%99_%D7%94%D7%90%D7%A0%D7%95%D7%99">מגדלי האנוי</a>”.</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/0/07/Tower_of_Hanoi.jpeg" /></p>

<p>המשחק הוא פשוט למדי, ומוצג לעיל בתמונה: הוא כולל שלושה “מגדלים” (מוטות), ומספר דיסקיות בגדלים שונים, שמונחות זו על זו (קטן על גדול). בתחילת המשחק כל הדיסקיות מונחות על אחד המוטות לפי הסדר, ומטרת המשחק היא להעביר את כולן לאחד מהמוטות האחרים, תוך היעזרות במוט השלישי. ישנם שני כללים לגבי העברת הדיסקיות:</p>
<ol>
	<li>מותר להזיז רק דיסקית אחת בכל פעם ("להזיז" פירושו "להוציא מהמוט ולהשחיל על מוט אחר").</li>
	<li>אסור לשים דיסקית על דיסקית שקטנה ממנה.</li>
</ol>
<p>כמובן שמהחוקים עולה שלא ניתן להוציא דיסקית “מהאמצע” - חייבים להזיז רק את הדיסקיות שנמצאות הכי למעלה.</p>

<p>הנה המחשה גרפית של פתרון המשחק כאשר יש רק שלוש דיסקיות (והמוטות וירטואליים):</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/4/4f/Tower_of_Hanoi.gif" /></p>

<p>עבור שלוש דיסקיות זה קל; עבור ארבע דיסקיות זה סביר; עבור חמש דיסקיות אני כבר מתחיל להזיע, ומעולם לא פתרתי את המשחק עבור שש דיסקיות ומעלה - כלומר, עד ששמעתי מה הפתרון.</p>

<p>כי למשחק יש פתרון פשוט יחסית, שלא דורש שום מחשבה, ומקלקל אותו לחלוטין. אחזור לפתרון הזה בסוף, כדי לא “להרוס” את המשחק לאלו שעוד לא מכירים אותו (אני ממליץ על משחק אחד או שניים בארבע דיסקיות - מעבר לזה הוא כבר הופך למשעמם).</p>

<p>המשחק הומצא בסוף המאה ה-19 על ידי מתמטיקאי צרפתי, והופץ עם סיפור רקע אגדתי על מקדש של <a href="http://he.wikipedia.org/wiki/%D7%91%D7%A8%D7%94%D7%9E%D7%94">ברהמינים</a> שבו ישנם שלושה מוטות, ולא פחות מאשר 64 דיסקיות, והם עוסקים במרץ בהעברתן - והאגדה מספרת כי כאשר יסיימו, יגיע העולם לקיצו.</p>

<p>נשמע מאוד מפחיד, אלא שאפשר להוכיח שהמספר המינימלי של העברות שנדרש כדי לסיים את המשחק עם <span>\( n \)</span> דיסקיות הוא <span>\( 2^n-1 \)</span> . כלומר, כל דיסקית שנוסיף למשחק תכפיל פי 2 בערך את הזמן הנדרש לנו כדי לסיים אותו. כאשר יש ארבע דיסקיות, צריך לבצע 15 העברות; כאשר יש חמש דיסקיות, צריך לבצע 31, ועבור שש צריך כבר 63 העברות. זו אחת הסיבות מדוע איני ממליץ לשחק עבור חמש או שש דיסקיות - גם אם יודעים בדיוק איך לפתור (ואז זה פשוט חסר טעם לשחק), זה יקח זמן.</p>

<p>עבור 64 דיסקיות תוכלו לעשות את החשבון בעצמכם - כמו במקרה של המספר בן 216 הספרות, תקבלו שנדרש פרק זמן עצום, הרבה יותר מגילו של היקום, כדי לבצע את ההעברות גם אם מעבירים דיסקית בשניה. אמנם, הזמן הזה מתגמד באופן מחריד לעומת הזמן שנדרש כדי לכתוב את כל המספרים בני ה-216 ספרות - עבור מגדלי האנוי צריך <span>\( 2^{64}-1 \)</span> העברות, ועבור המספרים בני 216 הספרות צריך יותר מ-<span>\( 10^{215} \)</span> מספרים, ובכתיב אחר: יותר מאשר <span>\( 2^{700} \)</span> מספרים.</p>

<p>הקושי האינהרנטי שבבעיה הזו נותן לה עניין כלשהו מבחינת תורת הסיבוכיות - הנה דוגמה לבעיה שנדרש זמן אקספוננציאלי כדי לסיימה (“<a href="http://en.wikipedia.org/wiki/Exponential_time">זמן אקספוננציאלי</a>”, בערך, פירושו שהגדלה ב-1 של גודל הקלט לבעיה מגדיל את זמן הפתרון פי משהו - במקרה שלנו, פי 2). אלו בעיות שהן כמעט במוצהר מחוץ להישג ידינו; גם אם נעמול קשה, נצליח לפתור רק את המקרים הקטנים והפשוטים יותר של הבעיה. המילה “לפתור” כאן מתייחסת ל”לכתוב רשימה של המהלכים שדרושים כדי לסיים בהצלחה את המשחק” - כי כאמור, ידוע שיטה פשוטה למדי לפתור כל משחק גם מבלי שיהיה צורך לתת רשימה מפורשת של מהלכים, אלא שביצוע כל המהלכים הללו עדיין ידרוש זמן אקספוננציאלי. יש להודות שזוהי דוגמה עלובה למדי; הסיבה לקושי הגודל היא לא איזה תחכום אינהרנטי שיש במשחק, אלא פשוט העובדה שרשימת המהלכים שיש להוציא היא ענקית. באותה מידה גם התוכנית שמקבלת מספר <span>\( n \)</span> וצריכה להדפיס למסך את כל הספרות של <span>\( 10^{10^n} \)</span> תדרוש זמן אקספוננציאלי - ובכל זאת, אני חושב שמגדלי האנוי היא דוגמה “טבעית” יותר, ולכן יפה יותר.</p>

<p>למרות שמבחינה “משחקית”, ערכו של המשחק דל למדי, נהוג לתת אותו בתור תרגיל בית לכאלו שהתחילו ללמוד מדעי המחשב, בגלל כוחו בהמחשת מושג ה<a href="http://he.wikipedia.org/wiki/%D7%A8%D7%A7%D7%95%D7%A8%D7%A1%D7%99%D7%94"><strong>רקורסיה</strong></a> וכוחו. בפוסט הבא אציג את הפתרון הרקורסיבי, וגם את הפתרון הפשוט המובטח.</p>

  </div>

  <hr />
  <p>
    נהניתם? התעניינתם? אם תרצו, אתם מוזמנים לתת טיפ:
  </p>
  <a href='https://ko-fi.com/H2H5XFBQ' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://az743702.vo.msecnd.net/cdn/kofi2.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a><div class="PageNavigation">
    
      <a class="prev" href="/2007/09/03/pi_movie_sucks/">&laquo; על מתמטיקאים קולנועיים מטורפים ו-216 הספרות של "פאי"</a>
    
    
      <a class="next" href="/2007/09/09/towers_of_hanoi_solutions/">המגדל הלוהט 2: הנקמה &raquo;</a>
    
  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://gadial.net/2007/09/07/towers_of_hanoi/';
      this.page.identifier = 'http://gadial.net/2007/09/07/towers_of_hanoi/';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://not-precise.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/2007/09/07/towers_of_hanoi/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">לא מדויק</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">לא מדויק</li><li><a class="u-email" href="mailto:gadial@gmail.com">gadial@gmail.com</a></li><li>&copy; כל הזכויות שמורות לגדי אלכסנדרוביץ'</li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://www.facebook.com/%D7%9C%D7%90-%D7%9E%D7%93%D7%95%D7%99%D7%A7-163347110378474"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#facebook"></use></svg> <span class="username">לא מדויק</span></a></li><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>RSS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>בלוג על מתמטיקה ומדעי המחשב</p>
      </div>
    </div>

  </div>

</footer><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="assets/js/jquery-slim.min.js"><\/script>')</script><script src="/assets/js/bootstrap.bundle.js"></script><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="assets/js/jquery-slim.min.js"><\/script>')</script><script src="/assets/js/bootstrap.bundle.js"></script>

<!-- Default Statcounter code for New blog
http://www.gadial.net/ -->
<script type="text/javascript">
  var sc_project=5444342; 
  var sc_invisible=1; 
  var sc_security="4a89cbe4"; 
  </script>
  <script type="text/javascript"
  src="https://www.statcounter.com/counter/counter.js"
  async></script>
  <noscript><div class="statcounter"><a title="Web Analytics"
  href="https://statcounter.com/" target="_blank"><img
  class="statcounter"
  src="https://c.statcounter.com/5444342/0/4a89cbe4/1/"
  alt="Web Analytics"></a></div></noscript>
  <!-- End of Statcounter Code --></body>

</html>
