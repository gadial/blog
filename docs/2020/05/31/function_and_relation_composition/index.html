<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תורת הקבוצות - הרכבת פונקציות ויחסים - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/new_site/favicon.ico">
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/new_site/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/new_site/">דף הבית</a>
                <a href="/new_site/random.html">פוסט אקראי</a>
                <a href="/new_site/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/new_site/2020/05/15/invertible_functions/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">תורת הקבוצות - פונקציות חד-חד-ערכיות, על והפיכות</span>
            </a>
            

            
            <a href="/new_site/2020/06/06/solving_equations_first_degree/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">אז איך פותרים משוואות (ממעלה ראשונה בנעלם יחיד)?</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>תורת הקבוצות - הרכבת פונקציות ויחסים</h1>
            <div class="post-meta">
                <span class="date">2020-05-31</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/תורת הקבוצות.html">תורת הקבוצות</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/תורת הקבוצות.html">תורת הקבוצות</a>
                    
                    <a href="/tags/פונקציות.html">פונקציות</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>בסדרת הפוסטים שלי על תורת הקבוצות הכרנו יחסים והכרנו פונקציות. זה נותן לנו אבני לגו, וכידוע מה שעושים עם אבני לגו הוא לחבר אותן אחת לשניה. בהקשר של פונקציות המשמעות של חיבור שכזה היא פשוטה: אנחנו רוצים להפעיל פונקציה אחת על <strong>הפלט</strong> של הפונקציה השניה. כלומר, אם אני חושב על פונקציה בתור מין קופסה שחורה שכזו שיש לה צינור כניסה של "קלט" וצינור יציאה של "פלט", אז המשמעות של הרכבה של פונקציות היא לחבר את צינור הקלט של הפונקציה השניה לצינור הפלט של הפונקציה הראשונה, ככה:</p>
<p><img src="/new_site/img/2020/05/function_composition.PNG" alt=""/></p>
<p>ברמת הסימון זה פשוט מאוד: אם <span class="math">\(f,g\)</span> הן פונקציות, אני יכול לכתוב <span class="math">\(g\left(f\left(x\right)\right)\)</span> במשמעות של "מפעילים את <span class="math">\(g\)</span> על התוצאה של הפעלת <span class="math">\(f\)</span> על <span class="math">\(x\)</span>". כדי לפשט את הסימון אפשר להשמיט את הסוגריים ופשוט לכתוב <span class="math">\(gf\left(x\right)\)</span> באותה משמעות בדיוק. לפעמים גם כותבים <span class="math">\(g\circ f\left(x\right)\)</span> במשמעות הזו, אבל אני לא אוהב את הסימון הזה ועוד נחזור לכך בהמשך. לסיום, אפשר לכתוב פשוט <span class="math">\(gf\)</span> כדי לתאר את הפונקציה שמתקבלת מההרכבה הזו של <span class="math">\(g\)</span> על <span class="math">\(f\)</span>: כלומר הפונקציה שלכל <span class="math">\(x\)</span> מחזירה את <span class="math">\(g\left(f\left(x\right)\right)\)</span>.</p>
<p>עד כאן האינטואיציה, אבל מה עם הפורמליזם? צריך קצת להיזהר. לא כל שתי פונקציות אפשר להרכיב. כדי שתהיה משמעות להרכבה כזו, <strong>הפלט</strong> של <span class="math">\(f\)</span> צריך להיות משהו שיהיה <strong>קלט חוקי</strong> עבור <span class="math">\(g\)</span>. כזכור, כל פונקציה באה עם שתי קבוצות כחלק מההגדרה שלה: קבוצה <span class="math">\(A\)</span> שנקראת <strong>התחום</strong> של הפונקציה (המקום שממנו נלקחים הקלטים) וקבוצה <span class="math">\(B\)</span> שנקראת <strong>הטווח</strong> של הפונקציה (זו קבוצה שכל הפלטים נמצאים בתוכה, אבל ייתכן שיש בה עוד איברים שאינם מתקבלים בתור פלט). כדי שתהיה משמעות להרכבת הפונקציה <span class="math">\(g\)</span> על <span class="math">\(f\)</span> אנחנו רוצים שהתחום של <span class="math">\(g\)</span> יהיה שווה לטווח של <span class="math">\(f\)</span>, כלומר שהפונקציות יהיו <span class="math">\(f:A\to B\)</span> ו-<span class="math">\(g:B\to C\)</span>. במקרה הזה, הפונקציה שמתקבלת מההרכבה היא פונקציה <span class="math">\(gf:A\to C\)</span> - הקבוצה <span class="math">\(B\)</span> ששימשה בתור מין "מתווך" בין <span class="math">\(f\)</span> ו-<span class="math">\(g\)</span> נעלמה לגמרי.</p>
<p>אפשר להקל קצת על הדרישה הזו שהתחום יהיה שווה לטווח: כל מה שאנחנו צריכים מ-<span class="math">\(f\)</span> הוא שכל <strong>פלט שהיא מוציאה בפועל</strong> יהיה שייך לתחום של <span class="math">\(g\)</span>. הטווח של <span class="math">\(f\)</span> יכול להיות עצום וגדול וחורג בהרבה מהתחום של <span class="math">\(g\)</span> ועדיין לא תהיה בעיה להרכיב את שתיהן. התנאי המדויק, אם כן, הוא שאם <span class="math">\(g:B\to C\)</span> ו-<span class="math">\(A\)</span> הוא התחום של <span class="math">\(f\)</span>, אז מתקיים <span class="math">\(f\left(A\right)\subseteq B\)</span> ("<strong>התמונה</strong> של <span class="math">\(f\)</span> מוכלת בתחום של <span class="math">\(g\)</span>").</p>
<p>בואו נראה כמה דוגמאות פשוטות. למשל, <span class="math">\(f,g:\mathbb{R}\to\mathbb{R}\)</span> שמוגדרות על ידי <span class="math">\(f\left(x\right)=x^{2}\)</span> ו-<span class="math">\(g\left(x\right)=x+3\)</span>. קל לראות ש-<span class="math">\(gf\left(x\right)=x^{2}+3\)</span> ו-<span class="math">\(fg\left(x\right)=\left(x+3\right)^{2}=x^{2}+6x+9\)</span>, וזה גם מראה לנו שהרכבת פונקציות <strong>היא לא קומוטטיבית</strong>: כלומר, <span class="math">\(fg\)</span> ו-<span class="math">\(gf\)</span> יהיו בדרך כלל פונקציות שונות (ושימו לב שלא בהכרח שתיהן קיימות בכלל - זה תלוי בתחומים והטווחים של הפונקציות).</p>
<p>הנה דוגמא קצת יותר מטורללת: ניקח בתור <span class="math">\(f\)</span> את הפונקציה שעושה איחוד של קבוצות - כלומר, הקלט שלה יהיה זוג של קבוצות והפלט שלה יהיה קבוצה בודדת. פורמלית, אם <span class="math">\(U\)</span> הוא "העולם" שלנו שכל הקבוצות הרלוונטיות הן תת-קבוצות שלו, אז <span class="math">\(f:2^{U}\times2^{U}\to2^{U}\)</span> זו הדרך שלי לכתוב ש-<span class="math">\(f\)</span> לוקחת זוג (זה ה-<span class="math">\(\times\)</span>) של תת-קבוצות של <span class="math">\(U\)</span> (זה ה-<span class="math">\(2^{U}\)</span>) ומחזירה תת-קבוצה של <span class="math">\(U\)</span>, ו-<span class="math">\(f\)</span> מוגדרת על ידי <span class="math">\(f\left(A,B\right)=A\cup B\)</span>. עכשיו, ניקח בתור <span class="math">\(g\)</span> את הפונקציה שמקבלת קבוצה בודדת (לא זוג!) ומחזירה את קבוצת החזקה שלה, כלומר <span class="math">\(g\left(A\right)=2^{A}\)</span>. אז <span class="math">\(gf\left(A,B\right)=2^{A\cup B}\)</span> ואילו <span class="math">\(fg\)</span> בכלל לא מוגדרת.</p>
<p>עכשיו בואו נחזור שניה לפוסט הקודם. ראינו שם שאם <span class="math">\(f:A\to B\)</span> היא פונקציה חד-חד-ערכית ועל, אז קיימת פונקציה <span class="math">\(f^{-1}:B\to A\)</span> בעלת התכונה הבאה: <span class="math">\(f\left(x\right)=y\)</span> אם ורק אם <span class="math">\(f^{-1}\left(y\right)=x\)</span>. קל לראות שההרכבה מקיימת <span class="math">\(f^{-1}f\left(x\right)=x\)</span>, וזו הזדמנות להציג טרמינולוגיה חדשה.</p>
<p>אם <span class="math">\(A\)</span> היא קבוצה כלשהי, אז <strong>פונקציית הזהות</strong> על <span class="math">\(A\)</span> היא הפונקציה <span class="math">\(I_{A}:A\to A\)</span> שמקיימת <span class="math">\(I_{A}\left(x\right)=x\)</span> לכל <span class="math">\(x\in A\)</span>. מה שראינו לפני רגע הוא ש-<span class="math">\(f^{-1}f=I_{A}\)</span>. יש הרבה דמיון בין המשוואה הזו ובין כפל "רגיל": אם אנחנו חושבים על <span class="math">\(I_{A}\)</span> בתור המספר 1 (למה 1? כי 1 הוא המספר שכפל בו לא משנה את האיבר שהוכפל, בדומה לאיך שפונקצית הזהות לא משנה את הקלט שלה), על <span class="math">\(f\)</span> בתור מספר כלשהו <span class="math">\(a\)</span> ועל <span class="math">\(f^{-1}\)</span> בתור <span class="math">\(\frac{1}{a}\)</span> ועל הרכבת פונקציות בתור כפל "רגיל", אז השוויון <span class="math">\(f^{-1}f=I_{A}\)</span> מזכיר לנו את השוויון <span class="math">\(\frac{1}{a}\cdot a=1\)</span>. הדמיון הזה מסביר את שיטת הסימון שבה בחרנו לתאר את <span class="math">\(f^{-1}\)</span> וגם לתת אינטואיציה למובן שבו היא "הופכית".</p>
<p>עכשיו, שימו לב למשהו טריקי קצת. מהי <span class="math">\(ff^{-1}\)</span>? גם זו פונקצית הזהות, אבל <strong>איזו</strong> פונקציית זהות? אם תחשבו על זה רגע תראו ש-<span class="math">\(ff^{-1}=I_{B}\)</span> . זו פונקציית הזהות <strong>על קבוצה אחרת</strong>, כי הפכנו את הסדר בין הקלטים לפלטים (<span class="math">\(ff^{-1}\)</span> היא פונקציה שבה <span class="math">\(f^{-1}\)</span> פועלת ראשונה, ולכן הקלט הוא מתוך <span class="math">\(B\)</span>).</p>
<p>בואו נראה דוגמא קונקרטית לזה - כאן תבוא לעזרתנו הפונקציה <span class="math">\(\text{tan}\)</span>, טנגנס. לא חייבים לדעת בדיוק איך מוגדרת טנגנס; מספיק טוב לדעת שזו פונקציה שהתחום שלה הוא <span class="math">\(\left(-\frac{\pi}{2},\frac{\pi}{2}\right)\)</span> והטווח שלה הוא <span class="math">\(\mathbb{R}\)</span> והיא חח"ע ועל, ולכן קיימת לה הופכית <span class="math">\(\tan^{-1}\)</span> שמכונה גם "ארקטנגנס", <span class="math">\(\text{arctan}\)</span>. כעת, <span class="math">\(\text{arctan}\left(\text{tan}\right)\)</span> היא פונקציה עם תחום וטווח <span class="math">\(\left(-\frac{\pi}{2},\frac{\pi}{2}\right)\)</span> בזמן ש-<span class="math">\(\text{tan}\left(\text{arctan}\right)\)</span> היא בעלת תחום וטווח <span class="math">\(\mathbb{R}\)</span>.</p>
<p>עכשיו בואו נשכח לרגע מפונקציות ונעבור לדבר על יחסים באופן כללי - אפשר לדבר על "הרכבה" גם בהקשר הזה. נתחיל מהאינטואיציה: הארי פוטר. בספרי הארי פוטר, הארי הוא הבן של לילי פוטר; ולילי פוטר היא אחותה של פטוניה דרסלי. זה אומר שפטוניה היא דודתו של הארי. כל זה איכשהו גם רלוונטי לעלילה אבל בואו נסתכל על זה מנקודת מבט מתמטית. יש לנו שני יחסים שמוגדרים על קבוצת בני האדם: היחס "להיות אחות של" והיחס "להיות הורה של". בואו נסמן את "להיות אחת של" ב-<span class="math">\(R\)</span> ואת "להיות הורה של" ב-<span class="math">\(S\)</span>, ועכשיו נסמן את פטוניה ב-<span class="math">\(a\)</span>, את לילי ב-<span class="math">\(b\)</span> ואת הארי ב-<span class="math">\(c\)</span>, ואנחנו רואים ש"פטוניה היא אחותה של לילי" מתורגם ל-<span class="math">\(\left(a,b\right)\in R\)</span> ו"לילי היא הורה של הארי" מתורגם ל-<span class="math">\(\left(b,c\right)\in S\)</span>.</p>
<p>עכשיו משני אלו אנחנו מסיקים שפטוניה היא הדודה של הארי, מה שאני יכול לסמן ב-<span class="math">\(\left(a,c\right)\in T\)</span> כאשר <span class="math">\(T\)</span> הוא היחס "להיות דודה של". מה הקשר בין היחסים <span class="math">\(R,S\)</span> ובין היחס <span class="math">\(T\)</span>? אני רוצה לומר שהוא קשר של <strong>הרכבה</strong>; הרי ההגדרה של "להיות דודה של" היא בדיוק "להיות אחות של הורה של". אז בואו ננסה לתת הגדרה להרכבת יחסים שתשמר את האינטואיציה הזו.</p>
<p>נניח שנתונים לנו שני יחסים, <span class="math">\(R,S\)</span>, כך ש-<span class="math">\(R\subseteq A\times B\)</span> ו-<span class="math">\(S\subseteq B\times C\)</span>. אפשר לתאר אותם גרפית בצורה הזו:</p>
<p><img src="/new_site/img/2020/05/relation_composition.PNG" alt=""/></p>
<p>באיור הזה הקבוצות <span class="math">\(A,B,C\)</span> מיוצגות כולן על ידי אליפסות עם נקודות בתוכן - כל נקודה מייצגת איבר של הקבוצה. את העובדה ש-<span class="math">\(\left(a,b\right)\in R\)</span> אני מייצג על ידי חץ שיוצא מ-<span class="math">\(a\)</span> ונכנס אל <span class="math">\(b\)</span> (ובדומה בתמונה גם עשיתי חץ מ-<span class="math">\(b\in B\)</span> אל <span class="math">\(c\in C\)</span> כדי להמחיש ש-<span class="math">\(\left(b,c\right)\in S\)</span>). חשוב היה לי להדגיש שהיחסים <span class="math">\(R,S\)</span> הללו הם לא בהכרח פונקציות, אז כללתי באיור נקודות ש"מקלקלות" את התכונות של פונקציות: יש נקודה שממנה יוצאים שני חצים (מקלקל את ה"יחידות") ונקודה שממנה לא יוצאים חצים בכלל (מקלקל את ה"קיום").</p>
<p>עכשיו, סימנתי בכחול את החצים שמחברים את <span class="math">\(a\)</span> אל <span class="math">\(b\)</span> ואת <span class="math">\(b\)</span> אל <span class="math">\(c\)</span> כי שילוב שני החצים הללו יוצר משהו מעניין - הוא יוצר <strong>מסלול</strong> שמוביל אותנו מ-<span class="math">\(a\)</span> אל <span class="math">\(c\)</span> תוך מעבר ב"איבר הביניים" <span class="math">\(b\)</span>. זה בדיוק מה שהרכבת יחסים מנסה לתפוס - מצבים כאלו שבהם קיים מסלול מנקודה אחת אל השניה בעזרת נקודת ביניים<strong> כלשהי</strong>. שימו לב שלא מעניין אותי אם יש יותר מנקודת ביניים אפשרית אחת - אם פטוניה הייתה גם אחותו של ג'יימס פוטר בנוסף לכך שהיא אחותה של לילי פוטר, היא עדיין הייתה דודה של הארי (אבל הספר עצמו היה מקבל טוויסט מוזר למדי). לכן ההגדרה להרכבת פונקציות תתבסס על הכמת הלוגי "קיים" (שאני מסמן ב-<span class="math">\(\exists\)</span>).</p>
<p>אחרי כל ההקדמה הזו הנה סוף סוף ההגדרה:</p>
<p><span class="math">\(R\circ S\triangleq\left\{ \left(a,c\right)\ |\ \exists b\in B:\left(a,b\right)\in R\wedge\left(b,c\right)\in S\right\} \)</span></p>
<p>ובמילים: היחס המורכב <span class="math">\(R\circ S\)</span> כולל את כל הזוגות <span class="math">\(\left(a,c\right)\)</span> כך שקיים איבר ביניים <span class="math">\(b\in B\)</span> שעבורו <span class="math">\(\left(a,b\right)\in R\)</span> ("הצעד הראשון") ו-<span class="math">\(\left(b,c\right)\in S\)</span> ("הצעד השני"). מצד אחד, זו הגדרה פשוטה, כשמבינים מה היא מנסה להשיג; ומצד שני לטעמי זו אחת ההגדרות הקשות ביותר בשלב הזה של לימודי תורת הקבוצות.</p>
<p>עכשיו אני צריך בלב כואב לדבר על שיטת הסימון שבחרתי להשתמש בה. אם תסתכלו באיור, אפשר לראות ש-<span class="math">\(R\)</span> היא בצד שמאל ו-<span class="math">\(S\)</span> בצד ימין. זה בכוונה; זה תואם את האופן שבו בתוך זוג סדור כמו <span class="math">\(\left(a,b\right)\)</span> ה"כיוון" הוא מ-<span class="math">\(a\)</span> אל <span class="math">\(b\)</span>. זה הוביל אותי לסמן את ההרכבה, <span class="math">\(R\circ S\)</span>, בצורה כזו שהאיבר שפועל <strong>קודם</strong> (<span class="math">\(R\)</span>, שמעביר איבר של <span class="math">\(A\)</span> לאיבר של <span class="math">\(B\)</span>) נמצא בצד שמאל. זה <strong>הפוך לגמרי</strong> לסימון שבו השתמשתי <strong>לפני רגע בפוסט הזה</strong> כשדיברתי על הרכבת פונקציות. שם, <span class="math">\(gf\)</span> משמעותו הייתה "קודם להפעיל את <span class="math">\(f\)</span> ואז את <span class="math">\(g\)</span>" כי ככה זה עובד עם סימון הפעלת פונקציות: <span class="math">\(g\left(f\left(x\right)\right)\)</span> אומר בדיוק שקודם מפעילים את <span class="math">\(f\)</span> ואז את <span class="math">\(g\)</span>.</p>
<p>העניין הוא שפונקציות <strong>הן יחסים</strong> והרכבת פונקציות <strong>היא הרכבת יחסים</strong>. אז יש לי שני סימונים שונים <strong>והפוכים</strong> לאותו דבר. ומילא אם זה היה רק אצלי, אבל כל טקסט מתמטי שמתעסק גם בהרכבת פונקציות וגם בהרכבת יחסים ייאלץ להתמודד עם הניג'וס הזה.</p>
<p>פתרון נפוץ מאוד הוא פשוט להגדיר הרכבת יחסים הפוך, כמו הרכבת פונקציות: <span class="math">\(S\circ R\)</span> יתאר את מה שכתבתי עד כה למעלה. פתרון אחר, שבו אני נוקט, הוא פשוט לא לסמן הרכבת פונקציות עם <span class="math">\(\circ\)</span> ולשמור את הסימן הזה להרכבת יחסים (כלומר, <span class="math">\(f\circ g\)</span> יהיה התיאור שלי להרכבת הפונקציות <span class="math">\(f,g\)</span> כשאני חושב עליה בתור הרכבת יחסים; זה אומר ש-<span class="math">\(f\circ g\equiv gf\)</span>). כמו רוב ענייני הסימון במתמטיקה זה לא <strong>באמת</strong> חשוב מה בוחרים, כל עוד זה מוסבר מספיק ברור כדי לא להטעות את הקוראים.</p>
<p>אחרי שסילקנו את זה מהדרך, בואו נעשה קצת כיף! </p>
<p>התכונה החשובה ביותר של הרכבת יחסים ופונקציות, שאחראית לתכונות האלגבריות שלה שנראה בהמשך, היא <strong>אסוציאטיביות</strong>. כלומר, אם יש לנו הרכבה של <strong>שלושה</strong> יחסים שמתוארת בתור זוג הרכבות, <span class="math">\(R\circ S\circ T\)</span>, זה לא משנה איזו מההרכבות אנחנו מבצעים קודם - תמיד נקבל בסוף את אותו יחס. פורמלית, <span class="math">\(\left(R\circ S\right)\circ T=R\circ\left(S\circ T\right)\)</span>. ההוכחה של זה מייגעת למדי וכמובן שאדלג עליה ("להשאיר את הוכחת האסוציאטיביות כתרגיל לקורא" זו שיטת הפעולה של כל טקסט מתמטי מיום שהומצאה האלגברה) אבל האינטואיציה פה די פשוטה כשחוזרים לחשיבה על הרכבת יחסים בתור "למצוא נקודות שמחבר ביניהן מסלול" כי קיום מסלול לא תלוי בשאלה אם קודם אנחנו מסתכלים על שלוש הנקודות הראשונות שבו (<span class="math">\(R\circ S\)</span>) או שלוש הנקודות האחרונות (<span class="math">\(S\circ T\)</span>).</p>
<p>עכשיו, מרגע שהמתמטיקאים ממציאים פעולה, הם רוצים לבצע אותה שוב ושוב כמה שרק אפשרי. במקרה הזה אפשר לדבר על זה כאשר מרכיבים יחס <strong>עם עצמו</strong>. כדי שאפשר יהיה לעשות את זה, צריך שהתחום והטווח של היחס יהיו אותה קבוצה. כלומר, ניקח יחס <span class="math">\(R\subseteq A\times A\)</span> וכעת אפשר להגדיר <span class="math">\(R^{2}=R\circ R\)</span> ו-<span class="math">\(R^{3}=R\circ R\circ R\)</span> וכדומה. בואו ניתן הגדרה אפילו יותר פורמלית.</p>
<p>ראשית, אני משתמש בסימון של חזקה לא במקרה; זה המשך של האנלוגיה בין הרכבה ובין כפל. אז בואו ניזכר איך מגדירים חזקה טבעית במספרים ממשיים: ראשית מגדירים <span class="math">\(a^{0}\triangleq1\)</span> לכל <span class="math">\(a\)</span> (כן, <a href="https://gadial.net/2018/01/01/zero_power_equals_one/">אני מגדיר ככה</a> אפילו עבור <span class="math">\(a=0\)</span>). כעת מגדירים אינדוקטיבית <span class="math">\(a^{n+1}\triangleq a\cdot a^{n}\)</span>. המשמעות של לומר "מגדירים אינדוקטיבית" היא שמניחים ש-<span class="math">\(a^{n}\)</span> כבר הוגדר, ועכשיו משתמשים בו כדי להגדיר את <span class="math">\(a^{n+1}\)</span>. למשל אם כבר הגדרתי את <span class="math">\(a^{3}\)</span> אז <span class="math">\(a^{4}\)</span> יוגדר להיות <span class="math">\(a^{3}\cdot a\)</span>.</p>
<p>ההגדרה של חזקה של יחס תהיה זהה, אבל אנחנו צריכים אנלוג ל-<span class="math">\(1\)</span>. כבר היה לנו כזה במקרה של פונקציות - פונקציית הזהות. אז בואו ניקח את הפונקציה הזו ונחשוב עליה בתור יחס:</p>
<p><span class="math">\(I_{A}\triangleq\left\{ \left(a,a\right)|\ a\in A\right\} \)</span></p>
<p>ועכשיו אפשר לתת פורמלית את ההגדרה האינדוקטיבית:</p>
<p><span class="math">\(R^{0}\triangleq I_{A}\)</span></p>
<p><span class="math">\(R^{n+1}\triangleq R\circ R^{n}\)</span></p>
<p>קל לראות ש-<span class="math">\(R^{1}=R\)</span> בהגדרה הזו, בצורה עקבית עם מה שאנחנו רגילים שחזקת 1 עושה. יותר מזה, אפשר לראות גם שחוקי החזקות הרגילים מתקיימים: <span class="math">\(R^{n+m}=R^{n}\circ R^{m}\)</span> ו-<span class="math">\(R^{nm}=\left(R^{n}\right)^{m}\)</span>. ההוכחה קצת מייגעת אבל לא באמת שונה מההוכחה עבור חוקי החזקות הרגילים - מילת המפתח שגורמת לדברים להתנהג דומה היא ה<strong>אסוציאטיביות</strong> של פעולת ההרכבה.</p>
<p>זה היה נחמד, אבל צריך להיזהר לא לקחת את ההקבלה יותר מדי רחוק - כשמגיעים לחזקות <strong>שליליות</strong> דברים מוזרים מתחילים לקרות. ראשית, איך אני מגדיר חזקה שלילית? כבר ראינו את ההגדרה <span class="math">\(R^{-1}\triangleq\left\{ \left(b,a\right)\ |\ \left(a,b\right)\in R\right\} \)</span>. עכשיו אפשר להשתמש בה כדי להגדיר חזקה שלילית כללית: <span class="math">\(R^{-n}\triangleq\left(R^{-1}\right)^{n}\)</span>. כלומר, לוקחים את היחס <span class="math">\(R^{-1}\)</span> (שהוא יחס טוב ונחמד שקיים בזכות עצמו) ואז מסתכלים על החזקה ה-<span class="math">\(n\)</span>-ית שלו.</p>
<p>כל זה סבבה, אבל שימו לב שממש לא בהכרח מתקיים <span class="math">\(R\circ R^{-1}=I_{A}\)</span>, כלומר <span class="math">\(R^{-1}\)</span> הוא לא הופכי של <span class="math">\(R\)</span> במובן האלגברי של המילה. למשל, אם <span class="math">\(A=\left\{ 1,2\right\} \)</span> ו-<span class="math">\(R=\left\{ \left(1,2\right)\right\} \)</span> אז <span class="math">\(R\circ R^{-1}=\left\{ \left(1,1\right)\right\} \)</span> וזה בוודאי לא <span class="math">\(I_{A}\)</span> כי <span class="math">\(\left(2,2\right)\in I_{A}\)</span>, כלומר עשויים להיות חסרים לי איברים. גרוע מכך, עשויים לצוץ לי איברים שלא אמורים להיות שם: למשל אם <span class="math">\(A=\left\{ 1,2,3\right\} \)</span> ו-<span class="math">\(R=\left\{ \left(2,1\right),\left(3,1\right)\right\} \)</span> אני אקבל <span class="math">\(\left(2,3\right)\in R\circ R^{-1}\)</span>. זה כמובן מצער מאוד, אבל תראו, קסם! אם <span class="math">\(R\)</span> היא <strong>פונקציה הפיכה</strong> אז לא קשה להוכיח שכן יתקיים <span class="math">\(R\circ R^{-1}=I_{A}\)</span> וזה מוביל לכך שלפונקציות הפיכות יש מבנה אלגברי מאוד יפה שבו מעורבת פעולה אסוציאטיבית עם איבר אדיש והופכי - מה שנקרא <strong>חבורה</strong>. אבל זה סיפור אחר <a href="https://gadial.net/2017/02/01/group_definition/">ויסופר בפעם אחרת</a>.</p>
<p>עכשיו, אחרי שטיפה התרגלנו לחזקות של יחסים, בואו נחזור אל התכונות הנחמדות שהגדירו יחס שקילות - רפלקסיביות, סימטריה וטרנזיטיביות. כל אחת מהן ניתנת לניסוח פשוט באמצעות חזקות של יחסים:</p>
<ol> <li>רפלקסיביות של <span class="math">\(R\subseteq A\times A\)</span> פירושה ש-<span class="math">\(\left(a,a\right)\in R\)</span> לכל <span class="math">\(a\in A\)</span>. כלומר, זה פשוט אומר ש-<span class="math">\(I_{A}\subseteq R\)</span>, או במילים אחרות <span class="math">\(R^{0}\subseteq R\)</span>.</li>


<li>סימטריה של <span class="math">\(R\subseteq A\times A\)</span> פירושה שאם <span class="math">\(\left(a,b\right)\in R\)</span> אז גם <span class="math">\(\left(b,a\right)\in R\)</span>. כלומר, ש-<span class="math">\(R^{-1}\subseteq R\)</span>.</li>


<li>טרנזיטיביות של <span class="math">\(R\subseteq A\times A\)</span> פירושה שאם <span class="math">\(\left(a,b\right)\in R\)</span> וגם <span class="math">\(\left(b,c\right)\in R\)</span> אז גם <span class="math">\(\left(a,c\right)\in R\)</span>. כלומר, זה פשוט אומר ש-<span class="math">\(R^{2}\subseteq R\)</span> (ומכך נובע <span class="math">\(R^{n}\subseteq R\)</span> לכל <span class="math">\(n\ge2\)</span>).</li>

</ol>

<p>אם כל התכונות הללו מתקיימות גם יחס אז <span class="math">\(R\)</span> הוא יחס שקילות, והנה קיבלנו דרך אחרת לתאר יחס שקילות, באמצעות חזקות: <span class="math">\(R\)</span> הוא יחס שקילות אם ורק אם <span class="math">\(R^{k}\subseteq R\)</span> לכל <span class="math">\(k\in\mathbb{Z}\)</span>.</p>
<p>לסיום, אני לא יכול להתאפק וחייב להכניס פנימה עוד קשר מתמטי שעשוי להישמע מוזר ממבט ראשון אבל כשחושבים עליו רגע הוא מובן מאליו לגמרי - הרכבת יחסים ממש מזכירה כפל מטריצות. אם אתם לא מכירים או זוכרים כפל מטריצות, יש לי <a href="https://gadial.net/2011/10/06/matrix_product/">פוסט על זה</a> כאן, ועכשיו אניח שכן מכירים את הרעיון, אבל אזכיר את ההגדרה: בכפל מטריצות יש לנו שתי מטריצות <span class="math">\(R,S\)</span> מעל חוג מסויים (כלומר, משהו שמוגדרות עליו פעולות חיבור וכפל). כדי לכפול אותן, צריך ש-<span class="math">\(R\)</span> תהיה ממימד <span class="math">\(n\times m\)</span> ו-<span class="math">\(S\)</span> ממימד <span class="math">\(m\times t\)</span> (כלומר, מספר העמודות של <span class="math">\(R\)</span> יהיה שווה למספר השורות של <span class="math">\(S\)</span>) ואז מגדירים <span class="math">\(\left[RS\right]_{ij}=\sum_{k=1}^{m}\left[R\right]_{ik}\left[S\right]_{kj}\)</span>. אני אפילו אכתוב את זה קצת יותר במפורש כך שרואים את פעולות החיבור והכפל:</p>
<p><span class="math">\(\left[RS\right]_{ij}=\left[R\right]_{i1}\cdot\left[S\right]_{1j}+\cdots+\left[R\right]_{1m}\left[S\right]_{mj}\)</span></p>
<p>איך זה קשור ליחסים? ובכן, נניח שיש לי יחסים <span class="math">\(R\subseteq A\times B\)</span> ו-<span class="math">\(S\subseteq B\times C\)</span>, כך ש-<span class="math">\(A,B,C\)</span> כולן קבוצות סופיות. נסמן את האיברים שלהן: <span class="math">\(A=\left\{ a_{1},\dots,a_{n}\right\} \)</span> ו-<span class="math">\(B=\left\{ b_{1},\dots,b_{m}\right\} \)</span> ו-<span class="math">\(C=\left\{ c_{1},\dots,c_{t}\right\} \)</span>. עכשיו אפשר לייצג יחס באמצעות מטריצה:</p>
<p><span class="math">\(\left[R\right]_{ij}=\begin{cases} 1 &amp; \left(a_{i},b_{j}\right)\in R\\ 0 &amp; \left(a_{i},b_{j}\right)\notin R \end{cases}\)</span></p>
<p><span class="math">\(\left[S\right]_{ij}=\begin{cases} 1 &amp; \left(b_{i},c_{j}\right)\in S\\ 0 &amp; \left(b_{i},c_{j}\right)\notin S \end{cases}\)</span></p>
<p>כלומר, המטריצות הללו חיות מעל החוג <span class="math">\(\mathbb{Z}_{2}\)</span>. בחוג הזה יש לנו את פעולות הכפל והחיבור הרגילות מודולו 2, אבל הן <strong>לא יעניינו</strong> אותנו הפעם אלא מה שאפשר לקבל מהן. בגלל שבחוג הזה מתקיים ש-<span class="math">\(a^{2}=a\)</span> לכל <span class="math">\(a\)</span>, קוראים לו <strong>חוג בוליאני</strong> ואפשר לקבל ממנו משהו שנקרא <strong>אלגברה בוליאנית</strong>. לא אכנס לפרטים המלאים, אבל הרעיון הוא שאפשר להגדיר פעולות חדשות, <span class="math">\(a\wedge b=a\cdot b\)</span> ו-<span class="math">\(a\vee b=a+b+a\cdot b\)</span> שמתנהגות מאוד נחמד - בהקשר של <span class="math">\(\mathbb{Z}_{2}\)</span> הפעולות הללו מתנהגות כמו "וגם" (עבור <span class="math">\(\wedge\)</span>) ו"או" (עבור <span class="math">\(\vee\)</span>) שאנחנו מכירים מלוגיקה. צריך לשים לב שעם שתי הפעולות הללו <span class="math">\(\mathbb{Z}_{2}\)</span> <strong>אינו</strong> חוג, כי אין נגדי חיבורי לפעולת ה-<span class="math">\(\vee\)</span> (ולכן היא לא יכולה לתפקד בתור פעולת החיבור של חוג) לכן אמרתי שנקבל דמיון לכפל מטריצות ולא ממש מקרה פרטי.</p>
<p>עכשיו, זוכרים את ההגדרה של הרכבת יחסים?</p>
<p><span class="math">\(R\circ S\triangleq\left\{ \left(a,c\right)\ |\ \exists b\in B:\left(a,b\right)\in R\wedge\left(b,c\right)\in S\right\} \)</span></p>
<p>במקום לכתוב <span class="math">\(\exists\)</span>, אפשר, במקרה שבו הקבוצות <span class="math">\(A,B,C\)</span> סופיות, לכתוב משהו יותר מפורש בשביל התנאי שבפנים:</p>
<p><span class="math">\(\left[\left(a,b_{1}\right)\in R\wedge\left(b_{1},c\right)\in S\right]\vee\dots\vee\left[\left(a,b_{m}\right)\in R\wedge\left(b_{m},c\right)\in S\right]\)</span></p>
<p>ובמילים - או שאפשר לעבור מ-<span class="math">\(a\)</span> אל <span class="math">\(c\)</span> עם איבר הביניים <span class="math">\(b_{1}\)</span>, או שאפשר לעבור עם <span class="math">\(b_{2}\)</span> וכן הלאה, עד <span class="math">\(b_{m}\)</span>.</p>
<p>כלומר, קיבלנו ש-<span class="math">\(\left[R\circ S\right]_{ij}\)</span> מוגדר בדיוק כמו כפל מטריצות, פרט לכך שאנחנו מחליפים את התפקידים של חיבור וכפל ב-<span class="math">\(\wedge\)</span> וב-<span class="math">\(\vee\)</span>. חמוד? אני מקווה, וגם נותן אינטואיציות מסויימות, אבל אני בעיקר מקווה שחמוד.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/new_site/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>