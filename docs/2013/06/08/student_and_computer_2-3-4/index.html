<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>פרוייקט &#34;התלמיד והמחשב&#34;, בעיות 2-3-4 - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <meta name="description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://gadial.net/2013/06/08/student_and_computer_2-3-4/">
    <meta property="og:title" content="פרוייקט &#34;התלמיד והמחשב&#34;, בעיות 2-3-4">
    <meta property="og:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta property="og:site_name" content="לא מדויק">
    

<meta property="og:image" content="http://gadial.net/img/main/default-card.png" />


        
    <!-- Twitter -->
    

<meta name="twitter:card" content="summary">


    <meta name="twitter:url" content="https://gadial.net/2013/06/08/student_and_computer_2-3-4/">
    <meta name="twitter:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta name="twitter:site" content="@" />
    <meta property="twitter:title" content="פרוייקט &#34;התלמיד והמחשב&#34;, בעיות 2-3-4">
    

<meta property="twitter:image" content="http://gadial.net/img/main/default-card.png" />


    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="לא מדויק - RSS Feed" href="/feed.xml">
       
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Hamburger menu button */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.8em;
            color: white;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .menu-toggle:hover {
            opacity: 0.8;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .top-nav .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-nav .site-title {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0;
                padding: 10px 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            /* Hide nav links by default on mobile */
            .top-nav .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                margin-top: 10px;
            }
            
            /* Show when expanded */
            .top-nav .nav-links.expanded {
                display: flex;
            }
            
            .top-nav .nav-links > a {
                text-align: center;
                padding: 12px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box {
                width: 100%;
                flex-direction: column;
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box input {
                width: 100%;
                margin-bottom: 5px;
                min-width: 0;
            }
            
            .top-nav .search-box button {
                width: 100%;
            }
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="site-title">
                <a href="/" style="color: white; text-decoration: none;">לא מדויק</a>
                <button class="menu-toggle" onclick="toggleMobileMenu()" aria-label="תפריט">
                    ☰
                </button>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <a href="/categories/">קטגוריות</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2013/05/27/student_and_computer_1/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">פרוייקט &#34;התלמיד והמחשב&#34; יוצא לדרך!</span>
            </a>
            

            
            <a href="/2013/06/15/p_vs_np_on_abelian_groups_intro/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">על P=NP מעל חבורות אבליות - מבוא שלם</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>פרוייקט &#34;התלמיד והמחשב&#34;, בעיות 2-3-4</h1>
            <div class="post-meta">
                <span class="date">2013-06-08</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/תכנות.html">תכנות</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/פרוייקט &#34;התלמיד והמחשב&#34;.html">פרוייקט &#34;התלמיד והמחשב&#34;</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>התרגילים הראשונים שיש בספר של "<a href="http://www.gadial.net/2013/05/27/student_and_computer_1/">התלמיד והמחשב</a>" הם קלים בצורה מאכזבת, מה שגורם לעניין להיראות די רפטטיבי; לכן אני אשתדל בפתרונות שלי לא בהכרח ללכת לכיוון של הפתרון היעיל או הפשוט ביותר, אלא אנסה לנצל כל פתרון כדי להראות משהו חדש בשפות שאני מתעסק איתן. במידת האפשר.</p>
<h1>בעיה מס' 2</h1>
<p>הבעיה פשוטה בערך כמו בעיה מס' 1: נתונות לנו שתי זווית במשולש, ועלינו להחזיר את הזווית השלישית.</p>
<p>מבחינה מתמטית זה תרגיל חשבוני פשוט: אם הזוויות הן <span class="math">\(a,b\)</span> אז הזווית השלישית היא <span class="math">\(180-a-b\)</span>. זאת תחת ההנחה שאנחנו מודדים זוויות במעלות ולא, נאמר, ב<a href="http://www.gadial.net/2008/01/11/radians/">רדיאנים</a>, ושאנחנו מדברים על משולשים בגאומטריה אוקלידית ולא ב<a href="gadial.net/Presentations/NoneuclideanGeometry.pdf‎">גאומטריות לא אוקלידיות</a>, שבהן סכום הזוויות במשולש יכול להיות קטן מ-180 מעלות. אבל אלו מן הסתם דקויות מתמטיות שאליהן ממש לא התכוון כותב הספר, והוא גם לא מזכיר אותן.</p>
<p>אם כן, הנה קוד ברובי שפותר את הבעיה:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="no">ANGLES_IN_TRIANGLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">180</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Please insert two angles of the triangle&quot;</span>
<span class="n">first_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">gets</span><span class="o">.</span><span class="n">to_i</span>
<span class="n">second_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">gets</span><span class="o">.</span><span class="n">to_i</span>
<span class="n">third_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">ANGLES_IN_TRIANGLE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">first_angle</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">second_angle</span><span class="p">)</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;The angles in the triangle are </span><span class="si">#{</span><span class="n">first_angle</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">second_angle</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">third_angle</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>



</div>

<p><strong></strong>הקוד הזה מאוד דומה לפתרון של תרגיל מס' 1, אבל הוספתי בו מרכיב חשוב בשפות תכנות - קבועים. השורה הראשונה בתוכנית מציבה את הערך המספרי 180 בקבוע ANGLES_IN_TRIANGLE. מה זה אומר שהמשתנה הזה הוא "קבוע"? פירוש הדבר הוא שמרגע שהצבנו בו ערך, בשורה הראשונה שבה הוא הופיע, לא ניתן לשנות יותר את הערך שנמצא בתוכו (למען האמת, המפרש של רובי יתן לנו <strong>אזהרה</strong> אבל לא יגרום לתוכנית לקרוס). אז בשביל מה צריך משתנה מוזר כזה שאי אפשר לשנות את הערך שלו? למה לא לכתוב בתוכנית 180 וזהו? או, טוב ששאלתם.</p>
<p>מה שיש לנו כאן הוא דוגמה קלאסית לסיטואציה של "התוכנית פשוטה מדי אז קשה להבין בשביל מה צריך לעשות כך וכך". בעולם האמיתי תוכניות הן לא בנות חמש שורות אלא בנות עשרות-מאות-אלפי-מיליוני שורות, ואז יש יתרון גדול בהחלפה של מספרים בקבועים עם שמות בעלי משמעות. הבה ונמנה כמה:</p>
<ol>
    <li>קריאות: מישהו שקורא את הקוד בדרך כלל קורא רק <strong>חלק</strong> ממנו כאשר מדובר על קוד גדול. אם הוא ייתקל במספר 180 באמצע הקוד, הוא לא בהכרח יבין מההקשר מה המספר הזה בא לייצג. זה ייראה לו כמו "מספר קסם". אם לעומת זאת הוא יתקל בשם אינפורמטיבי יהיה לו יותר קל להבין מה הולך כאן.</li>
    <li>קלות שינוי: אם יש הרבה פרמטרים שבהם התוכנית שלנו תלויה ואנחנו עשויים לרצות לשנות אותם, עדיף בהרבה שהם יוגדרו כקבועים במקום גלוי בתחילת התוכנית ושנשנה אותם שם, מאשר שנצטרך לחטט בתוך הקוד ולחפש את המקום שבו משתמשים בהם בכל פעם שבה אנחנו רוצים לשנות.</li>
    <li>מניעת התנגשויות: נניח שיש לנו בתוכנית כמה פרמטרים בעלי משמעויות שונות, שבמקרה יוצאים כולם 4. נניח עכשיו שאנחנו רוצים לשנות את אחד הפרמטרים הללו ל-5 מבלי לשנות את היתר. אם לא נגדיר את הפרמרטים בתוך קבועים אלא פשוט נכתוב 4 בקוד בכל מקום, איך נשנה? אם נשנה כל מקום שבו מופיע 4 ל-5 אנחנו משנים גם את הערך של פרמטרים שלא רצינו לשנות!</li>
    <li>קבועים יכולים לקפל בתוכם מספרים שהם תוצאה של חישוב מסובך יחסית, ובפרט כזה שלא ניתן לבצע מראש ולכתוב בתוכנית אלא יהיה תלוי בפרמטרים כלשהם שהתוכנית תדע רק אחרי תחילת ריצתה (תחשבו למשל על תוכנית שקוראת קבצי קונפיגורציה חיצוניים).</li>
</ol>
<p>בקיצור, קבועים זה טוב. כלל ברזל אחד בתכנות הוא שרצוי מאוד שלא יהיו "מספרי קסם" בתוך הקוד - מי שכותב מספר מפורש כחלק מהקוד ולא בתוך קבוע צריך לעצור ולשאול את עצמו האם זה באמת רעיון טוב. לרוב 0 ו-1 יהיו חריגים ברורים מהכלל הזה, ויש עוד מקרים שבהם המשמעות של המספר ברורה לחלוטין מההקשר, אבל כשאנחנו נותנים כללים לתכנות נכון, אנחנו תמיד מדברים על המקרה הממוצע, לא על כל המקרים.</p>
<p>קצת על התחביר: בשפות אחרות נהוג לסמן שמשתנה הוא קבוע על ידי הוספת constant לפני הצהרה עליו או משהו בסגנון. ברובי לא נהוג להצהיר במפורש על משתנים, ולכן הכלל הוא שקבוע הוא משתנה שהשם שלו מתחיל באות גדולה. מכיוון שבכל מקרה זה נוהג די נפוץ לכתוב שמות של קבועים כשכל האותיות שבהן גדולות, זה גם מה שנהוג לעשות ברובי (אבל מבחינת התחביר זה לא הכרחי). זו, אגב, תכונה קצת מעצבנת של רובי, מכיוון שלפעמים אני כן רוצה להגדיר משתנה שהשם שלו מתחיל באות גדולה (למשל, כשאני מתכנת אלגוריתם כלשהו מתוך מאמר, כך שבמאמר עצמו המשתנים קיבלו שמות שהן אותיות גדולות), אבל שאלו יהיו הצרות שלנו.</p>
<p>ומה קורה בהסקל?</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="nf">angles_in_triangle</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">180</span>
<span class="nf">third_triangle_angle</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span>
<span class="nf">third_triangle_angle</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">angles_in_triangle</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>

<span class="nf">main</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">putStrLn</span><span class="w"> </span><span class="s">&quot;Please insert two angles of the triangle&quot;</span>
<span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">getLine</span>
<span class="w">  </span><span class="n">b</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">getLine</span>
<span class="w">  </span><span class="n">putStrLn</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;The angles in the triangle are &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">show</span><span class="p">(</span><span class="n">third_triangle_angle</span><span class="w"> </span><span class="p">(</span><span class="n">read</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">read</span><span class="w"> </span><span class="n">b</span><span class="p">)))</span>
</code></pre></div>


</div>

<p>גם פה יש לנו קוד שדומה מאוד לזה של תרגיל 1. ההצהרה על הקבוע בהתחלה לא דורשת לא כיתוב של constant ולא אותיות גדולות או שום דבר אחר, עקב הגישה של הסקל לפיה "הכל הוא פונקציה". בעצם, כשאני כותב ש-angles_in_triangle שווה ל-180, אני לא אומר "angles_in_triangle הוא מספר שהערך שלו הוא 180" אלא ש-"angles_in_triangle היא <strong>פונקציה</strong> שמקבלת 0 קלטים ומחזירה את הפלט הקבוע 180". זה נשמע שקול, אבל מבחינה רעיונית יש הבדלים, והבסיסי שבהם הוא שהסקל לא מרשה לנו להגדיר מחדש פונקציות באמצע התוכנית, כך שאם אני אנסה להציב ב-angles_in_triangle ערך אחר, התוכנית לא תתקמפל. הסיבה שאני לא כותב את שם הקבוע באותיות גדולות היא שבהסקל באותיות גדולות מתחילים בכלל טיפוסים של ערכים (כמו Int שכבר ראינו) ואילו שמות של פונקציות מתחילים תמיד באותיות קטנות. כל שפה והמוזרויות שלה...</p>
<p>ועכשיו לג'אווהסקריפט:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Targil 2<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="w">    </span><span class="nx">compute_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">ANLGES_IN_TRIANGLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">180</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ANLGES_IN_TRIANGLE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">);</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">c</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  angle a = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;textbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;a&quot;</span> <span class="na">value </span><span class="o">=</span> <span class="s">&quot;0&quot;</span> <span class="na">onkeyup </span><span class="o">=</span> <span class="s">&quot;compute_angle()&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
  angle b = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;textbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;b&quot;</span> <span class="na">value </span><span class="o">=</span> <span class="s">&quot;0&quot;</span> <span class="na">onkeyup </span><span class="o">=</span> <span class="s">&quot;compute_angle()&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
  angle c = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;textbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;c&quot;</span> <span class="na">value </span><span class="o">=</span> <span class="s">&quot;180&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>


</div>

<p>כאן לכאורה אני מצהיר על הקבוע כמו שצריך - כותב var ואת השם שלו באותיות גדולות. רק שלמעשה, כאן זה אפילו פחות חזק מאשר ברובי - מבחינת ג'אווהסקריפט מדובר על משתנה לכל דבר ואפשר להציב בו ערכים חדשים. אני לא מכיר דרך להגדיר קבועים בג'אווהסקריפט (למרות שאם ממש מתאמצים יש דרכים למנוע ממשתנים מסויימים להשתנות).</p>
<p>רגע, אולי תגידו, אבל קראנו שאפשר לכתוב const לפני שמות של משתנים וזה עובד! זה נכון, אבל זה נכון רק אם הדפדפן שמריץ את קוד הג'אווהסקריפט הוא chrome; למיטב ידיעתי דפדפנים אחרים לא תומכים בתכונה הזו, מה שאומר שזה פשע נגד האנושות להשתמש בה. כאשר כותבים קוד שמטרתו להיות מוצג בדפדפן, רצוי לעשות זאת בצורה שתבטיח שהוא יעבוד באותה הצורה בכל הדפדפנים האפשריים, ושאם הוא לא יעבוד בדפדפן כלשהו זה יהיה בגלל שאותו דפדפן החליט לסטות מהסטנדרט, ולא הפוך. הסיבה המרכזית לקיומם של כל אתרי ה"האתר מוצג רק באקספלורר 6, אנא תעיפו את הפיירפוקס שלכם לכל הרוחות" שחלקנו עדיין זוכרים בתיעוב היא בדיוק זו - שאנשים כתבו רק מתוך מחשבה על הדפדפן האיום והנורא שהיה אקספלורר 6 ואפילו לא טרחו לבדוק שהקוד שלהם רץ על פיירפוקס (זה לא רק עניין של שימוש בהרחבות לא סטנדרטיות של השפה; זה גם עניין של "באקספלורר 6 יש באג, אז אני אשנה את התוכנית החוקית שלי בצורה כזו שהבאג לא ישפיע עליה, אבל במחיר זה שהתוכנית כבר לא תרוץ טוב בדפדפן שאין בו את הבאג").</p>
<p>בואו נעבור עכשיו לבעיה מס' 3, שקצת מעליבה אותי למען האמת:</p>
<h1>בעיה מס' 3</h1>
<p>בעיה מס' 3 היא זו: נתון משולש שווה שוקיים ונתונה זווית הבסיס בו. מהי זווית הראש?</p>
<p>זו שאלה מעצבנת כי היא <strong>מקרה פרטי</strong> של השאלה הקודמת, כאשר שתי הזוויות שמתקבלות כקלט הן שוות. זה אומר שהקוד הולך לצאת <strong>פשוט יותר</strong> מאשר הקוד הקודם. אז איך אפשר לעשות איתו משהו מעניין? ברובי אני אציג משהו חדש - קלט מתוך שורת הפקודה ולא מתוך הקלדות המשתמש:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="no">ANGLES_IN_TRIANGLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">180</span>
<span class="n">base_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">to_i</span>
<span class="n">head_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">ANGLES_IN_TRIANGLE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">base_angle</span><span class="p">)</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;The head angle in an isosceles triangle with base angle </span><span class="si">#{</span><span class="n">base_angle</span><span class="si">}</span><span class="s2"> is </span><span class="si">#{</span><span class="n">head_angle</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>


</div>

<p>הדבר החדש והמעניין כאן הוא הקבוע ARGV שצץ לו פתאום. כדי להבין אותו צריך להבין איך מריצים תוכניות בדרך כלל. רובנו רגילים פשוט ללחוץ על אייקון של קובץ ההרצה, אבל מה שקורה כשלוחצים על האייקון הזה הוא שמורצת <strong>פקודה</strong> כלשהי. לפעמים הפקודה כוללת רק את שם התוכנית, אבל לעתים קרובות אחרי שם התוכנית מופיעים עוד פרמטרים. הפרמטרים הללו הם מחרוזות, כשרווחים מפרידים בין כל שני פרמטרים. כשהתוכנית מתחילה לרוץ, מאותחל קבוע שנקרא ARGV שמכיל <strong>רשימה</strong> של כל הפרמטרים הללו. אני עדיין לא רוצה לדבר על מה זה בדיוק רשימות, ולכן בינתיים נסתפק בכך שלכתוב סוגריים מרובעים עם אפס בתוכם אחרי ARGV ניגש לאיבר הראשון ברשימה הזו.</p>
<p>בשביל מה העברת פרמטרים כזו לתוכנית טובה? למה לא להשתמש ב-gets? ובכן, זה פשוט עניין של נוחות - למי שמריץ את התוכנית נוח לכתוב את שם התוכנית ואז את הפרמטרים במקום לכתוב את שם התוכנית, ללחוץ אנטר, להקיש פרמטר, ללחוץ אנטר... וכדומה. זה גם עושה קטעי קוד שכוללים קריאה לתוכניות קריאים ופשוטים יותר.</p>
<p>עכשיו בואו נראה את התוכנית בהסקל. אני לא הולך לקרוא פרמטרים משורת הפקודה בה כי האופן שעושים את זה בהסקל הוא טיפה יותר מסובך, אז נעזוב את זה לבינתיים. תחת זאת אני אדגים משהו פשוט אחר: את הפונקציה ה"חדשה" של תרגיל 3 אני אכתוב בעזרת זו של תרגיל 2:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="nf">angles_in_triangle</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">180</span>

<span class="nf">third_triangle_angle</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span>
<span class="nf">third_triangle_angle</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">angles_in_triangle</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>

<span class="nf">head_triangle_angle</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Int</span>
<span class="nf">head_triangle_angle</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">third_triangle_angle</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">base</span>

<span class="nf">main</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">putStrLn</span><span class="w"> </span><span class="s">&quot;Please insert the base angle of the triangle&quot;</span>
<span class="w">  </span><span class="n">base</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">getLine</span>
<span class="w">  </span><span class="n">putStrLn</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;The angles in the triangle are &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">show</span><span class="p">(</span><span class="n">head_triangle_angle</span><span class="w"> </span><span class="p">(</span><span class="n">read</span><span class="w"> </span><span class="n">base</span><span class="p">)))</span>
</code></pre></div>


</div>

<p>ורק בג'אווהסקריפט אין לי רעיון למשהו יצירתי לעשות. אין ARGV בג'אווהסקריפט כי התוכניות לא מורצות משורת הפקודה. מה שכן אפשר לעשות בג'אווהסקריפט הוא לקבל פרמטרים מהדפדפן, כחלק מהבקשה שהדפדפן מבצע כשהוא מבקש מהשרת את הדף; אני מעדיף לא להיכנס לפרטים הללו כרגע, מכיוון שאין מנגנון פשוט שמובנה בשפה ומאפשר להשיג אותם - צריך טיפה לעבוד או להשתמש בספריה סטנדרטית חשובה ביותר (jQuery) שאני נמנע מלהציג בינתיים. אז הנה הקוד הסתמי למדי:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Targil 3<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="w">    </span><span class="nx">compute_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">ANLGES_IN_TRIANGLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">180</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">base_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;base&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">head_angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ANLGES_IN_TRIANGLE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="nx">base_angle</span><span class="o">*</span><span class="mf">2</span><span class="p">);</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;head&quot;</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">head_angle</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  Base angle = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;textbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;base&quot;</span> <span class="na">value </span><span class="o">=</span> <span class="s">&quot;0&quot;</span> <span class="na">onkeyup </span><span class="o">=</span> <span class="s">&quot;compute_angle()&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
  Head angle = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;textbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;head&quot;</span> <span class="na">value </span><span class="o">=</span> <span class="s">&quot;180&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>


</div>

<p>טוב, מספיק עם זוויות ומשולשים ומלבנים, בואו נעבור לבעיה מס' 4:</p>
<h1>בעיה מס' 4</h1>
<p>בבעיה מס' 4 אנחנו צריכים לקלוט מספר כלשהו, לאו דווקא מספר שלם, ו<strong>לעגל</strong> אותו אל המספר השלם הקרוב ביותר, תוך המוסכמה שאם המספר שקיבלנו נמצא בדיוק בין שני מספרים שלמים, מעגלים כלפי מעלה. כלומר, 3 יעוגל ל-3; 3.3 יעוגל ל-3; 3.5 יעוגל ל-4 ו-3.7 גם כן יעוגל ל-4.</p>
<p>כאשר הספר נכתב, ככל הנראה לא הייתה פונקציה לעיגול של מספרים שמובנית בתוך השפה, ולכן הפתרון שבו הכותב השתמש היה זה: הוסיף 0.5 למספר ואז המיר אותו למספר שלם, תוך הסתמכות על כך שהמרה כזו תמיד לוקחת את החלק השלם של המספר ומתעלמת מכל היתר. בשפות מודרניות כבר יש פונקציה מובנית בשפה עבור עיגול של מספרים, אבל עדיין אשתמש בשיטה של הספר כי אחרת התוכניות יצאו טריוויאליות <strong>מדי</strong>. הנה התוכנית ברובי:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;Please insert a number to round&quot;</span>
<span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">gets</span><span class="o">.</span><span class="n">to_f</span>
<span class="c1">#puts &quot;The rounded number is #{number.round}&quot;</span>
<span class="n">rounded_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_i</span>
<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;The rounded number is </span><span class="si">#{</span><span class="n">rounded_number</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>


</div>

<p>השורה השלישית, זו שמתחילה ב-#, היא <strong>הערה;</strong> המטרה של הערות בקוד היא להקל על מי שקורא אותו להבין מה הולך כאן, ויש להן את המטרה המשנית של להוציא מהתוכנית באופן זמני קטעי קוד מסויימים שכרגע אנחנו לא רוצים להשתמש בהם אבל אולי נרצה להחזיר אחר כך וטוב לדעת שהם היו כאן. במקרה הנוכחי אני משתמש בהערה כדי לתת את השורה שהיא הפתרון ה"נכון" לבעיה הזו ברובי, רק כדי שנוכל לראות איך אמורים לעשות את זה. היתר הוא סטנדרטי ועושה בדיוק את מה שאמרתי: מוסיף 0.5 למספר ואז ממיר הכל למספר שלם.</p>
<p>התוכנית בהסקל די דומה:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="nf">myRound</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">(</span><span class="kt">RealFrac</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Integral</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">b</span>
<span class="nf">myRound</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">floor</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.5</span><span class="p">)</span>

<span class="nf">main</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="n">putStrLn</span><span class="w"> </span><span class="s">&quot;Please insert a number to round&quot;</span>
<span class="w">  </span><span class="n">num</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">getLine</span>
<span class="w">  </span><span class="n">putStrLn</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;The rounded number is &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="p">(</span><span class="n">myRound</span><span class="w"> </span><span class="p">(</span><span class="n">read</span><span class="w"> </span><span class="n">num</span><span class="p">)))</span>
</code></pre></div>


</div>

<p>אבל ההגדרה של myRound אולי נראית די מוזרה. פתאום יש שם גם חץ מהצורה &lt;=, ומה זה אומר? ובכן, זו דוגמה לפונקציה <strong>פולימורפית</strong>, כלומר לפונקציה שיכולה לקבל כקלט הרבה טיפוסים שונים ולהוציא כפלט הרבה טיפוסים שונים, כל עוד הטיפוסים הללו מצייתים לכל מני כללים. RealFrac שמופיע שם הוא לא טיפוס יחיד אלא אוסף של כמה טיפוסים אפשריים שונים, וכך גם Integral (למשל, Int הוא מקרה פרטי אחד של Integral). אז מה שכתוב שם הוא שהפונקציה מקבלת ערך מסוג a, כאשר a הוא סוג שהוא תת-טיפוס של RealFrac, ומוציאה ערך מסוג b, כאשר b הוא תת-טיפוס של Integral. זה עניין מסובך למדי ונחזור אליו בהמשך; כאן הוא רק בתור טעימה.</p>
<p>לסיום, הפתרון בג'אווהסקריפט:</p>
<div class="code-block">

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Targil 4<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="w">    </span><span class="nx">compute_round</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;num&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">rounded_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.5</span><span class="p">)</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;round&quot;</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rounded_num</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  Number = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;textbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;num&quot;</span> <span class="na">value </span><span class="o">=</span> <span class="s">&quot;0&quot;</span> <span class="na">onkeyup </span><span class="o">=</span> <span class="s">&quot;compute_round()&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
  Rounded number = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;textbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">value </span><span class="o">=</span> <span class="s">&quot;0&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>


</div>

<p>אין כאן משהו מיוחד, אבל שימו לב לשימוש ב-Math.floor; זו דוגמה לשימוש בפונקציית ספריה, ספציפית הספריה Math. כמו כן שימו שאני מבצע עכשיו parseFloat במקום parseInt.</p>
<p>זהו להפעם; אקשן קצת יותר רציני יתחיל בפעם הבאה.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('expanded');
        }
        
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>