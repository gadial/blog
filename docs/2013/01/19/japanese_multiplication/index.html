<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שיטת &#34;הכפל היפני&#34; - לא מדויק</title>
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <header>
            <h1>שיטת &#34;הכפל היפני&#34;</h1>
            <div class="post-meta">
                <span class="date">2013-01-19</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/משחקים וחידות מתמטיות.html">משחקים וחידות מתמטיות</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/כפל ארוך.html">כפל ארוך</a>
                    
                    <a href="/tags/כפל יפני.html">כפל יפני</a>
                    
                    <a href="/tags/מתמטיקה בראי התקשורת.html">מתמטיקה בראי התקשורת</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>באינטרנט מסתובב לו לאחרונה להיט חדש: שיטת כפל שלכאורה נלמדת על ידי היפנים בבית הספר היסודי - מעכשיו אכנה אותה "כפל יפני", למרות שאין לי שום מושג (וזה גם לא ממש מעניין אותי) אם אכן השיטה נלמדת ביפן או לא. איך זה עובד? בואו נתחיל עם תמונה:</p>
<p><strong><a href="/img/2013/01/stick_multiplication.jpg"><img class="alignnone size-full wp-image-2330" alt="כפל_מקלות" src="/img/2013/01/stick_multiplication.jpg" width="320" height="245" /></a></strong></p>
<p>והנה גם סרטון שמסביר את השיטה:</p>
<p>http://www.youtube.com/watch?v=85Vd0NpL32k</p>
<p>אנסה להסביר בקיצור בעצמי מה הולך כאן. הרעיון הוא לקחת את אחד המספרים שאנחנו כופלים ולכתוב את ספרותיו בתור קבוצות (עם רווחים ביניהן) של קווים אלכסוניים (נאמר, שפונים לכיוון למטה-שמאלה). כך למשל את <span class="math">\(324\)</span> מייצגים בתור קבוצה של 3 קווים, רווח, קבוצה של שני קווים, רווח, קבוצה של 4 קווים. עכשיו לוקחים את המספר השני שאותו כופלים ועושים לו אותו דבר, רק עם אלכסונים בכיוון ההפוך (למעלה-שמאלה). בשני המקרים ככל שהקבוצה שמאלית יותר כך היא מייצגת ספרה "גבוהה" יותר.</p>
<p>אם ציירנו את הקבוצות בצורה מדויקת מספיק, אפשר לזהות נקודות מובחנות של חיתוכים בין שתי קבוצות של קווים שהן בערך באותו קו רוחב. הרעיון הוא כעת כזה: כמות נקודות החיתוך בקבוצה הימנית ביותר היא ספרת האחדות בתוצאה; כמות נקודות החיתוך בקבוצות בקו הרוחב הבא היא ספרת העשרות, וכן הלאה. אם קיבלנו שיש, נאמר, 24 נקודות חיתוך עבור קו רוחב מסויים אנחנו כותבים את הספרה 4 ומחברים את 2 לתוצאה של הספירה עבור קו הרוחב הבא. בסופו של דבר אנחנו מקבלים את תוצאת הכפל הנכונה.</p>
<p>כל זה מאוד מסורבל להסבר מילולי, אבל כשרואים את זה מתבצע בפועל (אני ממליץ על הסרטון) חיש קל ברור מה הרעיון, ואני בטוח שגם ילדים יכולים להשתלט עליו מהר.</p>
<p>התגובות לשיטה הזו ברחבי האינטרנט משתפכות למדי - הביטוי "Mind blown'' מופרח פה ושם, ובאתר 9GAG אפשר למצוא המחשה נאה (ומטופשת למדי) לאופן שבו מתייחסים בחלק מהמקומות לדבר הזה:</p>
<p><a href="/img/2013/01/6066420_700b.jpg"><img class="alignnone size-medium wp-image-2334" alt="6066420_700b" src="/img/2013/01/6066420_700b.jpg" width="110" height="300" /></a></p>
<p>עכשיו, אני לא רוצה לקלקל לאף אחד את המסיבה, ואני עצמי חושב ששיטת הכפל היפני הזו היא חמודה למדי ובהחלט לא יזיק להראות אותה לתלמידים או סתם להכיר אותה לידע כללי, אבל אני חושב שיש לא מעט אירוניה בכך שהשיטה הזו זוכה להתלהבות גדולה וקריאות Mind blown בזמן שהשיטה ה"רגילה" לכפל, שהיא מדהימה הרבה יותר, נתפסת אצלנו בתור מובן מאליו. זה כמובן בלתי נמנע; אנשים לומדים את שיטת הכפל ה"רגילה" בגיל צעיר מאוד ולא עוצרים אף פעם להעריך עד כמה היא גאונית, או עד כמה העובדה שאנחנו עובדים בשיטת ספירה על בסיס מיקום היא גאונית - אנחנו מקבלים כמובן מאליו את זה שכבר בכיתות הנמוכות של בית הספר היסודי אנחנו משתמשים במה שמבחינה טכנולוגית היה מהפכה אדירה.</p>
<p>אם כן, בפוסט הזה ארצה להסביר למה הכפל היפני עובד, אבל גם להזכיר איך הכפל ה"רגיל" עובד, ולהשוות את היתרונות והחסרונות של השיטות הללו.</p>
<p>בואו נתחיל בהבנה של הבסיס שעליו שתי השיטות בנויות - ייצוג עשרוני. המספר "ארבע מאות ושבע-עשרה" מסומן בשיטה העשרונית בתור 417. הסימון הזה הוא קיצור לביטוי הבא: <span class="math">\(4\times100+1\times10+7\times1\)</span>, כלומר ארבע כפול מאה, ועוד אחד כפול עשר, ועוד שבע כפול 1. באופן כללי, מספר בייצוג עשרוני מייצג סכום של <strong>חזקות של </strong><strong>10</strong>, כאשר כל חזקה כזו מוכפלת בספרה שנמצאת במקום המתאים במספר. גם התוצאה נרשמת בצורה דומה - סכום של חזקות של 10.</p>
<p>עכשיו בואו ניקח דוגמת צעצוע ונראה מה עולה בגורלה - המכפלה של המספר <span class="math">\(a_{1}a_{0}\)</span> (שהוא הדרך לכתוב בבסיס עשרוני את <span class="math">\(a_{1}\cdot10^{1}+a_{0}\cdot10^{0}\)</span>) במספר <span class="math">\(b_{1}b_{0}\)</span>. אנחנו הולכים לפתוח את הסוגריים במכפלה באמצעות <strong>חוג הפילוג</strong> ("דיסטריביוטיביות"):</p>
<p><span class="math">\(\left(a_{1}\cdot10^{1}+a_{0}\cdot10^{0}\right)\left(b_{1}\cdot10^{1}+b_{0}\cdot10^{0}\right)=\)</span></p>
<p><span class="math">\(=a_{1}b_{1}\cdot10^{2}+a_{1}b_{0}\cdot10^{1}+a_{0}b_{1}\cdot10^{1}+a_{0}b_{0}\cdot10^{0}\)</span></p>
<p>קיבלנו סכום של ארבע מכפלות. כל אחת מהן היא מכפלה של ספרה מכל אחד מהמספרים, כפול חזקה כלשהי של 10. איזו חזקה? ובכן, ה<strong>סכום</strong> של החזקות שכל אחת מהספרות הוכפלו בהן מלכתחילה: זה נובע מהתכונה הידועה של חזקות, שמתקיים <span class="math">\(10^{n}\cdot10^{k}=10^{n+k}\)</span>.</p>
<p>באופן כללי, אם יש לנו שני מספרים <span class="math">\(a_{n}\cdots a_{1}a_{0}\)</span> ו-<span class="math">\(b_{n}\cdots b_{1}b_{0}\)</span> שאניח לצורך פשטות שהם מאותו אורך (תמיד אפשר להוסיף ספרות 0 בסוף המספר הקצר יותר), אם מכפילים אותם מקבלים את הדבר הבא (אני משתמש כאן בסימן הסכימה - <span class="math">\(\Sigma\)</span> - לא להיבהל, הוא אומר בדיוק את מה שאתם חושבים שהוא אומר):</p>
<p><span class="math">\(\left(\sum_{i=0}^{n}a_{i}10^{i}\right)\left(\sum_{j=0}^{n}b_{j}10^{j}\right)=\sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}\)</span></p>
<p>כלומר, המכפלה נותנת לנו סכום של <span class="math">\(\left(n+1\right)^{2}\)</span> מחוברים מהצורה <span class="math">\(a_{i}b_{j}10^{i+j}\)</span> כאשר <span class="math">\(i,j\)</span> הם מספרים כלשהם בין 0 ו-<span class="math">\(n\)</span> (יש <span class="math">\(n+1\)</span> מספרים שכאלו - מכאן הגיע הפלוס 1).</p>
<p>עכשיו, בכפל "רגיל" מבצעים קיבוץ איברים בצורה הבאה:</p>
<p><span class="math">\(\sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}=\sum_{j=0}^{n}b_{j}\left(\sum_{i=0}^{n}a_{i}10^{i}\right)\cdot10^{j}\)</span></p>
<p>כלומר, אנחנו מקבלים <span class="math">\(n+1\)</span> מספרים, שכל אחד מהם הוא התוצאה של הכפלת <span class="math">\(b_{j}\)</span> (מספר בין 0 ל-9) ב-<span class="math">\(a_{n}\cdots a_{1}a_{0}\)</span> (המספר הראשון כולו), כשאת התוצאה הזו כופלים ב-<span class="math">\(10^{j}\)</span>, כלומר "מזיזים <span class="math">\(j\)</span> מקומות שמאלה".</p>
<p>השלב המאתגר כאן הוא לכפול את <span class="math">\(a_{n}\cdots a_{1}a_{0}\)</span> במספר <span class="math">\(b_{j}\)</span>. התוצאה היא פשוט <span class="math">\(\sum_{i=0}^{n}a_{i}b_{j}10^{i}\)</span>, אבל כשרוצים לכתוב את זה בתור מספר עשרוני צריך להיזהר כי <span class="math">\(a_{i}b_{j}\)</span> עשוי להיות גדול יותר מ-9, ולכן כבר לא ספרה לכשעצמו. מה כן אפשר לומר עליו בודאות? מכיוון ש-<span class="math">\(a_{i}\le9\)</span> וגם <span class="math">\(b_{j}\le9\)</span> הרי ש-<span class="math">\(a_{i}b_{j}\le81\)</span> ולכן המכפלה של שני המספרים הללו היא לכל היותר בת 2 ספרות. לכן אפשר לפצל אותה לשניים: ספרת האחדות היא מה שייכתב בפועל, ואילו ספרת האחדות הופכת ל"נשא" (Carry) שיחובר אל האיבר הבא בתור, <span class="math">\(a_{i+1}b_{j}\)</span> (ואם <span class="math">\(i=n\)</span>, אז הוא פשוט ייכתב משמאל לספרה הנוכחית). שימו לב שגם אם מחברים ל-<span class="math">\(a_{i}b_{j}\)</span> נשא של 9 אנחנו לא יכולים להגיע ל-100 אלא לכל היותר לספרת עשרות של 9, ולכן השיטה עובדת.</p>
<p>כל מה שנותר הוא להסביר איך אנחנו יודעים לחשב את מכפלת שתי ספרות, <span class="math">\(a_{i}b_{j}\)</span>. התשובה היא שאין כאן פתרונות קסם. מה שעושים בדרך כלל הוא <strong>לשנן בעל פה</strong> את המכפלה של כל המספרים מ-1 עד 9 אלו באלו. זה מה שנקרא "לוח הכפל". זה אחד מהדברים הבודדים במתמטיקה שלדעתי אכן <strong>הכרחי</strong> לשנן. יש כמה תעלולים שמקלים על הזכרון עבור חלק מהמקרים (למשל, הכפולות של 9 הן מהצורה <span class="math">\(ab\)</span> כך ש-<span class="math">\(a+b=9\)</span> וזה בהחלט מקל על השינון) אבל בשורה התחתונה - כאן אכן צריך לשנן.</p>
<p>אגב, שאלה שאינה קשורה לנושא הפוסט הזה אבל בהחלט מתעוררת בשלב הזה היא למה לא לעבוד עם בסיס ספירה <strong>שונה</strong> מ-10. בפרט, אם נעבוד עם פחות ספרות, לוח הכפל יהיה קל יותר לשינון. זה אמנם נכון, אבל ככל שיש לנו פחות ספרות בבסיס הספירה, כך ה<strong>אורך</strong> של מספרים הולך וגדל. מן העבר השני אפשר היה לעבוד עם בסיס ספירה גדול יותר מ-10 וזה היה מקצר את האורך של מספרים, אבל מצריך מאיתנו שינון של לוח כפל גדול יותר. האם זה אומר ש-10 נבחר כי הוא איזון טוב בין שני הכוחות הסותרים הללו? ודאי שלא. קרוב לודאי ש-10 נבחר כי יש לנו 10 אצבעות שבהן האדם השתמש לספירה. במהלך ההיסטוריה עמים שונים עבדו עם בסיסים שונים והעובדה ש-10 השתרש לבסוף מעידה - כך אני מנחש - על כך שהוא הרגיש יותר "טבעי" למרבית האנשים (אבל ייתכן שסתם היה לו מזל ועכשיו לכו ותשנו את זה).</p>
<p>בואו ונעבור כעת לשיטת הכפל היפני. כזכור, כפל של שני מספרים מניב את המכפלה</p>
<p><span class="math">\(\sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}\)</span></p>
<p>ושיטת הכפל ה"רגילה" התבססה על דרך אחת לקבץ את הסכום הזה לאיברים. הכפל היפני מתבסס על שיטת קיבוץ אחרת לגמרי:</p>
<p><span class="math">\(\sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}=\sum_{k=0}^{n}\left(\sum_{i=0}^{k}a_{i}b_{k-i}\right)10^{k}\)</span></p>
<p>וכדי שלא יהיה יותר מדי מבלבל, בואו נראה דוגמה קונקרטית למקרה של המספרים <span class="math">\(a_{1}a_{0},b_{1}b_{0}\)</span>:</p>
<p><span class="math">\(a_{0}b_{0}\cdot10^{0}+\left(a_{1}b_{0}+a_{1}b_{0}\right)\cdot10^{1}+a_{1}b_{1}\cdot10^{2}\)</span></p>
<p>כאן <span class="math">\(a_{0}b_{0}\)</span> הוא מספר החיתוכים של שתי קבוצות הקווים בקו הרוחב הימני ביותר, <span class="math">\(a_{1}b_{0}+a_{1}b_{0}\)</span> הוא מספר החיתוכים של קבוצות הקווים בקו הרוחב ה"אמצעי" (שכולל, כפי שאפשר לראות בתמונה, שתי קבוצות מובחנות שונות של חיתוכים) ו-<span class="math">\(a_{1}b_{1}\)</span> מתאים לקו הרוחב השמאלי. החזקות של 10 שמוכפלות באיברים הללו מצדיקות את הטענה המקורית שלי שהקבוצה הימנית ביותר מתאימה לספרת האחדות, זו שאחריה לספרת העשרות וכן הלאה.</p>
<p><strong><strong><a href="/img/2013/01/stick_multiplication.jpg"><img alt="כפל_מקלות" src="/img/2013/01/stick_multiplication.jpg" width="320" height="245" /></a></strong></strong></p>
<p>אם יש לנו שתי סדרות, <span class="math">\(a_{0},a_{1},\dots,a_{n}\)</span> ו-<span class="math">\(b_{0},b_{1},\dots,b_{n}\)</span> אז ביטוי מהצורה <span class="math">\(\sum_{i=0}^{k}a_{i}b_{k-i}\)</span> נקרא <strong>קונבולוציה</strong> של שתי הסדרות - הקונבולוציה ה-<span class="math">\(k\)</span>-ית. דרך ציורית חזקה מאוד להדגמת הרעיון בקונבולוציה היא זו: ראשית כתבו את הסדרה הראשונה. כעת כתבו מתחתיה את הסדרה השניה כשהיא <strong>הפוכה </strong>ומוזזת כך שהאיבר ה-<span class="math">\(k\)</span> בה נמצא בדיוק מתחת לאיבר <span class="math">\(a_{0}\)</span> של הסדרה הראשונה. כעת כפלו כל זוג איברים של הסדרות שנמצאים האחד מעל השני, וסכמו. כל הקונבולוציות האפשריות של שתי הסדרות מתקבלים כשלוקחים את הסדרה התחתונה ובכל שלב מזיזים אותה צעד אחד שמאלה, ומחשבים את הקונבולציה שהתקבלה הפעם.</p>
<p>לקונבולוציות חשיבות <strong>אדירה</strong> במתמטיקה. בעזרת משהו שנקרא <strong>התמרת פורייה המהירה</strong> אפשר לבצע קונבולוציות מסויימיות ביעילות חישובית גבוהה, מה שמוביל לשיטות כפל מהירות. זה נושא לפוסטים מרתקים ויהיו כאלו אחרי שאתחיל לדבר על התמרת פורייה; כרגע זה לחלוטין <strong>לא רלוונטי</strong> ולכן נעזוב את זה. אנשים רגילים לא מבצעים התמרות פורייה.</p>
<p>מכל מקום, ההצגה של הכפל באמצעות קונבולוציה מבהירה לנו, אני מקווה, למה השיטה עובדת. אין כאן שום Mind blown לדעתי, אם כי המושג של קונבולוציה הוא יפה למדי, וממבט ראשון הוא עשוי גם להיראות מוזר. רק בשל העובדה שהשיטה הזו דוחפת לנו את מושג הקונבולוציה לפרצוף (אנחנו נצטרך להתמודד איתו ולו באופן מובלע, כדי לדעת אילו קבוצות של הצטלבויות שייכות לאותה ספרה) אני חושב שהיא מעניינת ושווה הצגה; קצת חבל לי שבהצגה הסטנדרטית שלה לא מתארים את מושג הקונבולוציה במפורש.</p>
<p>אבל, וכעת אנחנו מגיעים לחלק הוכחני של הפוסט - מי מבין השיטות טובה יותר? האם השיטה היפנית עדיפה על השיטה הרגילה או לא?</p>
<p>נתחיל מהתשובה הלמלמית (לא מועילה, לא מזיקה) המתבקשת - שכל אחד יחליט מה השיטה שיותר טובה לו וישתמש בה. מתמטיקה היא לא מדע מדויק ולכל אחד יש את הגישה שלו לביצוע חישובים מתמטיים. חשוב גם לזכור שביצוע של חישובים זו <strong>לא</strong> מתמטיקה; זה בסך הכל חישוב וזה לא מעניין. החלק ה"מתמטי" בשיטות הללו הוא להבין למה הן עובדות, ועל זה דיברנו. ביצוע פעולות של כפל הוא לא משהו שאנחנו עושים בדרך כלל בחיי היום יום עם נייר ועט; מי שצריך לבצע חישובים על בסיס סדיר לרוב מצויד במחשבון. זה לא אומר שלא צריך לדעת שיטה לכפל - לדעתי תמיד כדאי לדעת לבצע משהו לא מסובך בעצמך גם אם לרוב אפשר להסתמך על כלי כלשהו שיעשה את זה עבורך - אבל שאין שום דבר <strong>קריטי</strong> בלהעדיף שיטה אחת על השניה.</p>
<p>ועדיין, זה בוודאי לא מספיק לומר את זה. הרי מישהו צריך להחליט על איזו שיטה לתת דגש בבית הספר. האם להעביר את הדגש לשיטה היפנית? ובכן, צריך להבדיל בין שני דברים - כמה קשה ללמוד את השיטה, וכמה קשה להשתמש בה בפועל. אני חושב ששאלת ה"כמה קשה ללמוד את השיטה" היא דווקא השאלה הפחות חשובה מבין השתיים, כי אף שיטה אינה כה קשה עד כי נדרש מאמץ יוצא דופן כדי ללמד אותן. עיקר מה שצריך לעשות הוא לתרגל את השיטות ולהתרגל אליהן. לכן יותר מעניין אותי, בטווח הארוך, עד כמה השיטות יעילות להפעלה. לצורך כך אחשוב עליהן בתור אלגוריתמים - כי זה בעצם מה שהן - ואעשה מעין "ניתוח סיבוכיות" לא מדויק שלהן, כשהמטרה שלי היא בכלל להבין אילו פעולות אני מבצע בכל אחת מהשיטות, כמה מהן יש, והאם אפשר להשוות ביניהן בצורה ברורה.</p>
<p>נתחיל בכפל רגיל. נניח שאנחנו כופלים שני מספרים, בני <span class="math">\(n\)</span> ו-<span class="math">\(k\)</span> ספרות, כך ש-<span class="math">\(k&amp;lt;n\)</span>. ראשית אנחנו כותבים את שני המספרים כשהגדול מעל הקטן - זה דורש <span class="math">\(n+k\)</span> צעדי כתיבה. עכשיו, לכל אחת מהספרות של המספר הקטן אנחנו כופלים אותה בכל אחת מספרות המספר הגדול ואולי גם מוסיפים את הנשא מהכפל עם הספרה הקודמת של המספר הגדול. סך הכל <span class="math">\(n\cdot k\)</span> פעולות כפל ו(בערך) <span class="math">\(n\cdot k\)</span> פעולות חיבור. כעת קיבלנו <span class="math">\(k\)</span> מספרים שיש לחבר (המספרים שמתקבלים מכפל כל ספרה במספר הקטן במספר הגדול). האורך של כל אחד מהם הוא (בערך) <span class="math">\(n\)</span> ולכן אנחנו מבצעים (בערך) <span class="math">\(n\cdot k\)</span> פעולות חיבור בסיסיות. הפלט עצמו כולל (בערך) <span class="math">\(n+k\)</span> ספרות והיו לנו (בערך) <span class="math">\(n\cdot k\)</span> ספרות ביניים שכתבנו, כך שסך הכל ביצענו <span class="math">\(2\left(n+k\right)+nk\)</span> צעדי כתיבה, <span class="math">\(2n\cdot k\)</span> צעדי חיבור ו-<span class="math">\(n\cdot k\)</span> צעדי כפל. החלק ה"כבד" ביותר כאן הוא ביצוע פעולות הכפל; אנחנו מניחים שמי שמבצע את האלגוריתם זוכר בעל פה את לוח הכפל ולכן הצעדים הללו קלים לו יחסית - לא יותר קשים מאשר צעדי החיבור.</p>
<p>בכפל יפני הסיפור שונה כי הפעולות שאנחנו מבצעים הן בעיקרן שונות. ראשית כל אנחנו צריכים לצייר קווים. כמה קווים? ובכן, <span class="math">\(n+k\)</span> <strong>קבוצות</strong> של קווים, אבל מספר הקווים בקבוצה הוא בין 1 ל-9, כתלות בספרות של המספרים שאנחנו כופלים. זו תכונה שלא קיימת בשיטה הרגילה - בהינתן שאנחנו זוכרים את לוח הכפל בעל פה, לא ממש משנה לנו מה הספרות שיש במספרים שכופלים, בעוד שבשיטה היפנית ספרות גדולות דורשות יותר עבודה (וזה לא ממש מפתיע שבדוגמאות שיש בתמונות ובסרטונים רוב הספרות קטנות).</p>
<p>שימו לב שלא מספיק לצייר את הקווים - צריך גם לעשות את זה טוב, כלומר באופן כזה שקבוצות החיתוכים השונות (בעלות "קו רוחב" שונה) יהיו מובחנות זו מזו בקלות. יש שמגדילים וצובעים קבוצות קווים שמתאימות לספרות שונות בצבעים שונים. בקיצור, סיפור. אני משער שהשרטוט הזה גוזל זמן רב יותר מאשר נדרש לכתוב את שני המספרים שכופלים זה מעל זה כמו בשיטה הרגילה.</p>
<p>כעת מגיע האקשן - ההכפלה. יש לנו <span class="math">\(n\cdot k\)</span> איזורי חיתוך שונים בין קבוצות הישרים, ואנחנו צריכים לספור את כולם. בכל אחד כזה צריך לספור את נקודות החיתוך - והמספר שלהן תלוי לגמרי בגודל הקבוצות שנחתכות, כלומר בגודל הספרות שמכפילים. אם כופלים את 2 ב-2 יהיו לנו רק 4 נקודות חיתוך; אם כופלים את 7 ב-9 יהיו לנו 63 נקודות חיתוך. האם זה סביר לספור את כולן "בעיניים"? לא נראה לי. די בבירור יש כאן מקום לאופטימיזציה כלשהי, אבל על כך נדבר בהמשך.</p>
<p>אחרי שמסכמים את כל הנקודות בקו רוחב מסויים כותבים את הסכום. גם כאן יכול להיות נשא, ויהיה צורך לזכור אותו היכן שהוא כי אחר כך מתחילים לסכום קבוצה חדשה ומי יכול לזכור את הנשא לכל אורך המניה הזה (זכרו - אלגוריתמים מבוצעים על ידי אנשים כמוני, שהם ממש גרועים בחישוב; איש הגשם לא צריך את השטויות הללו, כנראה). כדאי לשים לב שכאן הנשא יכול בהחלט להיות בן כמה ספרות - אם למשל בקו הרוחב יש 5 איזורי חיתוך ובכל אחד יש בערך 50 חיתוכים קיבלנו כבר סכום של 250, ולכן נשא של 25. בקיצור - יש <span class="math">\(n+k\)</span> קווי רוחב שונים (בערך) ולכן נכתוב (בערך) <span class="math">\(n+k\)</span> ספרות ונבצע <span class="math">\(n+k\)</span> פעולות חיבור. סך הכל ביצענו <span class="math">\(n+k\)</span> פעולות של כתיבת ספרות ו-<span class="math">\(n+k\)</span> פעולות של חיבור, אבל גם <span class="math">\(n+k\)</span>פעולות של שרטוט קבוצות קווים ו-<span class="math">\(n\cdot k\)</span> פעולות של מניית חיתוכים.</p>
<p>המסקנה העיקרית והלא מפתיעה היא שלא ממש ברור איך אפשר להשוות את שני האלגוריתמים, הרי הפעולות הבסיסיות שלהם הן שונות לגמרי. אז מה לעשות? אני יכול להריץ את שני האלגוריתמים על אותם קלטים ולמדוד לעצמי זמן, אבל מה תהיה המסקנה מזה? הרי אני מיומן בשיטה הרגילה הרבה יותר מאשר בשיטה היפנית. אם כן, השוואה אבסולוטית לא תהיה לנו. אינטואיטיבית השיטה היפנית נראית לי נחותה יותר בשל מה שהוא גם ה"יתרון" שלה - הצורך לספור חיתוכים בעיניים. נראה לי שזה פשוט לוקח יותר מדי זמן כשיש יותר מדי חיתוכים, לעומת המקבילה של לזכור את לוח הכפל.</p>
<p>בואו ננסה לרגע להבין האם אפשר לשפר את עניין ספירת החיתוכים. אפשר, למשל, לא לצייר קבוצות של קווים, אלא פשוט לצייר קו עם מספר לידו שאומר כמה קווים "אמורים" להיות בקבוצה. כל מה שנותר הוא לזהות נקודות חיתוך ולחשב בראש את הסכום עבור כל קו רוחב. בשיטה הראשונה אנחנו ממש סופרים את הנקודות שמהוות את הקונבולוציה <span class="math">\(\sum_{i=0}^{k}a_{i}b_{k-i}\)</span>, ואילו בשיטה השניה אנחנו רואים את הזוגות <span class="math">\(a_{i},b_{k-i}\)</span> בעיניים ומחשבים את המכפלות-וסכומים שלהם בראש. לדעתי זה מאתגר קצת יותר מאשר ביצוע הכפל-וחיבור-נשא של השיטה הרגילה, ובכל מקרה זה מצריך לזכור את לוח הכפל. אנחנו רואים שאין מנוס מכך - אם לא רוצים לספור חיתוכים פיזית, צריך לזכור את לוח הכפל.</p>
<p>חסרון אחד שאפשר אולי לציין לשיטה היפנית הוא שלא ברור מה עושים עם אפס, אבל זה לא באמת חסרון - פשוט לא מציירים את הקו שלו. אפשר גם לצייר קו מקוקו או קו שכתוב לידו אפס אם לא רוצים להתבלבל - כאשר הסכנה לבלבול היא בהחלטה על אילו קבוצות חיתוכים שייכות לאילו קווי רוחב. עדיין, בכפל רגיל אפס מבלבל עוד פחות - פשוט כותבים אפס בתור אחד מהמספרים שנכנסים לסכום.</p>
<p>עוד חסרון שהוא כנראה די ברור הוא שלא כללתי במדדי הסיבוכיות שלי את סיבוכיות ה<strong>מקום</strong> על הדף שנדרשת כדי לצייר את הציור של הכפל היפני. ככל שיש יותר ספרות שכופלים כך הציור יצטרך להיות יותר גדול על מנת שלא יהיה מבלבל. כפל רגיל נראה לי קומפקטי יותר. האם זה חסרון אמיתי? כנראה שהוא לא נורא במיוחד.</p>
<p>אם כן, האם לדעתי לא ניתן להכריע בין השיטות? לא. לדעתי השיטה הרגילה עדיפה בהרבה, אבל מסיבה שעד כה לא כללתי במערך השיקולים אבל היא תמיד חשובה כשמתכננים אלגוריתם - רובסטיות, או ליתר דיוק - יכולת התמודדות עם שגיאות. השיטה היפנית, כמו כל דבר שבו מונים כמות גדולה של פריטים או מבצעים חישוב ארוך בראש (חישוב הקונבולוציה) מסתמכת על כך שהאדם שמבצע את החישוב יצליח לכלול בראש כמות "גדולה" (יחסית לכפל רגיל) של אינפורמציה מבלי שהמידע הזה ישתבש. כולנו יודעים איך זה משתבש - כמה מאיתנו <strong>לא</strong> באו אל אדם שעוסק באמצע חישוב בראש או ספירה והתחיל לומר לו "שבע-עשרה, חמישים, עשרים ושתיים, שמונים!" כדי לשגע אותו? בסופו של דבר, המטרה של שיטות הכפל הללו היא לאפשר לאדם - שהוא לא מכונה - לבצע חישוב ארוך ומסובך עם הרבה פרטים בלי להתבלבל. שיטות שפותחות פתח לבלבול הן לטעמי פחות טובות, ועשויות לגרום לתסכול לא קטן למי שמשתמש בהן.</p>
<p>אם כן, לסיכום: שיטת הכפל היפני היא ללא ספק מגניבה, אבל כפל ארוך רגיל הוא גם כן דבר מגניב מאין כמותו ולא ברור אם צריך להחליף אותו במשהו. רק בגלל שלמדתם משהו בבית הספר היסודי לא אומר שצריך לקחת אותו כמובן מאליו או שהוא לא דבר מתוחכם!</p>
        </article>
        
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2013/01/30/irrational_infinity/" class="nav-link nav-next">
                <span class="nav-label">→ פוסט חדש יותר</span>
                <span class="nav-title">למה לא רציונלי לדבר על לא רציונליים (באינסוף)</span>
            </a>
            
            
            
            <a href="/2013/01/15/mirror_mirror/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר ←</span>
                <span class="nav-title">מראה מראה שעל הקיר, למה את מבדילה בין ציר וציר?</span>
            </a>
            
        </nav>
        
        
        <footer>
            <p>בלוג מתמטיקה בעברית</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>