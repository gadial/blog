<!DOCTYPE html>
<html lang="he" dir="rtl"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>שיטת “הכפל היפני” | לא מדויק</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="שיטת “הכפל היפני”" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
<meta property="og:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
<link rel="canonical" href="http://gadial.net/2013/01/19/japanese_multiplication/" />
<meta property="og:url" content="http://gadial.net/2013/01/19/japanese_multiplication/" />
<meta property="og:site_name" content="לא מדויק" />
<meta property="og:image" content="http://gadial.net/assets/img/main/default-card.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-01-19T23:30:52+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="http://gadial.net/assets/img/main/default-card.png" />
<meta property="twitter:title" content="שיטת “הכפל היפני”" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"http://gadial.net/2013/01/19/japanese_multiplication/","image":"http://gadial.net/assets/img/main/default-card.png","headline":"שיטת “הכפל היפני”","dateModified":"2013-01-19T23:30:52+00:00","datePublished":"2013-01-19T23:30:52+00:00","description":"לא מדויק - בלוג על מתמטיקה ומדעי המחשב","mainEntityOfPage":{"@type":"WebPage","@id":"http://gadial.net/2013/01/19/japanese_multiplication/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon"><link type="application/atom+xml" rel="alternate" href="http://gadial.net/feed.xml" title="לא מדויק" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3924539-2', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$latex','$'] ],
        processEscapes: true
      },
      TeX: {extensions: ["AMSmath.js","AMSsymbols.js"]},
      "HTML-CSS": { 
        linebreaks: { automatic: true }
      },
      SVG: { 
        linebreaks: { automatic: true } 
      }
    });
  </script>
  <!-- "https://www.gadial.net/wp-includes/js/xypic.js" -->

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  
</head>
<body><header>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="/">לא מדויק</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        
            
            <li class="nav-item">
                <a class="nav-link" href="/whats_going_on">מה הולך פה?</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/">דף הבית</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/categories">קטגוריות</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/random">דף אקראי</a>
            </li>
            
        
            
            <li class="nav-item">
                <a class="nav-link" href="/about/">אודות</a>
            </li>
            
        
      </ul>
      <form class="form-inline mt-2 mt-md-0" action="/post_list/" method="get">
        <input class="form-control mr-sm-2" type="text" placeholder="חיפוש" aria-label="חיפוש" name="s">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">חיפוש</button>
      </form>
    </div>
  </nav>
</header><main class="page-content" aria-label="Content" role="main">
      <div class="wrapper text-right">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><div class="PageNavigation">
    
      <a class="prev" href="/2013/01/15/mirror_mirror/">&laquo; מראה מראה שעל הקיר, למה את מבדילה בין ציר וציר?</a>
    
    
      <a class="next" href="/2013/01/30/irrational_infinity/">למה לא רציונלי לדבר על לא רציונליים (באינסוף) &raquo;</a>
    
  </div><header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">שיטת &quot;הכפל היפני&quot;</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2013-01-19T23:30:52+00:00" itemprop="datePublished">Jan 19, 2013
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>באינטרנט מסתובב לו לאחרונה להיט חדש: שיטת כפל שלכאורה נלמדת על ידי היפנים בבית הספר היסודי - מעכשיו אכנה אותה “כפל יפני”, למרות שאין לי שום מושג (וזה גם לא ממש מעניין אותי) אם אכן השיטה נלמדת ביפן או לא. איך זה עובד? בואו נתחיל עם תמונה:</p>

<p><strong><a href="/assets/img/2013/01/stick_multiplication.jpg"><img class="alignnone size-full wp-image-2330" alt="כפל_מקלות" src="/assets/img/2013/01/stick_multiplication.jpg" width="320" height="245" /></a></strong></p>

<p>והנה גם סרטון שמסביר את השיטה:</p>

<p>http://www.youtube.com/watch?v=85Vd0NpL32k</p>

<p>אנסה להסביר בקיצור בעצמי מה הולך כאן. הרעיון הוא לקחת את אחד המספרים שאנחנו כופלים ולכתוב את ספרותיו בתור קבוצות (עם רווחים ביניהן) של קווים אלכסוניים (נאמר, שפונים לכיוון למטה-שמאלה). כך למשל את <span>$latex 324$</span> מייצגים בתור קבוצה של 3 קווים, רווח, קבוצה של שני קווים, רווח, קבוצה של 4 קווים. עכשיו לוקחים את המספר השני שאותו כופלים ועושים לו אותו דבר, רק עם אלכסונים בכיוון ההפוך (למעלה-שמאלה). בשני המקרים ככל שהקבוצה שמאלית יותר כך היא מייצגת ספרה “גבוהה” יותר.</p>

<p>אם ציירנו את הקבוצות בצורה מדויקת מספיק, אפשר לזהות נקודות מובחנות של חיתוכים בין שתי קבוצות של קווים שהן בערך באותו קו רוחב. הרעיון הוא כעת כזה: כמות נקודות החיתוך בקבוצה הימנית ביותר היא ספרת האחדות בתוצאה; כמות נקודות החיתוך בקבוצות בקו הרוחב הבא היא ספרת העשרות, וכן הלאה. אם קיבלנו שיש, נאמר, 24 נקודות חיתוך עבור קו רוחב מסויים אנחנו כותבים את הספרה 4 ומחברים את 2 לתוצאה של הספירה עבור קו הרוחב הבא. בסופו של דבר אנחנו מקבלים את תוצאת הכפל הנכונה.</p>

<p>כל זה מאוד מסורבל להסבר מילולי, אבל כשרואים את זה מתבצע בפועל (אני ממליץ על הסרטון) חיש קל ברור מה הרעיון, ואני בטוח שגם ילדים יכולים להשתלט עליו מהר.</p>

<p>התגובות לשיטה הזו ברחבי האינטרנט משתפכות למדי - הביטוי “Mind blown’’ מופרח פה ושם, ובאתר 9GAG אפשר למצוא המחשה נאה (ומטופשת למדי) לאופן שבו מתייחסים בחלק מהמקומות לדבר הזה:</p>

<p><a href="/assets/img/2013/01/6066420_700b.jpg"><img class="alignnone size-medium wp-image-2334" alt="6066420_700b" src="/assets/img/2013/01/6066420_700b.jpg" width="110" height="300" /></a></p>

<p>עכשיו, אני לא רוצה לקלקל לאף אחד את המסיבה, ואני עצמי חושב ששיטת הכפל היפני הזו היא חמודה למדי ובהחלט לא יזיק להראות אותה לתלמידים או סתם להכיר אותה לידע כללי, אבל אני חושב שיש לא מעט אירוניה בכך שהשיטה הזו זוכה להתלהבות גדולה וקריאות Mind blown בזמן שהשיטה ה”רגילה” לכפל, שהיא מדהימה הרבה יותר, נתפסת אצלנו בתור מובן מאליו. זה כמובן בלתי נמנע; אנשים לומדים את שיטת הכפל ה”רגילה” בגיל צעיר מאוד ולא עוצרים אף פעם להעריך עד כמה היא גאונית, או עד כמה העובדה שאנחנו עובדים בשיטת ספירה על בסיס מיקום היא גאונית - אנחנו מקבלים כמובן מאליו את זה שכבר בכיתות הנמוכות של בית הספר היסודי אנחנו משתמשים במה שמבחינה טכנולוגית היה מהפכה אדירה.</p>

<p>אם כן, בפוסט הזה ארצה להסביר למה הכפל היפני עובד, אבל גם להזכיר איך הכפל ה”רגיל” עובד, ולהשוות את היתרונות והחסרונות של השיטות הללו.</p>

<p>בואו נתחיל בהבנה של הבסיס שעליו שתי השיטות בנויות - ייצוג עשרוני. המספר “ארבע מאות ושבע-עשרה” מסומן בשיטה העשרונית בתור 417. הסימון הזה הוא קיצור לביטוי הבא: <span>$latex 4\times100+1\times10+7\times1$</span>, כלומר ארבע כפול מאה, ועוד אחד כפול עשר, ועוד שבע כפול 1. באופן כללי, מספר בייצוג עשרוני מייצג סכום של <strong>חזקות של </strong><strong>10</strong>, כאשר כל חזקה כזו מוכפלת בספרה שנמצאת במקום המתאים במספר. גם התוצאה נרשמת בצורה דומה - סכום של חזקות של 10.</p>

<p>עכשיו בואו ניקח דוגמת צעצוע ונראה מה עולה בגורלה - המכפלה של המספר <span>$latex a_{1}a_{0}$</span> (שהוא הדרך לכתוב בבסיס עשרוני את <span>$latex a_{1}\cdot10^{1}+a_{0}\cdot10^{0}$</span>) במספר <span>$latex b_{1}b_{0}$</span>. אנחנו הולכים לפתוח את הסוגריים במכפלה באמצעות <strong>חוג הפילוג</strong> (“דיסטריביוטיביות”):</p>

<p><span>$latex \left(a_{1}\cdot10^{1}+a_{0}\cdot10^{0}\right)\left(b_{1}\cdot10^{1}+b_{0}\cdot10^{0}\right)=$</span></p>

<p><span>$latex =a_{1}b_{1}\cdot10^{2}+a_{1}b_{0}\cdot10^{1}+a_{0}b_{1}\cdot10^{1}+a_{0}b_{0}\cdot10^{0}$</span></p>

<p>קיבלנו סכום של ארבע מכפלות. כל אחת מהן היא מכפלה של ספרה מכל אחד מהמספרים, כפול חזקה כלשהי של 10. איזו חזקה? ובכן, ה<strong>סכום</strong> של החזקות שכל אחת מהספרות הוכפלו בהן מלכתחילה: זה נובע מהתכונה הידועה של חזקות, שמתקיים <span>$latex 10^{n}\cdot10^{k}=10^{n+k}$</span>.</p>

<p>באופן כללי, אם יש לנו שני מספרים <span>$latex a_{n}\cdots a_{1}a_{0}$</span> ו-<span>$latex b_{n}\cdots b_{1}b_{0}$</span> שאניח לצורך פשטות שהם מאותו אורך (תמיד אפשר להוסיף ספרות 0 בסוף המספר הקצר יותר), אם מכפילים אותם מקבלים את הדבר הבא (אני משתמש כאן בסימן הסכימה - <span>$latex \Sigma$</span> - לא להיבהל, הוא אומר בדיוק את מה שאתם חושבים שהוא אומר):</p>

<p><span>$latex \left(\sum_{i=0}^{n}a_{i}10^{i}\right)\left(\sum_{j=0}^{n}b_{j}10^{j}\right)=\sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}$</span></p>

<p>כלומר, המכפלה נותנת לנו סכום של <span>$latex \left(n+1\right)^{2}$</span> מחוברים מהצורה <span>$latex a_{i}b_{j}10^{i+j}$</span> כאשר <span>$latex i,j$</span> הם מספרים כלשהם בין 0 ו-<span>$latex n$</span> (יש <span>$latex n+1$</span> מספרים שכאלו - מכאן הגיע הפלוס 1).</p>

<p>עכשיו, בכפל “רגיל” מבצעים קיבוץ איברים בצורה הבאה:</p>

<p><span>$latex \sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}=\sum_{j=0}^{n}b_{j}\left(\sum_{i=0}^{n}a_{i}10^{i}\right)\cdot10^{j}$</span></p>

<p>כלומר, אנחנו מקבלים <span>$latex n+1$</span> מספרים, שכל אחד מהם הוא התוצאה של הכפלת <span>$latex b_{j}$</span> (מספר בין 0 ל-9) ב-<span>$latex a_{n}\cdots a_{1}a_{0}$</span> (המספר הראשון כולו), כשאת התוצאה הזו כופלים ב-<span>$latex 10^{j}$</span>, כלומר “מזיזים <span>$latex j$</span> מקומות שמאלה”.</p>

<p>השלב המאתגר כאן הוא לכפול את <span>$latex a_{n}\cdots a_{1}a_{0}$</span> במספר <span>$latex b_{j}$</span>. התוצאה היא פשוט <span>$latex \sum_{i=0}^{n}a_{i}b_{j}10^{i}$</span>, אבל כשרוצים לכתוב את זה בתור מספר עשרוני צריך להיזהר כי <span>$latex a_{i}b_{j}$</span> עשוי להיות גדול יותר מ-9, ולכן כבר לא ספרה לכשעצמו. מה כן אפשר לומר עליו בודאות? מכיוון ש-<span>$latex a_{i}\le9$</span> וגם <span>$latex b_{j}\le9$</span> הרי ש-<span>$latex a_{i}b_{j}\le81$</span> ולכן המכפלה של שני המספרים הללו היא לכל היותר בת 2 ספרות. לכן אפשר לפצל אותה לשניים: ספרת האחדות היא מה שייכתב בפועל, ואילו ספרת האחדות הופכת ל”נשא” (Carry) שיחובר אל האיבר הבא בתור, <span>$latex a_{i+1}b_{j}$</span> (ואם <span>$latex i=n$</span>, אז הוא פשוט ייכתב משמאל לספרה הנוכחית). שימו לב שגם אם מחברים ל-<span>$latex a_{i}b_{j}$</span> נשא של 9 אנחנו לא יכולים להגיע ל-100 אלא לכל היותר לספרת עשרות של 9, ולכן השיטה עובדת.</p>

<p>כל מה שנותר הוא להסביר איך אנחנו יודעים לחשב את מכפלת שתי ספרות, <span>$latex a_{i}b_{j}$</span>. התשובה היא שאין כאן פתרונות קסם. מה שעושים בדרך כלל הוא <strong>לשנן בעל פה</strong> את המכפלה של כל המספרים מ-1 עד 9 אלו באלו. זה מה שנקרא “לוח הכפל”. זה אחד מהדברים הבודדים במתמטיקה שלדעתי אכן <strong>הכרחי</strong> לשנן. יש כמה תעלולים שמקלים על הזכרון עבור חלק מהמקרים (למשל, הכפולות של 9 הן מהצורה <span>$latex ab$</span> כך ש-<span>$latex a+b=9$</span> וזה בהחלט מקל על השינון) אבל בשורה התחתונה - כאן אכן צריך לשנן.</p>

<p>אגב, שאלה שאינה קשורה לנושא הפוסט הזה אבל בהחלט מתעוררת בשלב הזה היא למה לא לעבוד עם בסיס ספירה <strong>שונה</strong> מ-10. בפרט, אם נעבוד עם פחות ספרות, לוח הכפל יהיה קל יותר לשינון. זה אמנם נכון, אבל ככל שיש לנו פחות ספרות בבסיס הספירה, כך ה<strong>אורך</strong> של מספרים הולך וגדל. מן העבר השני אפשר היה לעבוד עם בסיס ספירה גדול יותר מ-10 וזה היה מקצר את האורך של מספרים, אבל מצריך מאיתנו שינון של לוח כפל גדול יותר. האם זה אומר ש-10 נבחר כי הוא איזון טוב בין שני הכוחות הסותרים הללו? ודאי שלא. קרוב לודאי ש-10 נבחר כי יש לנו 10 אצבעות שבהן האדם השתמש לספירה. במהלך ההיסטוריה עמים שונים עבדו עם בסיסים שונים והעובדה ש-10 השתרש לבסוף מעידה - כך אני מנחש - על כך שהוא הרגיש יותר “טבעי” למרבית האנשים (אבל ייתכן שסתם היה לו מזל ועכשיו לכו ותשנו את זה).</p>

<p>בואו ונעבור כעת לשיטת הכפל היפני. כזכור, כפל של שני מספרים מניב את המכפלה</p>

<p><span>$latex \sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}$</span></p>

<p>ושיטת הכפל ה”רגילה” התבססה על דרך אחת לקבץ את הסכום הזה לאיברים. הכפל היפני מתבסס על שיטת קיבוץ אחרת לגמרי:</p>

<p><span>$latex \sum_{i,j=0}^{n}a_{i}b_{j}10^{i+j}=\sum_{k=0}^{n}\left(\sum_{i=0}^{k}a_{i}b_{k-i}\right)10^{k}$</span></p>

<p>וכדי שלא יהיה יותר מדי מבלבל, בואו נראה דוגמה קונקרטית למקרה של המספרים <span>$latex a_{1}a_{0},b_{1}b_{0}$</span>:</p>

<p><span>$latex a_{0}b_{0}\cdot10^{0}+\left(a_{1}b_{0}+a_{1}b_{0}\right)\cdot10^{1}+a_{1}b_{1}\cdot10^{2}$</span></p>

<p>כאן <span>$latex a_{0}b_{0}$</span> הוא מספר החיתוכים של שתי קבוצות הקווים בקו הרוחב הימני ביותר, <span>$latex a_{1}b_{0}+a_{1}b_{0}$</span> הוא מספר החיתוכים של קבוצות הקווים בקו הרוחב ה”אמצעי” (שכולל, כפי שאפשר לראות בתמונה, שתי קבוצות מובחנות שונות של חיתוכים) ו-<span>$latex a_{1}b_{1}$</span> מתאים לקו הרוחב השמאלי. החזקות של 10 שמוכפלות באיברים הללו מצדיקות את הטענה המקורית שלי שהקבוצה הימנית ביותר מתאימה לספרת האחדות, זו שאחריה לספרת העשרות וכן הלאה.</p>

<p><strong><strong><a href="/assets/img/2013/01/stick_multiplication.jpg"><img alt="כפל_מקלות" src="/assets/img/2013/01/stick_multiplication.jpg" width="320" height="245" /></a></strong></strong></p>

<p>אם יש לנו שתי סדרות, <span>$latex a_{0},a_{1},\dots,a_{n}$</span> ו-<span>$latex b_{0},b_{1},\dots,b_{n}$</span> אז ביטוי מהצורה <span>$latex \sum_{i=0}^{k}a_{i}b_{k-i}$</span> נקרא <strong>קונבולוציה</strong> של שתי הסדרות - הקונבולוציה ה-<span>$latex k$</span>-ית. דרך ציורית חזקה מאוד להדגמת הרעיון בקונבולוציה היא זו: ראשית כתבו את הסדרה הראשונה. כעת כתבו מתחתיה את הסדרה השניה כשהיא <strong>הפוכה </strong>ומוזזת כך שהאיבר ה-<span>$latex k$</span> בה נמצא בדיוק מתחת לאיבר <span>$latex a_{0}$</span> של הסדרה הראשונה. כעת כפלו כל זוג איברים של הסדרות שנמצאים האחד מעל השני, וסכמו. כל הקונבולוציות האפשריות של שתי הסדרות מתקבלים כשלוקחים את הסדרה התחתונה ובכל שלב מזיזים אותה צעד אחד שמאלה, ומחשבים את הקונבולציה שהתקבלה הפעם.</p>

<p>לקונבולוציות חשיבות <strong>אדירה</strong> במתמטיקה. בעזרת משהו שנקרא <strong>התמרת פורייה המהירה</strong> אפשר לבצע קונבולוציות מסויימיות ביעילות חישובית גבוהה, מה שמוביל לשיטות כפל מהירות. זה נושא לפוסטים מרתקים ויהיו כאלו אחרי שאתחיל לדבר על התמרת פורייה; כרגע זה לחלוטין <strong>לא רלוונטי</strong> ולכן נעזוב את זה. אנשים רגילים לא מבצעים התמרות פורייה.</p>

<p>מכל מקום, ההצגה של הכפל באמצעות קונבולוציה מבהירה לנו, אני מקווה, למה השיטה עובדת. אין כאן שום Mind blown לדעתי, אם כי המושג של קונבולוציה הוא יפה למדי, וממבט ראשון הוא עשוי גם להיראות מוזר. רק בשל העובדה שהשיטה הזו דוחפת לנו את מושג הקונבולוציה לפרצוף (אנחנו נצטרך להתמודד איתו ולו באופן מובלע, כדי לדעת אילו קבוצות של הצטלבויות שייכות לאותה ספרה) אני חושב שהיא מעניינת ושווה הצגה; קצת חבל לי שבהצגה הסטנדרטית שלה לא מתארים את מושג הקונבולוציה במפורש.</p>

<p>אבל, וכעת אנחנו מגיעים לחלק הוכחני של הפוסט - מי מבין השיטות טובה יותר? האם השיטה היפנית עדיפה על השיטה הרגילה או לא?</p>

<p>נתחיל מהתשובה הלמלמית (לא מועילה, לא מזיקה) המתבקשת - שכל אחד יחליט מה השיטה שיותר טובה לו וישתמש בה. מתמטיקה היא לא מדע מדויק ולכל אחד יש את הגישה שלו לביצוע חישובים מתמטיים. חשוב גם לזכור שביצוע של חישובים זו <strong>לא</strong> מתמטיקה; זה בסך הכל חישוב וזה לא מעניין. החלק ה”מתמטי” בשיטות הללו הוא להבין למה הן עובדות, ועל זה דיברנו. ביצוע פעולות של כפל הוא לא משהו שאנחנו עושים בדרך כלל בחיי היום יום עם נייר ועט; מי שצריך לבצע חישובים על בסיס סדיר לרוב מצויד במחשבון. זה לא אומר שלא צריך לדעת שיטה לכפל - לדעתי תמיד כדאי לדעת לבצע משהו לא מסובך בעצמך גם אם לרוב אפשר להסתמך על כלי כלשהו שיעשה את זה עבורך - אבל שאין שום דבר <strong>קריטי</strong> בלהעדיף שיטה אחת על השניה.</p>

<p>ועדיין, זה בוודאי לא מספיק לומר את זה. הרי מישהו צריך להחליט על איזו שיטה לתת דגש בבית הספר. האם להעביר את הדגש לשיטה היפנית? ובכן, צריך להבדיל בין שני דברים - כמה קשה ללמוד את השיטה, וכמה קשה להשתמש בה בפועל. אני חושב ששאלת ה”כמה קשה ללמוד את השיטה” היא דווקא השאלה הפחות חשובה מבין השתיים, כי אף שיטה אינה כה קשה עד כי נדרש מאמץ יוצא דופן כדי ללמד אותן. עיקר מה שצריך לעשות הוא לתרגל את השיטות ולהתרגל אליהן. לכן יותר מעניין אותי, בטווח הארוך, עד כמה השיטות יעילות להפעלה. לצורך כך אחשוב עליהן בתור אלגוריתמים - כי זה בעצם מה שהן - ואעשה מעין “ניתוח סיבוכיות” לא מדויק שלהן, כשהמטרה שלי היא בכלל להבין אילו פעולות אני מבצע בכל אחת מהשיטות, כמה מהן יש, והאם אפשר להשוות ביניהן בצורה ברורה.</p>

<p>נתחיל בכפל רגיל. נניח שאנחנו כופלים שני מספרים, בני <span>$latex n$</span> ו-<span>$latex k$</span> ספרות, כך ש-<span>$latex k&lt;n$</span>. ראשית אנחנו כותבים את שני המספרים כשהגדול מעל הקטן - זה דורש <span>$latex n+k$</span> צעדי כתיבה. עכשיו, לכל אחת מהספרות של המספר הקטן אנחנו כופלים אותה בכל אחת מספרות המספר הגדול ואולי גם מוסיפים את הנשא מהכפל עם הספרה הקודמת של המספר הגדול. סך הכל <span>$latex n\cdot k$</span> פעולות כפל ו(בערך) <span>$latex n\cdot k$</span> פעולות חיבור. כעת קיבלנו <span>$latex k$</span> מספרים שיש לחבר (המספרים שמתקבלים מכפל כל ספרה במספר הקטן במספר הגדול). האורך של כל אחד מהם הוא (בערך) <span>$latex n$</span> ולכן אנחנו מבצעים (בערך) <span>$latex n\cdot k$</span> פעולות חיבור בסיסיות. הפלט עצמו כולל (בערך) <span>$latex n+k$</span> ספרות והיו לנו (בערך) <span>$latex n\cdot k$</span> ספרות ביניים שכתבנו, כך שסך הכל ביצענו <span>$latex 2\left(n+k\right)+nk$</span> צעדי כתיבה, <span>$latex 2n\cdot k$</span> צעדי חיבור ו-<span>$latex n\cdot k$</span> צעדי כפל. החלק ה”כבד” ביותר כאן הוא ביצוע פעולות הכפל; אנחנו מניחים שמי שמבצע את האלגוריתם זוכר בעל פה את לוח הכפל ולכן הצעדים הללו קלים לו יחסית - לא יותר קשים מאשר צעדי החיבור.</p>

<p>בכפל יפני הסיפור שונה כי הפעולות שאנחנו מבצעים הן בעיקרן שונות. ראשית כל אנחנו צריכים לצייר קווים. כמה קווים? ובכן, <span>$latex n+k$</span> <strong>קבוצות</strong> של קווים, אבל מספר הקווים בקבוצה הוא בין 1 ל-9, כתלות בספרות של המספרים שאנחנו כופלים. זו תכונה שלא קיימת בשיטה הרגילה - בהינתן שאנחנו זוכרים את לוח הכפל בעל פה, לא ממש משנה לנו מה הספרות שיש במספרים שכופלים, בעוד שבשיטה היפנית ספרות גדולות דורשות יותר עבודה (וזה לא ממש מפתיע שבדוגמאות שיש בתמונות ובסרטונים רוב הספרות קטנות).</p>

<p>שימו לב שלא מספיק לצייר את הקווים - צריך גם לעשות את זה טוב, כלומר באופן כזה שקבוצות החיתוכים השונות (בעלות “קו רוחב” שונה) יהיו מובחנות זו מזו בקלות. יש שמגדילים וצובעים קבוצות קווים שמתאימות לספרות שונות בצבעים שונים. בקיצור, סיפור. אני משער שהשרטוט הזה גוזל זמן רב יותר מאשר נדרש לכתוב את שני המספרים שכופלים זה מעל זה כמו בשיטה הרגילה.</p>

<p>כעת מגיע האקשן - ההכפלה. יש לנו <span>$latex n\cdot k$</span> איזורי חיתוך שונים בין קבוצות הישרים, ואנחנו צריכים לספור את כולם. בכל אחד כזה צריך לספור את נקודות החיתוך - והמספר שלהן תלוי לגמרי בגודל הקבוצות שנחתכות, כלומר בגודל הספרות שמכפילים. אם כופלים את 2 ב-2 יהיו לנו רק 4 נקודות חיתוך; אם כופלים את 7 ב-9 יהיו לנו 63 נקודות חיתוך. האם זה סביר לספור את כולן “בעיניים”? לא נראה לי. די בבירור יש כאן מקום לאופטימיזציה כלשהי, אבל על כך נדבר בהמשך.</p>

<p>אחרי שמסכמים את כל הנקודות בקו רוחב מסויים כותבים את הסכום. גם כאן יכול להיות נשא, ויהיה צורך לזכור אותו היכן שהוא כי אחר כך מתחילים לסכום קבוצה חדשה ומי יכול לזכור את הנשא לכל אורך המניה הזה (זכרו - אלגוריתמים מבוצעים על ידי אנשים כמוני, שהם ממש גרועים בחישוב; איש הגשם לא צריך את השטויות הללו, כנראה). כדאי לשים לב שכאן הנשא יכול בהחלט להיות בן כמה ספרות - אם למשל בקו הרוחב יש 5 איזורי חיתוך ובכל אחד יש בערך 50 חיתוכים קיבלנו כבר סכום של 250, ולכן נשא של 25. בקיצור - יש <span>$latex n+k$</span> קווי רוחב שונים (בערך) ולכן נכתוב (בערך) <span>$latex n+k$</span> ספרות ונבצע <span>$latex n+k$</span> פעולות חיבור. סך הכל ביצענו <span>$latex n+k$</span> פעולות של כתיבת ספרות ו-<span>$latex n+k$</span> פעולות של חיבור, אבל גם <span>$latex n+k$</span>פעולות של שרטוט קבוצות קווים ו-<span>$latex n\cdot k$</span> פעולות של מניית חיתוכים.</p>

<p>המסקנה העיקרית והלא מפתיעה היא שלא ממש ברור איך אפשר להשוות את שני האלגוריתמים, הרי הפעולות הבסיסיות שלהם הן שונות לגמרי. אז מה לעשות? אני יכול להריץ את שני האלגוריתמים על אותם קלטים ולמדוד לעצמי זמן, אבל מה תהיה המסקנה מזה? הרי אני מיומן בשיטה הרגילה הרבה יותר מאשר בשיטה היפנית. אם כן, השוואה אבסולוטית לא תהיה לנו. אינטואיטיבית השיטה היפנית נראית לי נחותה יותר בשל מה שהוא גם ה”יתרון” שלה - הצורך לספור חיתוכים בעיניים. נראה לי שזה פשוט לוקח יותר מדי זמן כשיש יותר מדי חיתוכים, לעומת המקבילה של לזכור את לוח הכפל.</p>

<p>בואו ננסה לרגע להבין האם אפשר לשפר את עניין ספירת החיתוכים. אפשר, למשל, לא לצייר קבוצות של קווים, אלא פשוט לצייר קו עם מספר לידו שאומר כמה קווים “אמורים” להיות בקבוצה. כל מה שנותר הוא לזהות נקודות חיתוך ולחשב בראש את הסכום עבור כל קו רוחב. בשיטה הראשונה אנחנו ממש סופרים את הנקודות שמהוות את הקונבולוציה <span>$latex \sum_{i=0}^{k}a_{i}b_{k-i}$</span>, ואילו בשיטה השניה אנחנו רואים את הזוגות <span>$latex a_{i},b_{k-i}$</span> בעיניים ומחשבים את המכפלות-וסכומים שלהם בראש. לדעתי זה מאתגר קצת יותר מאשר ביצוע הכפל-וחיבור-נשא של השיטה הרגילה, ובכל מקרה זה מצריך לזכור את לוח הכפל. אנחנו רואים שאין מנוס מכך - אם לא רוצים לספור חיתוכים פיזית, צריך לזכור את לוח הכפל.</p>

<p>חסרון אחד שאפשר אולי לציין לשיטה היפנית הוא שלא ברור מה עושים עם אפס, אבל זה לא באמת חסרון - פשוט לא מציירים את הקו שלו. אפשר גם לצייר קו מקוקו או קו שכתוב לידו אפס אם לא רוצים להתבלבל - כאשר הסכנה לבלבול היא בהחלטה על אילו קבוצות חיתוכים שייכות לאילו קווי רוחב. עדיין, בכפל רגיל אפס מבלבל עוד פחות - פשוט כותבים אפס בתור אחד מהמספרים שנכנסים לסכום.</p>

<p>עוד חסרון שהוא כנראה די ברור הוא שלא כללתי במדדי הסיבוכיות שלי את סיבוכיות ה<strong>מקום</strong> על הדף שנדרשת כדי לצייר את הציור של הכפל היפני. ככל שיש יותר ספרות שכופלים כך הציור יצטרך להיות יותר גדול על מנת שלא יהיה מבלבל. כפל רגיל נראה לי קומפקטי יותר. האם זה חסרון אמיתי? כנראה שהוא לא נורא במיוחד.</p>

<p>אם כן, האם לדעתי לא ניתן להכריע בין השיטות? לא. לדעתי השיטה הרגילה עדיפה בהרבה, אבל מסיבה שעד כה לא כללתי במערך השיקולים אבל היא תמיד חשובה כשמתכננים אלגוריתם - רובסטיות, או ליתר דיוק - יכולת התמודדות עם שגיאות. השיטה היפנית, כמו כל דבר שבו מונים כמות גדולה של פריטים או מבצעים חישוב ארוך בראש (חישוב הקונבולוציה) מסתמכת על כך שהאדם שמבצע את החישוב יצליח לכלול בראש כמות “גדולה” (יחסית לכפל רגיל) של אינפורמציה מבלי שהמידע הזה ישתבש. כולנו יודעים איך זה משתבש - כמה מאיתנו <strong>לא</strong> באו אל אדם שעוסק באמצע חישוב בראש או ספירה והתחיל לומר לו “שבע-עשרה, חמישים, עשרים ושתיים, שמונים!” כדי לשגע אותו? בסופו של דבר, המטרה של שיטות הכפל הללו היא לאפשר לאדם - שהוא לא מכונה - לבצע חישוב ארוך ומסובך עם הרבה פרטים בלי להתבלבל. שיטות שפותחות פתח לבלבול הן לטעמי פחות טובות, ועשויות לגרום לתסכול לא קטן למי שמשתמש בהן.</p>

<p>אם כן, לסיכום: שיטת הכפל היפני היא ללא ספק מגניבה, אבל כפל ארוך רגיל הוא גם כן דבר מגניב מאין כמותו ולא ברור אם צריך להחליף אותו במשהו. רק בגלל שלמדתם משהו בבית הספר היסודי לא אומר שצריך לקחת אותו כמובן מאליו או שהוא לא דבר מתוחכם!</p>

  </div>

  <hr />
  <p>
    נהניתם? התעניינתם? אם תרצו, אתם מוזמנים לתת טיפ:
  </p>
  <a href='https://ko-fi.com/H2H5XFBQ' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://az743702.vo.msecnd.net/cdn/kofi2.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a><div class="PageNavigation">
    
      <a class="prev" href="/2013/01/15/mirror_mirror/">&laquo; מראה מראה שעל הקיר, למה את מבדילה בין ציר וציר?</a>
    
    
      <a class="next" href="/2013/01/30/irrational_infinity/">למה לא רציונלי לדבר על לא רציונליים (באינסוף) &raquo;</a>
    
  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://gadial.net/2013/01/19/japanese_multiplication/';
      this.page.identifier = 'http://gadial.net/2013/01/19/japanese_multiplication/';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://not-precise.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/2013/01/19/japanese_multiplication/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">לא מדויק</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">לא מדויק</li><li><a class="u-email" href="mailto:gadial@gmail.com">gadial@gmail.com</a></li><li>&copy; כל הזכויות שמורות לגדי אלכסנדרוביץ'</li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://www.facebook.com/%D7%9C%D7%90-%D7%9E%D7%93%D7%95%D7%99%D7%A7-163347110378474"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#facebook"></use></svg> <span class="username">לא מדויק</span></a></li><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>RSS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>בלוג על מתמטיקה ומדעי המחשב</p>
      </div>
    </div>

  </div>

</footer><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="assets/js/jquery-slim.min.js"><\/script>')</script><script src="/assets/js/bootstrap.bundle.js"></script><!-- Default Statcounter code for New blog
http://www.gadial.net/ -->
<script type="text/javascript">
  var sc_project=5444342; 
  var sc_invisible=1; 
  var sc_security="4a89cbe4"; 
  </script>
  <script type="text/javascript"
  src="https://www.statcounter.com/counter/counter.js"
  async></script>
  <noscript><div class="statcounter"><a title="Web Analytics"
  href="https://statcounter.com/" target="_blank"><img
  class="statcounter"
  src="https://c.statcounter.com/5444342/0/4a89cbe4/1/"
  alt="Web Analytics"></a></div></noscript>
  <!-- End of Statcounter Code --></body>

</html>
