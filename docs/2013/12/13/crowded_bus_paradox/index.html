<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>פרדוקס האוטובוס הצפוף - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <meta name="description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://gadial.net/2013/12/13/crowded_bus_paradox/">
    <meta property="og:title" content="פרדוקס האוטובוס הצפוף">
    <meta property="og:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta property="og:site_name" content="לא מדויק">
    <meta property="og:image" content="http://gadial.net/img/main/default-card.png" />
        
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://gadial.net/2013/12/13/crowded_bus_paradox/">
    <meta name="twitter:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta name="twitter:site" content="@" />
    <meta property="twitter:title" content="פרדוקס האוטובוס הצפוף">
    <meta property="twitter:image" content="http://gadial.net/img/main/default-card.png" />
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="לא מדויק - RSS Feed" href="/feed.xml">
       
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Hamburger menu button */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.8em;
            color: white;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .menu-toggle:hover {
            opacity: 0.8;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .top-nav .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-nav .site-title {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0;
                padding: 10px 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            /* Hide nav links by default on mobile */
            .top-nav .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                margin-top: 10px;
            }
            
            /* Show when expanded */
            .top-nav .nav-links.expanded {
                display: flex;
            }
            
            .top-nav .nav-links > a {
                text-align: center;
                padding: 12px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box {
                width: 100%;
                flex-direction: column;
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box input {
                width: 100%;
                margin-bottom: 5px;
                min-width: 0;
            }
            
            .top-nav .search-box button {
                width: 100%;
            }
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        /* Force KaTeX content to wrap by overriding its internal structure */
        .katex-html {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .base {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .mord,
        .katex .mbin,
        .katex .mrel,
        .katex .mopen,
        .katex .mclose,
        .katex .mpunct,
        .katex .minner {
            display: inline !important;
            white-space: normal !important;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
            
            /* Hide post navigation on mobile */
            .post-navigation {
                display: none;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="site-title">
                <a href="/" style="color: white; text-decoration: none;">לא מדויק</a>
                <button class="menu-toggle" onclick="toggleMobileMenu()" aria-label="תפריט">
                    ☰
                </button>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2013/12/11/dpll_algorithm/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">פותרים את SAT - אלגוריתם DPLL</span>
            </a>
            

            
            <a href="/2013/12/26/your_group_linux/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">החבורה שלכם? לינוקס!</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>פרדוקס האוטובוס הצפוף</h1>
            <div class="post-meta">
                <span class="date">2013-12-13</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/הסתברות.html">הסתברות</a>
                    
                    <a href="/categories/משחקים וחידות מתמטיות.html">משחקים וחידות מתמטיות</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/התפלגות בינומית.html">התפלגות בינומית</a>
                    
                    <a href="/tags/התפלגות מולטינומית.html">התפלגות מולטינומית</a>
                    
                    <a href="/tags/מתמטיקה היא מדע אמפירי.html">מתמטיקה היא מדע אמפירי</a>
                    
                    <a href="/tags/תוצאות לא אינטואיטיביות.html">תוצאות לא אינטואיטיביות</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>אהוד אהרוני (שבנוסף למעלליו בפוסט הזה גם <a href="http://www.youtube.com/user/udiprod?feature=watch">יוצר סרטוני וידאו</a> די פנטסטיים למראה) פנה אלי עם סיפור שאותו המציא: ישנה עיירה ובה מפעל, ובכל יום הפועלים נוסעים למפעל באוטובוס. יש 30 פועלים ועומדים לרשותם 3 אוטובוסים שממתינים בחניה, וכל פועל בוחר באקראי לאיזה אוטובוס לעלות (כלומר, לכל אוטובוס יש את אותה הסתברות להיבחר על ידי כל פועל). עבור מתבונן מבחוץ שעוקב אחרי מה שקורה יום אחרי יום, נראה שבתוחלת (כלומר, בממוצע לאורך זמן) כל אוטובוס מכיל 10 אנשים. לעומת זאת, הפועל בוב טוען שחד משמעית, תוחלת מספר האנשים על האוטובוס <strong>שלו</strong> היא גדולה יותר מ-10, כלומר האוטובוס של בוב יותר צפוף ממה שהיה צפוי. ואז באה הפועלת אליס ואומרת שגם אצלה זה ככה!</p>

<p>איך זה ייתכן?</p>

<p>ובכן, אני במבט ראשון לא האמנתי שזה ייתכן ושיערתי שיש כאן בעיה כלשהי בניסוח הסיפור. אז מה עושים במקרים כאלו? כשזה מגיע לשאלות הסתברותיות פשוטות, מתמטיקה יכולה להיות מדע אמפירי לגמרי - אפשר לערוך ניסויים ולראות מה התוצאות שלהן. את הניסויים שלנו אנחנו עורכים בדרך כלל בסימולציית מחשב, אז כתבתי חיש קל סימולציה שכזו שבה פועלים באמת עולים לאוטובוס ואני מודד מה קורה. מדדתי שלושה דברים - את כמות הפעמים שבהן האוטובוס של בוב היה הצפוף ביותר (דהיינו, היו בו ממש יותר אנשים מאשר באוטובוסים האחרים; אם מספר האנשים באוטובוס של בוב היה שווה למספרם באוטובוס אחר, זה לא נחשב), את מספר האנשים הכולל באוטובוס הראשון לאורך כל הימים, ואת מספר האנשים הכולל באוטובוס שבוב היה בו לאורך כל הימים, ואת שלושת המספרים הללו חילקתי במספר הימים של הסימולציה - 100,000. התוצאה: ההסתברות לכך שהאוטובוס של בוב יהיה הצפוף ביותר היא <span class="math">\(0.3812\)</span>; תוחלת מספר האנשים באוטובוס הראשון הייתה <span class="math">\(10.0076\)</span>, ואילו תוחלת מספר האנשים באוטובוס של בוב הייתה <span class="math">\(10.65412\)</span>. במילים אחרות, יש לנו סוג של חוק מרפי הסתברותי: "האוטובוס שאליו אתה עולה יהיה תמיד האוטובוס הצפוף ביותר" (רק לא תמיד אלא בהסתברות כלשהי ש<strong>גדולה</strong> מההסתברות של התפלגות אקראית אחידה).</p>

<p>אוקיי, זה מפתיע.</p>

<p>במבט ראשון היינו מצפים שהמספר הראשון יהיה <span class="math">\(0.333\dots\)</span> - הרי בוב עולה באקראי לאחד מבין שלושת האוטובוסים, אז יש לו הסתברות של שליש לעלות לאוטובוס הצפוף ביותר. אבל כמובן, האינטואיציה הזו שגויה, כי לפעמים בוב <strong>משפיע</strong> על השאלה מהו האוטובוס הצפוף ביותר. זה קורה כאשר יש שני אוטובוסים שמספר האנשים שאינם בוב שעלו אליהם הוא זהה ולאוטובוס השלישי עלו פחות אנשים מאשר לכל אחד משניהם; במקרה הזה, לא משנה איזה משני האוטובוסים בוב יבחר, ההסתברות שלו לבחור את "האוטובוס הצפוף ביותר" תהיה <span class="math">\(\frac{2}{3}\)</span>. בשאר המקרים ההסתברות שלו תהיה תמיד <span class="math">\(\frac{1}{3}\)</span>, כי אם יש רק אוטובוס יחיד עם מספר אנשים גדול ביותר, רק אם בוב יבחר אותו הוא יגיע לאוטובוס הצפוף ביותר.</p>

<p>אם כן, הסיכוי של בוב בכל אחת מהסיטואציות הוא <strong>לפחות</strong> שליש, ובחלק מהסיטואציות הוא <strong>יותר</strong> משליש, ולכן לא מפתיע שהסיכוי שלו בסך הכל להגיע לאוטובוס הצפוף ביותר הוא יותר משליש; אבל לי זה כן נראה מפתיע, ממבט ראשון.</p>

<p>בואו נעבור לדבר קצת על המתמטיקה שמאחורי זה. איך ממדלים מתמטית סיטואציה הסתברותית כמו זו? אני מניח שאתם כבר מכירים את הפורמליזם הסטנדרטי שהמתמטיקאים משתמשים בו כדי לדבר על הסתברות באופן כללי, ואם לא - <a href="http://www.gadial.net/2010/07/29/probability_intro/">יש לי פוסטים על זה</a>. כאן הסיטואציה היא שיש לנו "ניסוי" שמתבצע מספר רב של פעמים בלתי תלויות אחת בשניה. בכל פעם יש לניסוי הזה כמה תוצאות אפשריות, כל אחת עם ההסתברות שלה, ואנחנו מתעניינים בסופו של דבר רק בשאלה כמה תוצאות מכל סוג התקבלו - אין עבורנו חשיבות ל<strong>סדר</strong> שבו הן התקבלו.</p>

<p>בואו נחשוב על מקרה פשוט שבו יש רק שתי תוצאות אפשריות - "הצלחה" או "כשלון". למשל, אנחנו מנסים לקלוע לסל. יש לנו 30 זריקות וההסתברות שלנו לקלוע היא <span class="math">\(\frac{1}{3}\)</span>. עכשיו אפשר לשאול שאלות כמו "מה ההסתברות שנקלע לסל בדיוק 12 פעמים"?</p>

<p>את הסיטואציה הזו מתאר מה שנקרא <strong>משתנה מקרי בינומי</strong>. נהוג לסמן זאת <strong><span class="math">\(X\sim\text{Bin}\left(n,p\right)\)</span> </strong>כאשר <span class="math">\(n,p\)</span> הם הפרמטרים שמאפיינים את המשתנה הבינומי הספציפי הזה: <span class="math">\(n\)</span> הוא מספר הניסויים הכולל שמתקיים (זריקות לסל) ו-<span class="math">\(p\)</span> היא ההסתברות שניסוי "יצליח" (קלענו לסל).</p>

<p>עכשיו, נניח שאנחנו לא שואלים "מה ההסתברות שנקלע לסל בדיוק 12 פעמים" אלא שאלה קצת יותר פשוטה: "מה ההסתברות שנקלע לסל בדיוק ב-12 הזריקות הראשונות ואת היתר נחטיא?". התשובה לזה פשוטה ונובעת מעקרון הכפל בהסתברות, שאומר שאם יש לנו סדרה של ניסויים בלתי תלויים ותוצאות ספציפיות לכל אחד מהניסויים הללו, ההסתברות לקבלת סדרת התוצאות הזו היא בדיוק המכפלה של ההסתברות לכל את התוצאה בכל שלב. במקרה שלנו ההסתברות של קליעה היא <span class="math">\(\frac{1}{3}\)</span> וההסתברות של החטאה היא <span class="math">\(\frac{2}{3}\)</span> ולכן ההסתברות הכוללת היא <span class="math">\(\frac{1}{3}\cdots\frac{1}{3}\cdot\frac{2}{3}\cdots\frac{2}{3}=\left(\frac{1}{3}\right)^{12}\left(\frac{2}{3}\right)^{18}\)</span> .</p>

<p>עכשיו, שימו לב שלא הייתה חשיבות ל<strong>סדר</strong> כאן - כלומר, ההסתברות שקיבלנו לא התעניינה בשאלה אם אנחנו קולעים את 12 הסלים בהתחלה או לא. אפשר באותה מידה היה להסתכל על סדרת קליעות אחרת שכוללת בדיוק 12 קליעות מוצלחות, והיינו מקבלים שההסתברות של אותה סדרת קליעות היא עדיין <span class="math">\(\left(\frac{1}{3}\right)^{12}\left(\frac{2}{3}\right)^{18}\)</span>. לכן אפשר להסיק מכך שההסתברות לקלוע 12 סלים לסל <strong>בסדר כלשהו</strong> שווה ל-<span class="math">\(\left(\frac{1}{3}\right)^{12}\left(\frac{2}{3}\right)^{18}\)</span> כפול מספר הסדרות מאורך 30 של אפסים ואחדים שיש בהן בדיוק 12 פעמים 1 ויתר הפעמים 0 (1 מייצג קליעה מוצלחת). מציאת מספר הסדרות הללו היא בעיה קומבינטורית קלה: <a href="http://www.gadial.net/2010/06/20/combinatorics_intro/">כבר ראינו בבלוג</a> שהתשובה היא <span class="math">\(\frac{30!}{12!18!}\)</span>, ולצורך פשטות מסמנים את המספר הזה בסימון <span class="math">\({30 \choose 12}\)</span> (שנקרא "מקדם הבינום" מסיבות ש<a href="http://www.gadial.net/2010/06/22/newton_binom/">הסברתי פעם בבלוג</a>, ולכן קוראים להתפלגות הזו "בינומית"). לכן ההסתברות לקלוע בדיוק 12 פעמים לסל היא <span class="math">\({30 \choose 12}\left(\frac{1}{3}\right)^{12}\left(\frac{2}{3}\right)^{18}\)</span>.</p>

<p>מכאן אני מקווה שההכללה ברורה: אם יש לנו משתנה מקרי שמתפלג בינומית עם פרמטרים <span class="math">\(n,p\)</span>, <span class="math">\(X\sim\text{Bin}\left(n,p\right)\)</span>, אז <span class="math">\(\text{Pr}\left[X=k\right]={n \choose k}p^{k}\left(1-p\right)^{n-k}\)</span>. נסו להוכיח לעצמכם את הנוסחה הזו אם אתם לא בטוחים שהיא נכונה!</p>

<p>הבנו איך מחשבים את ההסתברות לערך קונקרטי של משתנה בינומי, עכשיו בואו נדבר על ה<strong>תוחלת</strong> שלו. התוחלת היא במובן מסויים הערך ה"ממוצע" של המשתנה: פורמלית, היא מוגדרת בתור <span class="math">\(\text{E}\left[X\right]=\sum k\cdot\text{Pr}\left[X=k\right]\)</span> כאשר המשתנה <span class="math">\(k\)</span> רץ על כל הערכים ש-<span class="math">\(X\)</span> יכול לקבל (כאן אני מניח שיש מספר סופי שלהם ולכן לא צריך להטריד את עצמי עם שאלות כמו מה זה סכום של מספר לא סופי של מחוברים). את התוחלת של משתנה בינומי גם כן <a href="http://www.gadial.net/2010/08/14/random_variables/">חישבתי כבר בעבר</a> ולא אחזור על זה כרגע: היא יוצאת ממש פשוטה - <span class="math">\(np\)</span>. דהיינו, קחו את מספר הניסויים שמבצעים וכפלו אותו בהסתברות שניסוי יצליח.</p>

<p>זה מספיק כדי למצוא שניים משלושת המספרים שהסימולציה שלי החזירה. ראשית, כמה אנשים יהיו בממוצע על אוטובוס מס' 1? ובכן, <span class="math">\(X\)</span> שלנו יספור כמה אנשים עלו לאוטובוס הזה. <span class="math">\(n=30\)</span> במקרה שלנו כי יש 30 אנשים שעולים לאוטובוסים, וכל אחד עולה באופן בלתי תלוי בשני כך שזה אכן מתאים לסיטואציה של משתנה בינומי. ההסתברות שמישהו יעלה לאוטובוס מס' 1 דווקא היא <span class="math">\(p=\frac{1}{3}\)</span>. לכן התוחלת יוצאת 10 - אכן, קרוב מאוד למספר שקיבלנו בפועל.</p>

<p>עכשיו לשאלה השניה - מה תוחלת מספר האנשים ב"אוטובוס של בוב"? כאן החישוב צריך להיות קצת שונה. באוטובוס של בוב תמיד יש לפחות את בוב, והשאלה היא מה קורה עם שאר 29 האנשים. כל אחד מהם עולה לאוטובוס של בוב בהסתברות <span class="math">\(\frac{1}{3}\)</span> כמו קודם, כך שהפעם יש לנו 29 ניסויים, ולכן אנחנו מקבלים שלאוטובוס של בוב עולים בתוחלת <span class="math">\(\frac{29}{3}\)</span> אנשים מלבדו. אם רוצים להיות פורמליים, צריך להגדיר משתנה מקרי <span class="math">\(Y=1+X\)</span> כאשר <span class="math">\(X\sim\text{Bin}\left(29,\frac{1}{3}\right)\)</span> - המשתנה המקרי <span class="math">\(Y\)</span> הזה מתאר את מספר האנשים באוטובוס של בוב. התוחלת שלו שווה ל-</p>

<p><span class="math">\(\text{E}\left[1+X\right]=1+\text{E}\left[X\right]=1+\frac{29}{3}=\frac{32}{3}=10.666\dots\)</span></p>

<p>כאשר כאן השתמשתי בלי הוכחה בכמה עובדות בסיסיות על תוחלת (מה שנקרא <strong>לינאריות התוחלת</strong>). אכן, גם כאן אנחנו רואים שתוצאת הניסוי בפועל הייתה קרובה למספר הצפוי. ושהמספר הצפוי גדול מ-10. חישוב דומה יעבוד, כמובן, גם במקרה הכללי: אם יש לנו <span class="math">\(N\)</span> פועלים ו-<span class="math">\(k\)</span> אוטובוסים אז תוחלת מספר הפועלים באוטובוס מס' 1 היא <span class="math">\(\frac{N}{k}\)</span> אבל תוחלת מספר הפועלים באוטובוס של בוב היא <span class="math">\(\frac{N+k-1}{k}\)</span>.</p>

<p>נותר עדיין להסביר מתמטית את המספר השלישי מבין התוצאות האמפיריות שלי - ההסתברות של 0.38 בערך לכך שבוב יהיה באוטובוס העמוס ביותר. לרוע המזל, אני לא מכיר דרך פשוטה לחשב את ההסתברות הזו שנותנת נוסחה קצרה ויפה (אולי מישהו כן מכיר?), אבל זה כן נותן לי תירוץ להציג את ההכללה של ההתפלגות הבינומית - <strong>התפלגות מולטינומית</strong>.</p>

<p>הרעיון הוא זה: נניח שלניסוי שלנו יש יותר תוצאות מאשר רק "הצלחה/כשלון", ואנחנו רוצים למצוא את ההסתברות עבור כך-וכך תוצאות מכל סוג - שוב, בלי חשיבות לסדר. למשל, נניח שאני זורק כדור לסל ורוצה לספור כמה פעמים קלעתי (בהסתברות <span class="math">\(\frac{1}{3}\)</span>), כמה פעמים הכדור הגיע אל הסל אבל לא נכנס (הסתברות <span class="math">\(\frac{1}{6}\)</span>) וכמה פעמים כל הסיפור הסתיים בצורה מבישה כשהכדור בכלל לא הגיע אל הסל (הסתברות <span class="math">\(\frac{1}{2}\)</span>). לא אלאה אתכם בפרטים אלא אקפוץ להדגמה של מספר סופי: אם אני רוצה לדעת את ההסתברות ל-8 קליעות, 3 החטאות-עם-הגעה-לסל ו-19 החטאות מבישות (שימו לב שהכל מסתכם ל-30), ההסתברות תהיה <span class="math">\(\frac{30!}{8!3!19!}\left(\frac{1}{3}\right)^{8}\left(\frac{1}{6}\right)^{3}\left(\frac{1}{2}\right)^{19}\)</span>. זה נראה כמו הכללה טבעית של הנוסחה שנתתי קודם, רק שהפעם יש לנו שלושה איברים במקום שניים.</p>

<p>כך גם באופן כללי: נניח שיש לנו <span class="math">\(t\)</span> תוצאות אפשריות עם הסתברויות <span class="math">\(p_{1},\dots,p_{t}\)</span> (שמסתכמות ל-1) ואנחנו רוצים לדעת מה ההסתברות לקבל בדיוק <span class="math">\(k_{1}\)</span> תוצאות מסוג מס' 1, <span class="math">\(k_{2}\)</span> תוצאות מסוג מס' 2 וכן הלאה עד <span class="math">\(k_{t}\)</span> תוצאות מסוג מס' <span class="math">\(t\)</span>. נסמן <span class="math">\(n=\sum_{i=1}^{n}k_{i}\)</span> ואז ההסתברות נתונה על ידי הנוסחה <span class="math">\(\frac{n!}{k_{1}!\cdots k_{t}!}p_{1}^{k_{1}}\cdots p_{t}^{k_{t}}\)</span>. בכתיב מקוצר זה יוצא <span class="math">\({n \choose k_{1}\dots k_{t}}\prod p_{i}^{_{k}}\)</span>.</p>

<p>איך זה קשור לבוב והאוטובוסים? חשבו על מה שאמרתי קודם - ההסתברות שבוב יעלה לאוטובוס העמוס ביותר היא <span class="math">\(\frac{2}{3}\)</span> אם יש שני אוטובוסים בעלי אותו מספר אנשים (חוץ מבוב) והשלישי מכיל פחות אנשים, והיא <span class="math">\(\frac{1}{3}\)</span> בסיטואציות אחרות. לכן, אם <span class="math">\(q\)</span> היא ההסתברות לסיטואציה הראשונה, אז ההסתברות הכוללת שבוב יעלה לאוטובוס העמוס ביותר היא <span class="math">\(\frac{2}{3}q+\frac{1}{3}\left(1-q\right)\)</span>. רק צריך לחשב את <span class="math">\(q\)</span>. וכדי לחשב את <span class="math">\(q\)</span> אני משתמש בהתפלגות מולטינומית.</p>

<p>השאלה שאני שואל עכשיו היא זו: איך צריכים 29 אנשים להתחלק לאוטובוסים כך ששני האוטובוסים הראשונים יכילו את אותו מספר אנשים והשלישי יכיל פחות? ובכן, למשל, הם יכולים להתחלק 14 לאוטובוס הראשון, 14 לשני ו-1 לשלישי. נסמן את זה <span class="math">\(\left(14,14,1\right)\)</span>. באופן דומה גם <span class="math">\(\left(13,13,3\right),\left(12,12,5\right),\left(11,11,7\right),\left(10,10,9\right)\)</span> הן אפשרויות חוקיות, אבל <span class="math">\(\left(9,9,11\right)\)</span> כבר לא (כי עכשיו האוטובוס השלישי מכיל את מספר האנשים הגבוה ביותר). עכשיו משתמשים בהתפלגות מולטינומית כדי לדעת מה ההסתברות של כל סיטואציה כזו, ומקבלים את הזוועה הבאה:</p>

<p><span class="math">\(\left(\frac{30!}{14!14!1!}\frac{30!}{13!13!3!}+\frac{30!}{12!12!5!}+\frac{30!}{11!11!7!}+\frac{30!}{10!10!9!}\right)\left(\frac{1}{3}\right)^{30}\)</span></p>

<p>(ה-<span class="math">\(\left(\frac{1}{3}\right)^{30}\)</span> נובע מכך שההסתברות של כל אחד מהאוטובוסים להיבחר היא <span class="math">\(\frac{1}{3}\)</span>, כלומר כל ה-<span class="math">\(p_{i}\)</span>-ים שווים במקרה הזה).</p>

<p>שימו לב שההסתברות הזו עדיין <strong>אינה</strong> <span class="math">\(q\)</span> המדובר; זו ההסתברות שבאוטובוסים 1 ו-2 יהיה מספר אנשים שווה ובאוטובוס מס' 3 יהיה את מספר האנשים הקטן ביותר. באותו האופן יכלנו לבחור שדווקא באוטובוס 2 יהיה מספר האנשים הקטן ביותר, או באוטובוס 1. דהיינו, צריך להכפיל את המספר ההוא ב-3 כדי לקבל את <span class="math">\(q\)</span>.</p>

<p>החישוב הזה אולי נראה מזעזע, אבל במחשב הוא כמובן טריוויאלי לחלוטין - אפילו לא צריך להקליד את כל המספרים אם משתמשים בשפת סקריפטינג נוחה עבור החישובים. התוצאה המספרית הסופית? אני קיבלתי <span class="math">\(0.38159\dots\)</span>, קרוב מאוד לתוצאות האמפיריות. הבעיה היחידה היא שלהכליל את החישוב הזה עבור מספר גדול יותר של אוטובוסים יהיה כאב ראש (עבור מספר גדול יותר של אנשים רק צריך לשנות מספר אחד בשורת הקוד שמבצעת את החישוב) - אולי לכם יהיה פתרון טוב יותר שמוצא את ההסתברות עבור <span class="math">\(N,k\)</span> כלליים? </p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('expanded');
        }
        
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>