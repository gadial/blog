<!DOCTYPE html>
<html lang="he" dir="rtl"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>

    <main class="page-content" aria-label="Content" role="main">
      <div class="wrapper text-right">
        <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<h1>רשימת הסיפורונים של סיפורונובמבר 2024</h1>
<div id="sipuron-list">
<label>חיפוש בטקסט הסיפורים</label>
<input class="search" id="story-search" />
<button class="sort" data-sort="author">מיון על פי שם מזהה</button>
<button class="sort" data-sort="keyword">מיון על פי מילת מפתח</button>
<button class="sort" data-sort="length">מיון על פי אורך</button>
<br />
<label for="authors">סינון על פי שם מזהה</label>
<select name="authors" id="authors_filter" multiple="">
<option value="הכל">הכל</option>
</select>

<label for="keywords">סינון על פי מילת מפתח</label>
<select name="keywords" id="keywords_filter" multiple="">
<option value="הכל">הכל</option>
</select>


  <ul class="list">
  </ul>
</div>

<script type="text/javascript">
$(document).ready(function(){
var options = {
  valueNames: [ 'author', 'keyword', 'length', 'story'],
  searchColumns: ['story']
};
var postList = new List('sipuron-list', options);

function passes_filters(item){
  var selected_authors = $('#authors_filter').val();
  var selected_keywords = $('#keywords_filter').val();
   if ((selected_authors.includes("הכל") || selected_authors.length == 0 || selected_authors.includes(item.values().author)) &&
      (selected_keywords.includes("הכל") || selected_keywords.length == 0 || selected_keywords.includes(item.values().keyword))){
        return true;
      } else {
        return false;
      }
    return false;
}

$('#authors_filter').change(function() {
    postList.filter(passes_filters);        
});

$('#keywords_filter').change(function() {
    postList.filter(passes_filters);
});

});
</script>


      </div>
    </main>
  </body>

</html>
