<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>איך מחשבים דטרמיננטה? - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <meta name="description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב" />
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://gadial.net/2024/12/03/computing_determinants/">
    <meta property="og:title" content="איך מחשבים דטרמיננטה?">
    <meta property="og:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta property="og:site_name" content="לא מדויק">
    

<meta property="og:image" content="http://gadial.net/img/main/default-card.png" />


        
    <!-- Twitter -->
    

<meta name="twitter:card" content="summary">


    <meta name="twitter:url" content="https://gadial.net/2024/12/03/computing_determinants/">
    <meta name="twitter:description" content="לא מדויק - בלוג על מתמטיקה ומדעי המחשב">
    <meta name="twitter:site" content="@" />
    <meta property="twitter:title" content="איך מחשבים דטרמיננטה?">
    

<meta property="twitter:image" content="http://gadial.net/img/main/default-card.png" />


    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="לא מדויק - RSS Feed" href="/feed.xml">
       
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Hamburger menu button */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.8em;
            color: white;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .menu-toggle:hover {
            opacity: 0.8;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .top-nav .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-nav .site-title {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0;
                padding: 10px 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            /* Hide nav links by default on mobile */
            .top-nav .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                margin-top: 10px;
            }
            
            /* Show when expanded */
            .top-nav .nav-links.expanded {
                display: flex;
            }
            
            .top-nav .nav-links > a {
                text-align: center;
                padding: 12px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box {
                width: 100%;
                flex-direction: column;
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .top-nav .search-box input {
                width: 100%;
                margin-bottom: 5px;
                min-width: 0;
            }
            
            .top-nav .search-box button {
                width: 100%;
            }
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        /* Force KaTeX content to wrap by overriding its internal structure */
        .katex-html {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .base {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .mord,
        .katex .mbin,
        .katex .mrel,
        .katex .mopen,
        .katex .mclose,
        .katex .mpunct,
        .katex .minner {
            display: inline !important;
            white-space: normal !important;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
            
            /* Hide post navigation on mobile */
            .post-navigation {
                display: none;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="site-title">
                <a href="/" style="color: white; text-decoration: none;">לא מדויק</a>
                <button class="menu-toggle" onclick="toggleMobileMenu()" aria-label="תפריט">
                    ☰
                </button>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <a href="/categories/">קטגוריות</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2024/11/24/real_numbers_construction_dedekind_cuts/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">אז מה זה בעצם המספרים הממשיים? (חלק ה&#39;: בונים את המספרים הממשיים עם חתכי דדקינד)</span>
            </a>
            

            
            <a href="/2024/12/10/are_most_prime_numbers_small/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">האם רוב המספרים הראשוניים הם קטנים?</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>איך מחשבים דטרמיננטה?</h1>
            <div class="post-meta">
                <span class="date">2024-12-03</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/אלגברה לינארית.html">אלגברה לינארית</a>
                    
                </span>
                
                
                <span class="tags">
                    | תגיות:
                    
                    <a href="/tags/דטרמיננטה.html">דטרמיננטה</a>
                    
                </span>
                
            </div>
        </header>
        
        <article>
            <p>כאשר לומדים אלגברה לינארית, מושג <strong>הדטרמיננטה</strong> צץ בשלב זה או אחר. לפעמים מלמדים אותו מהר יחסית ולפעמים מחכים איתו עד שממש חייבים, כדי לא להפחיד אנשים תמימים, אבל הוא תמיד שם - וזה כי דטרמיננטות זה יופי של דבר כשמפסיקים לפחד מהן. <a href="https://gadial.net/2011/11/10/determinants/">יש לי כבר פוסט</a> שמסביר מהי דטרמיננטה, אבל דבר אחד אין שם: <strong>איך מחשבים אותה</strong>. בפוסט הזה אני רוצה להשלים את החור הזה ולתאר את הדרך הסטנדרטית, שהיא בסך הכל די פשוטה; המוטיבציה שלי מגיעה מכך שלא מזמן נזקקתי לדרך אחרת, שבמובנים מסוימים היא טובה יותר ובמובנים אחרים היא טובה פחות, אבל איתה אחכה לפוסט הבא.</p>
<p>ראשית, בואו ניזכר מה זו דטרמיננטה בעצם. ההיכרות הראשונה שלי עם הנושא הייתה בשיעור מחשבים אי שם בכיתה י' או משהו, שבו מסיבה לא ברורה המורה החליט בתור שאלת שיעורי בית לתת לנו לכתוב קוד שמחשב דטרמיננטות, ולכן בילה כמעט חמש דקות בלהכתיב את השאלה שרובה כללה הסבר של איך בכלל מוגדרת דטרמיננטה. לא רק שלא הבנתי כלום, גם נכנסתי להלם גדול וחרדה מפני הנושא הזה. למה שהמורה יתעלל בנו בצורה כזו? ובכן, כי הוא רצה להציג את המושג של <strong>רקורסיה</strong>, פונקציה שמחשבת משהו על קלט מסוים ידי קריאה לעצמה על קלטים קטנים יותר, וזו בהחלט <strong>אחת הדרכים</strong> שבהן ניתן לחשב דטרמיננטה. האם זו הדרך הנכונה להציג את הנושא? ובכן, לא וכן; לא, כי זה לא נותן לנו מבט בתמונה הגדולה - אבל בשביל זה יש את הפוסט שקישרתי אליו קודם - וכן, כי זה מכניס אותנו ישר למים של ההיבט החישובי.</p>
<p>דטרמיננטה מוגדרת על <strong>מטריצה ריבועית</strong>, כלומר על אוסף של מספרים שמסודר בטבלה עם אותו מספר שורות ועמודות. אם המספר הוא <span class="math">\(n\)</span>, אומרים שזו מטריצה מסדר <span class="math">\(n\times n\)</span>. בדרך כלל מסמנים את זה ב-</p>
<p><span class="math">\(A=\left[\begin{array}{cccc} a_{11} & a_{12} & \cdots & a_{1n}\\ a_{21} & a_{22} &  & a_{2n}\\ \vdots &  & \ddots & \vdots\\ a_{n1} & a_{n2} & \cdots & a_{nn} \end{array}\right]\)</span></p>
<p>הדטרמיננטה של <span class="math">\(A\)</span> מסומנת <span class="math">\(\left|A\right|\)</span> (אבל זה לא ערך מוחלט; זה סימן שנבחר בגלל דמיון שטחי כלשהו בין התכונות של הדטרמיננטה והתכונות של הערך המוחלט) או <span class="math">\(\text{det}A\)</span>. הנה דרך אחת לחשב את <span class="math">\(\left|A\right|\)</span>: אנחנו עוברים על כל האיברים בשורה העליונה של <span class="math">\(A\)</span>. ראשית אנחנו לוקחים את <span class="math">\(a_{11}\)</span> ואז אנחנו שומרים את <span class="math">\(A\)</span> בצד, לוקחים עותק שלה, <strong>מוחקים</strong> מהעותק את השורה והעמודה הראשונה, מחשבים את הדטרמיננטה של המטריצה הקטנה יותר הזו, כופלים את זה ב-<span class="math">\(a_{11}\)</span> ואת התוצאה שומרים בצד.</p>
<p>עכשיו עושים משהו דומה עם <span class="math">\(a_{12}\)</span>: מוחקים את השורה הראשונה והעמודה <strong>השניה</strong>, מקבלים מטריצה קטנה יותר, מחשבים את הדטרמיננטה שלה, כופלים ב-<span class="math">\(a_{12}\)</span> ואז <strong>מחסרים</strong> את התוצאה ממה שקיבלנו קודם. ואז לוקחים את <span class="math">\(a_{13}\)</span> ועושים את אותו הטריק איתו אבל <strong>מחברים</strong> - בקיצור, אנחנו רואים שזו מהומה, ושצריך להכניס קצת סימנים כדי לתאר את זה בצורה פשוטה.</p>
<p>הסימן הראשון שאנחנו רוצים הוא "המטריצה שמקבלים מ-<span class="math">\(A\)</span> כשמוחקים שורה ועמודה ספציפיות". למטריצה כזו קוראים <strong>מטריצת המינור</strong> של השורה והעמודה, ואם השורה היא <span class="math">\(i\)</span> והעמודה היא <span class="math">\(j\)</span> אני אסמן אותה ב-<span class="math">\(A^{ij}\)</span>. אצלנו תמיד מחקתי את השורה הראשונה, אבל זה היה רק לצורך הדוגמא - אפשר להראות שלא משנה איזו שורה אני בוחר, אני אקבל את אותו דבר. אז אני מקבל את הנוסחה הבאה:</p>
<p><span class="math">\(\left|A\right|=\sum_{j=1}^{n}\left(-1\right)^{i+j}a_{ij}\left|A^{ij}\right|\)</span></p>
<p>כאן <span class="math">\(\left|A^{ij}\right|\)</span> הוא הדטרמיננטה של מטריצת המינור, <span class="math">\(a_{ij}\)</span> האיבר שאת השורה והעמודה שלו מוחקים, ו-<span class="math">\(\left(-1\right)^{i+j}\)</span> זו הדרך להשיג את אפקט ה"לחבר ולחסר לסירוגין". הנוסחה הזו שלעיל מתאימה למה שנקרא "פיתוח הדטרמיננטה לפי השורה ה-<span class="math">\(i\)</span>". אפשר לעשות את זה גם לפי עמודות - לבחור עמודה <span class="math">\(j\)</span> ספציפית ולעבור על האיברים שלה אחד-אחד. זה מוביל לנוסחה</p>
<p><span class="math">\(\left|A\right|=\sum_{i=1}^{n}\left(-1\right)^{i+j}a_{ij}\left|A^{ij}\right|\)</span></p>
<p>זו נוסחה רקורסיבית, אז היא צריכה תנאי התחלה - מקרה בסיסי כל כך שבו לא צריך לחשב דטרמיננטה של משהו קטן יותר. די מתבקש להסתכל על המקרה של מטריצה בת איבר בודד ואז הדטרמיננטה שלה היא האיבר הבודד הזה. ומה קורה עם מטריצה מסדר <span class="math">\(2\times2\)</span>?</p>
<p><span class="math">\(A=\left[\begin{array}{cc} a_{11} & a_{12}\\ a_{21} & a_{22} \end{array}\right]\)</span></p>
<p>נפתח את הדטרמיננטה על פי השורה הראשונה: ראשית ניקח את <span class="math">\(a_{11}\)</span>, נמחק את השורה והעמודה הראשונות ונקבל את המטריצה <span class="math">\(\left[a_{22}\right]\)</span> שהדטרמיננטה שלה היא <span class="math">\(a_{22}\)</span>, אז האיבר הראשון בסכום הוא <span class="math">\(a_{11}a_{22}\)</span>. עכשיו נעבור אל <span class="math">\(a_{12}\)</span>, נמחק שורה ראשונה ועמודה שניה, נקבל דטרמיננטה <span class="math">\(a_{21}\)</span>, נכפיל ונשים סימן חיסור על הכל, ונקבל בסך הכל ש-<span class="math">\(\left|A\right|=a_{11}a_{22}-a_{12}a_{21}\)</span>. עכשיו תנסו לעשות את אותו הדבר עם פיתוח של שורה אחרת או עמודה אחרת (למשל, עמודה 2) ותראו איך יוצא אותו דבר (אם סימני הפלוס/מינוס לא מסתדרים תזכרו את הגורם <span class="math">\(\left(-1\right)^{i+j}\)</span>; לא <strong>תמיד</strong> כשמפתחים לפי שורה או עמודה כלשהי, האיבר הראשון שבו מטפלים יהיה עם סימן חיובי).</p>
<pre class="highlight"><code class="language-python">def det(A):
    n = len(A)
    if n == 1:
        return A[0][0]
    result = 0
    for k in range(n):
        minor_matrix = [[A[i][j] for j in range(n) if j != k] for i in range(1, n)]
        result += (-1)**k * A[0][k] * det(minor_matrix)
    return result
</code></pre>

<p>האם זה עובד טוב? לא, זה עובד איום ונורא. זה ירוץ ויחזיר את התוצאה הנכונה, אבל <strong>באיזה מחיר</strong>? המחיר יהיה זמן ריצה גדול (וגם צריכת זכרון מיותרת, אבל בהיקף פחות משמעותי כאן). חשבו על זה כך: אם אני מפעיל את האלגוריתם על מטריצה מסדר <span class="math">\(n\times n\)</span>, אני צריך לחשב את הדטרמיננטה של <span class="math">\(n\)</span> מטריצות מסדר <span class="math">\(\left(n-1\right)\times\left(n-1\right)\)</span>, וכל חישוב כזה דורש חישוב של <span class="math">\(n-1\)</span> דטרמיננטות של מטריצות מסדר <span class="math">\(\left(n-2\right)\times\left(n-2\right)\)</span> וכן הלאה - יוצא שאני מחשב <span class="math">\(n\left(n-1\right)\left(n-2\right)\cdots1=n!\)</span> דטרמיננטות. קצב הגידול של <span class="math">\(n!\)</span> הוא אקספוננציאלי - תמיד חדשות רעות שמדובר על זמן חישוב. על מטריצת <span class="math">\(4\times4\)</span> האלגוריתם הזה יעבוד מעולה ויסתיים חיש קל. על מטריצה מסדר <span class="math">\(1000\times1000\)</span>? אני לא מעז להפעיל אותו.</p>
<p>האם ניתן לייעל את זה? למרבה השמחה כן, אפשר לייעל את החישוב בצורה קיצונית ממש, וכל זה בזכות תכונה קסומה אחת של הדטרמיננטה: היא <strong>כפלית</strong>. אם <span class="math">\(A,B\)</span> הן מטריצות ריבועיות, אז <span class="math">\(\left|AB\right|=\left|A\right|\cdot\left|B\right|\)</span>. ההוכחה היא אפילו לא כל כך מסובכת <a href="https://gadial.net/2011/11/21/matrix_revolutions/">ואני מציג אותה בפוסט שלי</a>, אבל היא דורשת את נקודת המבט התיאורטית יותר על דטרמיננטה שאני לא נכנס אליה כאן. גם לשאלה מה זה בדיוק כפל המטריצות <span class="math">\(AB\)</span> אני לא נכנס; זה לא כפל "איבר-איבר" אלא משהו מתוחכם יותר, אבל יש לי <a href="https://gadial.net/2011/10/06/matrix_product/">פוסט גם על זה</a> ומי שלא מכירים את המושג פשוט יוכלו לסמוך עלי בכמה טענות פשוטות שאני עוד מעט אטען.</p>
<p>לפני שנגיע לשימוש בכפליות של הדטרמיננטה, בואו נחשוב מתי ההגדרה הרקורסיבית כן שמישה בצורה נוחה. המקרה הקלאסי הוא זה: אם יש לי מטריצה שיש בה שורה שכל האיברים בה הם אפס חוץ אולי מאיבר אחד, <strong>מאוד</strong> כדאי לי לפתח את הדטרמיננטה על פי השורה הזו, כי בנוסחה <span class="math">\(\left|A\right|=\sum_{j=1}^{n}\left(-1\right)^{i+j}a_{ij}\left|A^{ij}\right|\)</span> כל האיברים <span class="math">\(a_{ij}\)</span> הולכים לצאת אפס חוץ אולי מאיבר אחד ספציפי, נניח <span class="math">\(a_{ik}\)</span>, ואז נקבל <span class="math">\(\left|A\right|=\left(-1\right)^{i+k}a_{ik}\left|A^{ik}\right|\)</span>. אני עדיין צריך לחשב רקורסיבית את הדטרמיננטה של <span class="math">\(A^{ik}\)</span>, אבל זו רק מטריצה אחת, בניגוד ל-<span class="math">\(n\)</span> מטריצות שהייתי צריך לחשב להן את הדטרמיננטה במקרה הכללי. יותר מזה - אנחנו רואים פה שאם יש במטריצה שורת אפסים, אז הדטרמיננטה שלה יוצאת אפס ואפשר לסיים את החישוב (ואותו דבר עבור טור של אפסים).</p>
<p>זה מאפשר לי לחשב ביעילות את הדטרמיננטה של מטריצות נחמדות, שבהן בכל שורה יש רק איבר אחד שונה מאפס. הדוגמא הקלאסית למטריצה כזו היא <strong>מטריצה אלכסונית</strong>, מטריצה שבה רק האיברים מהצורה <span class="math">\(a_{ii}\)</span> (שנקראים "אברי האלכסון הראשי") יכולים להיות שונים מאפס וכל היתר הם אפס. למשל</p>
<p><span class="math">\(A=\left[\begin{array}{ccc} 13 & 0 & 0\\ 0 & -2 & 0\\ 0 & 0 & 8 \end{array}\right]\)</span></p>
<p>אם נתחיל לפתח את הדטרמיננטה של <span class="math">\(A\)</span> על פי השורה הראשונה, נקבל</p>
<p><span class="math">\(\left|A\right|=13\cdot\left|\begin{array}{cc} -2 & 0\\ 0 & 8 \end{array}\right|\)</span></p>
<p>עכשיו את הדטרמיננטה של המטריצה החדשה אני יכול לחשב באותו אופן - פיתוח על פי השורה הראשונה, שהוא פשוט כפל במספר שכתוב בשורה הראשונה כפול הדטרמיננטה של מה שנשאר מהמטריצה כש"מגלחים" ממנה את השורה והעמודה הראשונה, וכן הלאה. אני אקבל <span class="math">\(\left|A\right|=13\cdot\left(-2\right)\cdot8\)</span>: הדטרמיננטה של מטריצה אלכסונית היא מכפלת האיברים על האלכסון.</p>
<p>אם זה ברור, בואו נשים לב שבעצם ראיתי כאן יותר מזה. כשאני מפתח את הדטרמיננטה על פי השורה הראשונה, האיבר היחיד שרלוונטי הוא ה-13 שבמקום הראשון. עבורו, אני "מגלח" גם את העמודה הראשונה מהמטריצה. זו הסיבה שאברי העמודה הזו לא משתתפים בהמשך החישוב - שהסירו אותם בצורה הזו. לא שהם אפסים. החישוב היה ממשיך באותו אופן בדיוק גם אם הם לא היו אפסים. כלומר, אם המטריצה הייתה</p>
<p><span class="math">\(A=\left[\begin{array}{ccc} 13 & 0 & 0\\ 42 & -2 & 0\\ 555 & 0 & 8 \end{array}\right]\)</span></p>
<p>הדטרמיננטה שלה בכלל לא הייתה משתנה - הפיתוח לפי השורה הראשונה היה מניב <span class="math">\(\left|A\right|=13\cdot\left|\begin{array}{cc} -2 & 0\\ 0 & 8 \end{array}\right|\)</span> באותה צורה כמו קודם. זה נכון שהפיתוח לפי <strong>העמודה</strong> הראשונה היה עכשיו מתנהל שונה לגמרי, אבל הוא היה מגיע לאותה תוצאה סופית (נסו!)</p>
<p>באופן דומה גם בעמודה השניה יכולים להופיע איברים שונים מאפס - אבל רק <strong>מתחת</strong> ל-<span class="math">\(-2\)</span> שבאמצע, כי איברים מעליו ישפיעו על שורות שמופיעות בחישוב של הדטרמיננטה לפני שהעמודה של <span class="math">\(-2\)</span> נמחקת. כלומר, גם הדטרמיננטה של המטריצה הזו היא מכפלת אברי האלכסון:</p>
<p><span class="math">\(A=\left[\begin{array}{ccc} 13 & 0 & 0\\ 42 & -2 & 0\\ 555 & 9999 & 8 \end{array}\right]\)</span></p>
<p>התוצאה הזו מראה שמטריצות שבהן "החצי העליון" של המטריצה, מעל האלכסון הראשי, הוא אפסים הן מטריצות מעניינות. למטריצות כאלו קוראים "מטריצה משולשית תחתונה" (תחתונה, כי האיזור שבו כן יכולים להיות דברים שונים מאפס הוא זה שמתחת לאלכסון הראשי). פורמלית, זו מטריצה שבה אם <span class="math">\(j>i\)</span> אז <span class="math">\(a_{ij}=0\)</span> (אם מספר העמודה גדול ממספר השורה, הכניסה היא אפס). מה שראינו עכשיו הוא שבמטריצות כאלו, הדטרמיננטה היא מכפלת אברי האלכסון הראשי. באופן דומה מגדירים גם "מטריצה משולשית עליונה" שבה אם <span class="math">\(i>j\)</span> אז <span class="math">\(a_{ij}=0\)</span> ופיתוח הדטרמיננטה לפי עמודות ולא לפי שורות מראה שגם במקרה הזה הדטרמיננטה של מטריצה כזו היא מכפלת אברי האלכסון הראשי. </p>
<p>זה יפה מאוד, אבל איך זה עוזר לנו לחשב דטרמיננטה במקרה הכללי? כאן מגיע הפאנץ' הנחמד: יש כמה פעולות פשוטות שאפשר לבצע על מטריצה שהופכות אותה למטריצה משולשית, והשינויים שהפעולות הללו עושים לדטרמיננטה הם זניחים עד לא קיימים. זה מתקשר לנושא של <a href="https://gadial.net/2011/10/05/matrix_row_reducing/">דירוג מטריצות</a> אבל אני לא אצטרך לדבר על הנושא הזה בצורה הכללית שלו, אז נתמקד במה שעוזר לנו כאן.</p>
<p>בשביל חישוב דטרמיננטה, מספיקים לנו שתי פעולות שאפשר לבצע על מטריצה:</p>
<ul> <li>להחליף שתי שורות במטריצה</li>


<li>לקחת שורה אחת, לכפול אותה במספר כלשהו, ולחבר לשורה אחרת</li>

</ul>

<p>בואו נדגים את זה. הנה מטריצה:</p>
<p><span class="math">\(A=\left[\begin{array}{ccc} 2 & 8 & 3\\ 4 & 9 & 1\\ 3 & 3 & 3 \end{array}\right]\)</span></p>
<p>אם אני אחליף את השורה השניה והשלישית, אני אקבל</p>
<p><span class="math">\(A=\left[\begin{array}{ccc} 2 & 8 & 3\\ 3 & 3 & 3\\ 4 & 9 & 1 \end{array}\right]\)</span></p>
<p>האם הפעולה הזו תשנה את הדטרמיננטה של המטריצה? כן! אבל בצורה פשוטה: הדטרמיננטה תוכפל ב-<span class="math">\(-1\)</span>, וזה יקרה תמיד, לא משנה אילו שתי שורות נחליף. אולי יהיה יותר קל לראות את זה קורה אם נתחיל עם מטריצה אלכסונית פשוטה:</p>
<p><span class="math">\(B=\left[\begin{array}{ccc} 1 & 0 & 0\\ 0 & 1 & 0\\ 0 & 0 & 1 \end{array}\right]\)</span></p>
<p>בבירור <span class="math">\(\left|B\right|=1\)</span> כי זו מכפלת אברי האלכסון. עכשיו, בואו נחליף את השורה השניה בשלישית ונקבל</p>
<p><span class="math">\(B=\left[\begin{array}{ccc} 1 & 0 & 0\\ 0 & 0 & 1\\ 0 & 1 & 0 \end{array}\right]\)</span></p>
<p>עכשיו זו כבר לא מטריצה משולשית אז מכפלת אברי האלכסון לא תיתן לנו את הדטרמיננטה, אבל עדיין אפשר לפתח אותה על פי הכללים הרגילים, שורה-שורה, ונקבל</p>
<p><span class="math">\(\left|B\right|=1\cdot\left|\begin{array}{cc} 0 & 1\\ 1 & 0 \end{array}\right|=1\cdot\left(-1\right)=-1\)</span></p>
<p>זה גם מה שיקרה במקרה הכללי אם ניקח מטריצה שכולה 1-ים על האלכסון הראשי ונחליף שתי שורות: אם נפתח את הדטרמיננטה וראשית כל נפתח אותה לפי השורות שלא השתנו, נקבל מכל שורה כזו 1, וכולם יוכפלו בסוף ב-<span class="math">\(\left|\begin{array}{cc} 0 & 1\\ 1 & 0 \end{array}\right|\)</span>, שזו הדטרמיננטה של מה שיישאר משתי השורות שכן הוחלפו, אחרי שכל יתר העמודות נקצצו מהמטריצה. כלומר (בנפנוף ידיים) לכל החלפת שורות, נקבל שהדטרמיננטה של המטריצה היא <span class="math">\(-1\)</span>.</p>
<p>עכשיו מגיע הקסם, ואיך שאני אוהב את הקסם הזה! אם ניקח את <span class="math">\(B\)</span> שלאחר ההחלפה ונכפול אותה ב-<span class="math">\(A\)</span> המקורית, נקבל:</p>
<p><span class="math">\(\left[\begin{array}{ccc} 1 & 0 & 0\\ 0 & 0 & 1\\ 0 & 1 & 0 \end{array}\right]\left[\begin{array}{ccc} 2 & 8 & 3\\ 4 & 9 & 1\\ 3 & 3 & 3 \end{array}\right]=\left[\begin{array}{ccc} 2 & 8 & 3\\ 3 & 3 & 3\\ 4 & 9 & 1 \end{array}\right]\)</span></p>
<p>מה קרה פה? הכפל במטריצה <span class="math">\(B\)</span> אחרי החלפת השורה היה בעל אפקט של ביצוע החלפת שורה על <span class="math">\(A\)</span>! כלומר, הצלחנו לתאר את הפעולה "החלפת שורה" בתור "כפל במטריצה כלשהי". עכשיו, בגלל שאני יודע ש-<span class="math">\(\left|BA\right|=\left|B\right|\left|A\right|\)</span> ובגלל ש-<span class="math">\(\left|B\right|=-1\)</span> כפי שזה עתה ראינו, אני מקבל שהדטרמיננטה של <span class="math">\(A\)</span> אחרי החלפת שורות - וזה יעבוד <strong>לכל</strong> פעולה בודדת של החלפת שורות - הוא כפל ב-<span class="math">\(-1\)</span>, כמו שהבטחתי.</p>
<p>האם אפשר לעשות את אותו תעלול גם עבור הפעולה המסובכת יותר, "לקחת שורה אחת, לכפול אותה במספר כלשהו, ולחבר לשורה אחרת"? ובכן, בואו ננסה דוגמא. נלך אל <span class="math">\(B\)</span> המקורית, נכפול את השורה הראשונה ב-<span class="math">\(-2\)</span> ונחבר אותה אל השורה השניה. שימו לב שאני <strong>לא</strong> משנה את השורה הראשונה; ההכפלה שלה במשהו היא רק לצורך חיבור עם השורה האחרת (יש גם פעולה של הכפלה של שורה, אבל אני לא צריך אותה פה; אותו הטריק עם <span class="math">\(B\)</span> יעבוד גם עבור הפעולה הזו ויראה שכפל שורה ב-<span class="math">\(\lambda\)</span> מכפיל את הדטרמיננטה ב-<span class="math">\(\lambda\)</span>). נקבל:</p>
<p><span class="math">\(B=\left[\begin{array}{ccc} 1 & 0 & 0\\ -2 & 1 & 0\\ 0 & 0 & 1 \end{array}\right]\)</span></p>
<p>מה הדטרמיננטה של <span class="math">\(B\)</span> החדשה? ובכן... אה... זה קצת מוזר. השינוי השפיע רק מתחת לאלכסון, לא מעליו, אז עדיין יש לי מטריצה משולשית, ולכן הדטרמיננטה היא עדיין רק מכפלת אברי האלכסון ולכן היא 1, כלומר היא... לא השתנתה בכלל? משהו פה לא מסתדר לי. אולי אם ניקח את השורה השניה ונוסיף אותה לשלישית? לא, גם אז זה יוצא מטריצה משולשית... ואם נוסיף את השלישית לשניה? אז מתקבלת מטריצה משולשית עליונה ולא תחתונה, אבל הדטרמיננטה היא עדיין 1... ובכן... ממש מוזר אבל נראה שלא משנה איך נבצע אותה, הפעולה "לקחת שורה אחת, לכפול אותה במספר כלשהו, ולחבר לשורה אחרת" פשוט <strong>לא משנה </strong>את הדטרמיננטה של <span class="math">\(B\)</span>.</p>
<p>בואו ניקח את <span class="math">\(B\)</span> שחישבתי קודם, זו שבה חיסרתי את פעמיים השורה הראשונה מהשניה, ונכפול אותה ב-<span class="math">\(A\)</span> המקורית. נקבל:</p>
<p><span class="math">\(\left[\begin{array}{ccc} 1 & 0 & 0\\ -2 & 1 & 0\\ 0 & 0 & 1 \end{array}\right]\left[\begin{array}{ccc} 2 & 8 & 3\\ 4 & 9 & 1\\ 3 & 3 & 3 \end{array}\right]=\left[\begin{array}{ccc} 2 & 8 & 3\\ 0 & -7 & -5\\ 3 & 3 & 3 \end{array}\right]\)</span></p>
<p>כלומר הטריק עבד שוב: ההכפלה ב-<span class="math">\(B\)</span> הייתה בדיוק בעלת האפקט של "קח את השורה הראשונה של <span class="math">\(A\)</span>, כפול במינוס 2, חבר לשורה השניה" ולכן הטריק של הדטרמיננטה של המכפלה מספר לנו שבמקרה הזה, גם הדטרמיננטה של <span class="math">\(A\)</span> לא תשתנה. זה נכון באופן כללי: הפעולה "קח שורה כלשהי, והוסף אותה כשהיא מוכפלת בסקלר לאחת השורות האחרות" <strong>לא משנה את הדטרמיננטה</strong>. אף פעם.</p>
<p>אבל עכשיו בואו ותראו מה קרה. מהמטריצה <span class="math">\(A\)</span> המסובכת קיבלתי גרסה חדשה של <span class="math">\(A\)</span>, עם אותה דטרמיננטה, אבל שנראית יותר פשוטה: יש בה 0 באחד המקומות. זה לא קרה בטעות: אני הסתכלתי על <span class="math">\(A\)</span>, ראיתי שבעמודה הראשונה, יש בשורה הראשונה 2 ובשורה השניה 4 ושאלתי את עצמי "במה אני צריך לכפול את 2 כדי שאחרי שאחבר אותו אל 4 אקבל 0?" וזה היה בדיוק <span class="math">\(-2\)</span> אז זה מה שעשיתי. עכשיו נעשה את זה במקרה המלוכלך יותר, של השורה השלישית: בשורה השניה יש 2, בשלישית יש <span class="math">\(3\)</span>, אז אני צריך לכפול ב-<span class="math">\(-\frac{3}{2}\)</span>. זה אולי יגרום לכל המספרים שמופיעים בשורה השלישית במטריצה להיות שברים מעיקים, אבל לא אכפת לי! אני אעשה את זה! הנה!</p>
<p><span class="math">\(\left[\begin{array}{ccc} 2 & 8 & 3\\ 0 & -7 & -5\\ 0 & -9 & -\frac{3}{2} \end{array}\right]\)</span></p>
<p>עכשיו אנחנו מאוד קרובים למטריצה משולשית - רק ה-<span class="math">\(-9\)</span> בשורה השלישית מפריע לנו. אני יכול להעלים אותו על ידי כפל השורה השניה ב-<span class="math">\(-\frac{9}{7}\)</span> וחיבור שלה לשלישית, ואני אקבל</p>
<p><span class="math">\(\left[\begin{array}{ccc} 2 & 8 & 3\\ 0 & -7 & -5\\ 0 & 0 & \frac{69}{14} \end{array}\right]\)</span></p>
<p>קיבלתי על האלכסון את המספר <span class="math">\(\frac{69}{14}\)</span>. זה לא נראה טוב. זה נראה כמו שבר משובר. זה בעצם העונש שלי על שתי פעולות של איפוס איברים שעשיתי "בכוח", על ידי זה שהיה לי <span class="math">\(a\)</span> בכניסה אחת ו-<span class="math">\(b\)</span> בכניסה אחרת וכפלתי ב-<span class="math">\(-\frac{b}{a}\)</span> וחיברתי, בלי שיהיה איזה צמצום נחמד שמערב את <span class="math">\(a,b\)</span>. זו גם בדיוק הנקודה שלי: לא צריך שדברים יסתדרו "יפה". אפשר פשוט לעשות את זה בכוח - או טוב יותר, לתת למחשב לעשות את זה. למחשב לא אכפת אם החישובים הם מכוערים, הוא פשוט יעשה את זה.</p>
<p>וכעת, כדי לקבל את הדטרמיננטה של המטריצה המקורית, כל מה שנשאר לעשות הוא לכפול את האיברים שעל האלכסון ולקבל ש...<span class="math">\(2\cdot\left(-7\right)\cdot\frac{69}{14}=-69\)</span>. הא. קיבלנו בסופו של דבר דטרמיננטה שהיא לא שבר אלא מספר שלם נחמד. זה לא באמת מפתיע, אם חושבים על זה - בהגדרה שנתתי לדטרמיננטה (וגם בהגדרות התיאורטיות יותר) לא מעורב חילוק - יש לנו סכומים של מכפלות של האיברים שבתוך המטריצה, כך שאם כולם היו מספרים שלמים, גם הדטרמיננטה תצא מספר שלם.</p>
<p>מכאן מגיעה בעצם המוטביציה העכשווית שלי לפוסט הזה ופוסט ההמשך; מבלי להיכנס לפרטים (שיגיעו בפוסט הבא), הגעתי לסיטואציה שבה אני באמת נזקק לחישוב דטרמיננטה של מטריצה; מטריצה <span class="math">\(6\times6\)</span> עם ערכים שהם מספרים שלמים, אבל גדולים למדי (נאמר, בני 15 ספרות). הדבר הראשון שעשיתי היה להשתמש בספריה של פייתון לחישובים מתמטיים שנקראת numpy והיא כשלה באופן מחפיר כי רמת הדיוק שלה הייתה מוגבלת והמספרים היו גדולים מדי עבורה; התוצאה שקיבלתי לא הייתה קירוב טוב של הדטרמיננטה שציפיתי לקבל אלא מספר לא קשור בעליל. מה שמייד אמרתי לעצמי הוא "אה-הא! הבעיה היא שהכנסתי שברים לתמונה! אני אחפש אלגוריתם שבמקרה של מטריצה עם איברים שלמים לא מתדרדר לסיטואציה שבה כתובים בה שברים" וחיפשתי ואפילו מצאתי אלגוריתם כזה שהוא די מרהיב לטעמי, ומימשתי אותו והכל עבד מצוין. רק מה? גם האלגוריתם הנאיבי שתיארתי בהתחלה עובד מצוין על אותה מטריצת <span class="math">\(6\times6\)</span> כי עבור מטריצות <span class="math">\(6\times6\)</span> זמן הריצה שלו הוא עדיין די סבבה. הלקח הוא תמיד לנסות קודם את הפתרון הנאיבי אלא אם רוצים להיתקל בנושאים מגניבים לפוסט (כמו כן גם גישת ה"לחלק" הייתה עובדת טוב אם הייתי משתמש בספריית פייתון שיודעת לייצר שברים ברמת דיוק אינסופית - ויש כזו ואני באמת משתמש בה מדי פעם).</p>
<p>בואו נחזור עכשיו לחישוב דטרמיננטה בשיטה שהצגתי. כל מה שראינו עד עכשיו היה דוגמא; בואו נבין מה עושים באופן כללי. אז נניח שיש לנו מטריצה כללית, היא נראית ככה:</p>
<p><span class="math">\(A=\left[\begin{array}{cccc} a_{11} & a_{12} & \cdots & a_{1n}\\ a_{21} & a_{22} & \cdots & a_{2n}\\ \vdots & \vdots & \ddots & \vdots\\ a_{n1} & a_{n2} & \cdots & a_{nn} \end{array}\right]\)</span></p>
<p>אותי מה שמעניין כאן הוא העמודה הראשונה. היעד שלי הוא ליצור מטריצה משולשית עליונה, אז בשביל זה אני רוצה לאפס את כל הכניסות בעמודה הראשונה. את זה אני אעשה בכוח, כפי שתיארתי כבר. כדי לאפס את <span class="math">\(a_{21}\)</span> אני מחבר לשורה השניה את הראשונה כשהיא מוכפלת ב-<span class="math">\(-\frac{a_{21}}{a_{11}}\)</span>, בשביל השלישית אני מכפיל ב-<span class="math">\(-\frac{a_{31}}{a_{11}}\)</span> וכן הלאה. אני אקבל:</p>
<p><span class="math">\(A=\left[\begin{array}{cccc} a_{11} & a_{12} & \cdots & a_{1n}\\ 0 & \frac{a_{22}a_{11}-a_{21}a_{12}}{a_{11}} & \cdots & \frac{a_{2n}a_{11}-a_{21}a_{1n}}{a_{11}}\\ \vdots & \vdots & \ddots & \vdots\\ 0 & \frac{a_{n2}a_{11}-a_{n1}a_{12}}{a_{11}} & \cdots & \frac{a_{nn}a_{11}-a_{n1}a_{1n}}{a_{11}} \end{array}\right]\)</span></p>
<p>החל מהנקודה הזו, העמודה והשורה הראשונות לא מעניינות אותי יותר. הרי אם אני אתחיל לפתח את הדטרמיננטה על פי העמודה הראשונה, אני אקבל שהיא שווה ל-<span class="math">\(a_{11}\)</span> כפול הדטרמיננטה של מה שמתקבל ממחיקת השורה והעמודה הראשונה. אז נמחק אותן ונטפל ביתר המטריצה על פי אותו עיקרון, עד שנסיים לטפל בכל העמודות. אם כן, האם סיימנו? לא, בגלל שהתעלמתי מבעיה אחת שיכולה לצוץ: מה אם <span class="math">\(a_{11}=0\)</span>?</p>
<p>במקרה הזה, יש שתי אפשרויות: או ש<strong>כל</strong> האיברים בעמודה הראשונה הם אפס, ובמקרה הזה הדטרמיננטה של המטריצה היא אפס; או שיש איבר כלשהו ששונה מאפס. במקרה השני, <strong>נחליף</strong> את השורה של האיבר הזה עם השורה הראשונה הנוכחית, ונזכור שזה "עלה לנו" בהכפלת הדטרמיננטה הכוללת ב-<span class="math">\(-1\)</span> (ואם נחליף עוד שורות בהמשך זה עשוי לבטל את זה).</p>
<p>האם האלגוריתם הזה יעיל? בהחלט. כדי לחשב דטרמיננטה של מטריצה מסדר <span class="math">\(n\times n\)</span> אנחנו צריכים לבצע בערך <span class="math">\(n^{2}\)</span> פעולות חשבוניות, ואחריהן לחשב דטרמיננטה של מטריצה <strong>אחת</strong> מסדר <span class="math">\(\left(n-1\right)\times\left(n-1\right)\)</span>, כלומר אם אנחנו מחפשים הערכה גסה לזמן הריצה היא תהיה <span class="math">\(n^{2}+\left(n-1\right)^{2}+\ldots+1^{2}\)</span> וזה בערך מסדר גודל של <span class="math">\(n^{3}\)</span> - משמעותית יותר טוב מזמן ריצה אקספוננציאלי (אבל זה <strong>עדיין</strong> זמן ריצה בעייתי עבור מטריצות ענק, ולכן יש כאן פתח לעולם שלם של אופטימיזציות שאני לא אדבר עליו).</p>
<p>כשאני בא לממש את הדבר הזה בפועל, אני לא אטרח לממש רקורסיה כי זה סתם בזבזני (קריאה לפונקציה תמיד דורשת אקסטרה זמן ומשאבים), את כל השינויים אפשר לבצע כבר ברמת המטריצה המקורית. הנה קוד שעושה את העבודה:</p>
<pre class="highlight"><code class="language-python">def det(A):
    result = 1
    n = len(A)
    # go over all columns k=0,1,...,n-1
    for k in range(n):
        if A[k][k] == 0:
            for i in range(k+1, n):
                if A[i][k] != 0:
                    A[k], A[i] = A[i], A[k]
                    result *= -1
                    break
            if A[k][k] == 0:
                return 0
        # go over all rows i=k+1,k+2,...,n-1
        result *= A[k][k]
        for i in range(k+1, n):
            factor = A[i][k] / A[k][k]
            # go over all the nonzero elements in row i
            for j in range(k, n):
                A[i][j] -= factor * A[k][j]
    return result
</code></pre>

<p>אז זו הדרך הרגילה לחישוב דטרמיננטות; בפוסט הבא נראה משהו קצת שונה.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('expanded');
        }
        
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>