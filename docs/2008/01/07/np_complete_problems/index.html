<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>על בעיות שהן בכלל תסבוכת שלמה - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2007/12/27/questions_and_answers_1/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">שאלות ותשובות - מקבץ מס’ 1</span>
            </a>
            

            
            <a href="/2008/01/11/radians/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">כמה מעלות טובות לרדיאן עלינו</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>על בעיות שהן בכלל תסבוכת שלמה</h1>
            <div class="post-meta">
                <span class="date">2008-01-07</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/תורת הסיבוכיות.html">תורת הסיבוכיות</a>
                    
                </span>
                
                
            </div>
        </header>
        
        <article>
            <p>פעם, לפני שנים רבות (שבועיים?), <a href="http://www.gadial.net/2007/12/16/np_haystack/">דיברתי</a> על מחלקת הבעיות <a href="http://he.wikipedia.org/wiki/NP">NP</a>. כזכור, היא כללה את כל בעיות ההכרעה (שאלות "כן/לא") שעבורן ניתן לבדוק ב"בקלות" הוכחה לכך שהתשובה חיובית <strong>אם</strong> היא חיובית. המחלקה הזו כוללת בעיות מעניינות ומעשיות רבות - למשל, האם מספר הוא <a href="http://he.wikipedia.org/wiki/%D7%9E%D7%A1%D7%A4%D7%A8_%D7%A8%D7%90%D7%A9%D7%95%D7%A0%D7%99">ראשוני</a> או פריק, האם מערכת <a href="http://he.wikipedia.org/wiki/%D7%9E%D7%A9%D7%95%D7%95%D7%90%D7%94_%D7%9C%D7%99%D7%A0%D7%90%D7%A8%D7%99%D7%AA">משוואות לינאריות</a> היא בעלת פתרון במספרים שלמים בלבד (והמהדרין יגידו, עם הערכים 0 או 1 בלבד), האם קיים מסלול בקבוצה נתונה של ערים וכבישים המחברים אותן, כך שעוברים בכל עיר פעם אחת בלבד (דבר כזה מכונה "<a href="http://he.wikipedia.org/wiki/%D7%9E%D7%A1%D7%9C%D7%95%D7%9C_%D7%94%D7%9E%D7%99%D7%9C%D7%98%D7%95%D7%A0%D7%99">מסלול המילטוני</a>"), ועוד כהנה וכהנה. כעת אני רוצה לדבר על הקבוצה החשובה ביותר של בעיות (את חלקן הזכרתי כרגע) - <a href="http://he.wikipedia.org/wiki/%D7%9E%D7%97%D7%9C%D7%A7%D7%AA_%D7%A1%D7%99%D7%91%D7%95%D7%9B%D7%99%D7%95%D7%AA_NPC">הבעיות ה-NP-שלמות</a>.</p>
<p>נתחיל בבדיחה מוכרת על מתמטיקאים: שמים פיזיקאי ומתמטיקאי בחדר עם קומקום ריק ומבקשים מהם להכין תה. הפיזיקאי נוהג כך: הוא ממלא את הקומקום במים, מרתיח אותם, ומוזג אותם לכוס תה. המתמטיקאי, כדי להכין את התה שלו, לוקח את הקומקום המלא במים רותחים, מרוקן אותו לכיור ואומר "עכשיו חזרנו לבעיה שכבר פתרנו".</p>
<p>הרעיון כאן הוא שהמתמטיקאי השתמש ב<a href="http://he.wikipedia.org/wiki/%D7%A8%D7%93%D7%95%D7%A7%D7%A6%D7%99%D7%94_%D7%97%D7%99%D7%A9%D7%95%D7%91%D7%99%D7%AA"><strong>רדוקציה</strong></a>. הוא לקח בעיה כלשהי שהיה עליו לפתור (הכנת תה עם קומקום חצי-מלא של מים רותחים) והמיר אותה בבעיה שאת פתרונה הוא כבר ראה (הכנת תה עם קומקום ריק). זה מבטיח לו שהוא לא יצטרך כלל לחשוב על המשך הפתרון - מספיק היה לו לחשוב על הצמצום עצמו לבעיה שכבר נפתרה.</p>
<p>גם במדעי המחשב (שהם, לטעמי, פשוט ענף של המתמטיקה) נוהגים לפי אותה גישה. כאשר רוצים לפתור בעיה כלשהי, הדבר הנוח ביותר לעשותו (אם כי לא בהכרח היעיל ביותר) הוא לצמצם אותה לבעיה שכבר הכרנו. זה כך בתכנות "אמיתי", שבו משתדלים כל הזמן להשתמש בפונקציות ספריה מוכנות (שמיועדות, מן הסתם, לבעיות כלליות ולא בהכרח לבעיה הספציפית שאנו רוצים לפתור) במקום להמציא את הגלגל מחדש; וזה נכון שבעתיים במדעי המחשב התיאורטיים, שבהם רדוקציות משמשות ככלי יעיל לדיבור על "קושי" של בעיות. באופן גס אפשר לומר שבעיה A קשה יותר מבעיה B אם הבעיה B ניתנת לרדוקציה לבעיה A - כלומר, אם העובדה שאנו יודעים לפתור את A מבטיחה שנוכל לפתור גם את B.</p>
<p>דוגמה טריוויאלית היא הקשר שבין בעיית בדיקת הראשוניות של מספר ובין מציאת הפירוק לגורמים שלו. ברור שאם אנו יודעים איך לפרק מספר לגורמים, נוכל גם לבדוק בקלות אם הוא ראשוני או לא - פשוט נפרק אותו לגורמים ונבדוק האם יש רק שני גורמים - הוא עצמו ו-1. על כן, בעיית בדיקת הראשוניות "קלה יותר" מאשר בעיית הפירוק לגורמים. למעשה, נכון לומר "קלה לכל היותר כמו" כי ייתכן שוויון - אבל כרגע לא מוכר שוויון שכזה. בפרט, בעיית בדיקת הראשוניות נפתרה בזמן פולינומי (<a href="http://en.wikipedia.org/wiki/AKS_primality_test">אלגוריתם AKS</a> המפורסם) אבל בעיית הפירוק לגורמים - טרם (ואם תיפתר, זה יהיה סופה של <a href="http://he.wikipedia.org/wiki/RSA">שיטת ההצפנה RSA</a>, שגם היא "קלה לכל היותר כמו" פירוק לגורמים).</p>
<p>אגדיר בצורה פורמלית רק רדוקציות מבעיות הכרעה לבעיות הכרעה, למרות שקיימת דרך כללית יותר לדבר על רדוקציות (בפרט, באמצעות המושג של "אורקל", שעליו אני מקווה לדבר בעתיד). סוג הרדוקציות שאציג הזה נראה מגביל למדי, וזה אינו מקרי; המטרה היא להפיק כמה שיותר אינפורמציה ממושג הרדוקציה הזה, והגדרה רחבה יותר הייתה עשויה לפגוע בכך.</p>
<p>אם כן, בהינתן בעיה A ובעיה B, רדוקציה מ-B ל-A היא פונקציה <span class="math">\(f\)</span> שלוקחת קלט אפשרי <span class="math">\(x\)</span> לבעיה B והופכת אותו לקלט <span class="math">\(f(x)\)</span> לבעיה A, כך שפתרון של A יענה "כן" על <span class="math">\(f(x)\)</span> אם ורק אם פתרון של B צריך לענות "כן" על <span class="math">\(x\)</span>.</p>
<p>דוגמה קלאסית לרדוקציה היא מ<a href="http://he.wikipedia.org/wiki/%D7%91%D7%A2%D7%99%D7%99%D7%AA_%D7%94%D7%A2%D7%A6%D7%99%D7%A8%D7%94">בעיית העצירה</a> (האם מכונת טיורינג M מסיימת את ריצתה על קלט x נתון) אל הבעיה של בדיקה האם מכונת טיורינג M מסיימת ריצה על הקלט ה"ריק" (כלומר, בלי קלט). לכאורה, אפשר היה לחשוב שהבעיה השניה עשויה להיות קלה "ממש" מהראשונה - הרי בשניה צריך לענות רק על מקרה פרטי מאוד של הראשונה. בפועל, קיימת רדוקציה כזו: אם מקבלים קלט לבעיית העצירה, <span class="math">\(M,x\)</span>, בונים באמצעותו מכונה חדשה - <span class="math">\(M_x\)</span>, שפועלת כך על הקלט הריק: ראשית, היא כותבת את <span class="math">\(x\)</span> על הסרט שלה. שנית, היא מחזירה את הראש הקורא להתחלה. שלישית, מאותו הרגע היא מתנהגת בדיוק כמו <span class="math">\(M\)</span>. מה עשינו? יצרנו מכונה שעוצרת על הקלט הריק אם ורק אם המכונה המקורית <span class="math">\(M\)</span> עוצרת על הקלט <span class="math">\(x\)</span>. על כן, פתרון לבעיה השניה מבטיח שנפתור גם את בעיית העצירה; ולכן, בעיית העצירה לא קשה יותר מאשר הבעיה השנייה. מן הסתם הבעייה השנייה לא קשה יותר מבעיית העצירה, ולכן שתי הבעיות שקולות מבחינת כוחן החישובי.</p>
<p>צריך להיות מאוד זהירים כאן. הדרך הפשוטה ביותר להמחיש זאת היא עם ה"רדוקציה" הבאה מבעיית העצירה (הבלתי פתירה) לבעיית בדיקת הראשוניות (הפתירה מאוד): בהינתן מכונה M וקלט x, הפונקציה <span class="math">\(f\)</span> תחזיר 3 אם <span class="math">\(M\)</span> עוצרת על <span class="math">\(x\)</span>, ו-4 אחרת.... ברור שהפונקציה הזו היא חוקית, וגם ברור שהיא רדוקציה על פי ההגדרה שנתתי, ועם זאת גם ברור שבעיית העצירה קשה הרבה יותר מבעיית בדיקת הראשוניות. מה השתבש כאן?</p>
<p>מה שהשתבש הוא ש"החבאנו" את אי הפתירות של בעיית העצירה בתוך הרדוקציה עצמה. הרדוקציה עצמה "פותרת" את בעיית העצירה, ועל פי הפתרון מחליטה האם למפות את הקלט למספר 3 או 4. לכן, כדי שרדוקציה תהיה בעלת ערך כלשהי, היא לא צריכה להיות חזקה מדי; במקרה שלנו, היינו צריכים לדרוש שהרדוקציה תהיה פונקציה ניתנת לחישוב; זה ימנע מצב שבו בעיה בלתי ניתנת לחישוב ניתנת לרדוקציה אל בעיה הניתנת לחישוב, ולכן זה פותח פתח להוכחה שהמוני דברים בלתי ניתנים לחישוב - אם נצליח להראות רדוקציה ניתנת לחישוב מבעיית העצירה אל משהו, זה אומר שגם ה"משהו" לא פתיר.</p>
<p>דבר דומה קיים גם עבור המחלקה NP, רק שכאן הדרישה מהרדוקציות חריפה יותר מאשר סתם "ניתנות לחישוב" - דורשים שהן יהיו ניתנות לחישוב בזמן פולינומי. שוב, מאותן סיבות. הדבר מבטיח שאם A ניתנת להכרעה בזמן פולינומי (כלומר, שייכת ל-P) וקיימת רדוקציה פולינומית מ-B אל A, אז גם B ניתנת לחישוב בזמן פולינומי. וכאן נכנס לתמונה מושג ה<strong>שלמות</strong> (Completeness) בפעם הראשונה, בשאלה הבאה: האם קיימת איזו שהיא בעיה ב-NP ש<strong>כל</strong> בעיה אחרת ששייכת ל-NP ניתנת לרדוקציה אליה?</p>
<p>התשובה היא שקיימת בעיה כזו, ויותר מכך - קיימות אלפי בעיות כאלו. חלק מהן כבר איזכרתי קודם - למשל, המסלול ההמילטוני. אלו הן הבעיות ה-NP-שלמות המדוברות. מאחורי התיאור הפורמלי של "כל בעיה ב-NP ניתנת לרדוקציה אליהן" מסתתרת המשמעות הפשוטה של "אלו הבעיות הקשות ביותר ב-NP", ושל "אם פתרנו בעיה NP-שלמה אחת באופן יעיל, פתרנו את כל הבעיות ב-NP באופן יעיל". במילים אחרות, הבעיות ה-NP שלמות הן בעיות ששייכות ל-NP, ופתרון יעיל לאחת ויחידה מהן יוכיח ש-<a href="http://he.wikipedia.org/wiki/P%3DNP">P=NP</a>. מכיוון שמניחים שהשוויון אינו נכון, הרי שהבעיות ה-NP-שלמות הן הבעיות שהכי פחות סביר להניח שיהיו פתירות, מבין כל הבעיות ב-NP.</p>
<p>פירוק לגורמים, למשל, אינו NP-שלם (או לפחות אינו ידוע ככזה) ולכן אפשר לתאר סיטואציה שבה ניתן יהיה לפרק ביעילות לגורמים ועדיין לא ינבע מכך ש-P=NP. לעומת זאת, <a href="http://he.wikipedia.org/wiki/%D7%91%D7%A2%D7%99%D7%99%D7%AA_SAT">הבעיה של בדיקה האם פסוק לוגי בתחשיב הפסוקים ספיק</a> היא כן בעיה NP-שלמה; למעשה, זו הבעיה ה-NP-שלמה ה"מעניינת" הראשונה שהתגלתה, לאחר ש<a href="http://he.wikipedia.org/wiki/%D7%9E%D7%A9%D7%A4%D7%98_%D7%A7%D7%95%D7%A7-%D7%9C%D7%95%D7%99%D7%9F">קוק ולוין הוכיחו</a>, באופן בלתי תלוי, שכל בעיה ב-NP ניתנת לרדוקציה אליה (ההוכחה אינה טריוויאלית, אך גם לא מסובכת עד כדי כך; היא מבוססת על תרגום של <a href="http://www.gadial.net/2007/12/23/nondeterminism/">מכונת טיורינג אי דטרמיניסטית</a> עבור בעיית NP "כללית" לסדרת פסוקים שמתארים את ריצת המכונה, והם ספיקים רק אם המכונה מקבלת). ההוכחה הזו פרצה דרך לשלל הוכחות אחרות שדברים הם NP-שלמים - שכן אם יש לנו בעיה NP-שלמה כלשהי, ואנו מבצעים רדוקציה ממנה אל בעיה חדשה, זה גורר מיידית שגם הבעיה החדשה NP-שלמה (למה?) ולכן אין יותר צורך לבצע הוכחות כלליות מסובכות שמראות ש<strong>הכל</strong> ניתן לרדוקציה לבעיה שלנו; מספיק להראות שבעיה אחרת, ספציפית, הידועה כ-NP-שלמה ניתנת לרדוקציה לבעיה שלנו.</p>
<p>רק הערה אחת לסיום - המושג "<a href="http://he.wikipedia.org/wiki/NP-%D7%A7%D7%A9%D7%94">NP-קשה</a>" (NP-Hard) נשמע לעתים קרובות בדיונים על סיבוכיות. תקופה ארוכה לא הבנתי מה ההבדל בינו ובין NP-שלם. ההבדל פשוט: בעיה NP-שלמה שייכת ל-NP. בעיה NP-קשה, לא בהכרח יודעים אפילו שהיא שייכת ל-NP - רק שניתן לבצע רדוקציה מכל בעיה ב-NP אליה. דוגמה נאה לכך היא בעיית העצירה, שהיא בבירור NP-קשה; בהינתן פסוק לוגי שרוצים לדעת אם הוא ספיק, בונים מכונה שמה שהיא עושה הוא פשוט להציב את כל ההשמות האפשריות, ואם השמה אחת שמספקת את הפסוק נמצאה, עוצרים; אחרת, נכנסים ללולאה אינסופית. הזמן שנדרש כדי <strong>לבנות</strong> מכונה כזו הוא פולינומי (להבדיל מהזמן שנדרש <strong>להריץ</strong> אותה), אבל התשובה לשאלה "האם המכונה עוצרת או לא" זהה לתשובה לשאלה "האם הפסוק המקורי היה ספיק או לא", ולכן הרדוקציה תקפה לחלוטין (אבל קשה להגיד שמספקת לנו הרבה מידע).</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>