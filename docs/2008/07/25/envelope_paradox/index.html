<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>פרדוקס המעטפות - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/new_blog/favicon.ico">
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .top-nav .nav-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-nav .site-title {
                text-align: center;
                margin-bottom: 10px;
            }
            
            .top-nav .nav-links {
                flex-direction: column;
                width: 100%;
            }
            
            .top-nav .nav-links a {
                text-align: center;
                padding: 8px;
            }
            
            .top-nav .search-box {
                width: 100%;
                flex-direction: column;
            }
            
            .top-nav .search-box input {
                width: 100%;
                margin-bottom: 5px;
                min-width: 0;
            }
            
            .top-nav .search-box button {
                width: 100%;
            }
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        /* Force KaTeX content to wrap by overriding its internal structure */
        .katex-html {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .base {
            display: inline !important;
            white-space: normal !important;
        }
        
        .katex .mord,
        .katex .mbin,
        .katex .mrel,
        .katex .mopen,
        .katex .mclose,
        .katex .mpunct,
        .katex .minner {
            display: inline !important;
            white-space: normal !important;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/new_blog/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/new_blog/">דף הבית</a>
                <a href="/new_blog/random.html">פוסט אקראי</a>
                <a href="/new_blog/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/new_blog/2008/07/22/questions_and_answers_3/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">שאלות ותשובות - מקבץ מס&#39; 3</span>
            </a>
            

            
            <a href="/new_blog/2008/07/26/birthday_paradox/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">כיצד פרדוקס יום ההולדת מוליד חוב בבנק</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>פרדוקס המעטפות</h1>
            <div class="post-meta">
                <span class="date">2008-07-25</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/הסתברות.html">הסתברות</a>
                    
                    <a href="/categories/משחקים וחידות מתמטיות.html">משחקים וחידות מתמטיות</a>
                    
                </span>
                
                
            </div>
        </header>
        
        <article>
            <p>ביום רביעי האחרון התמזל מזלי והייתי נוכח בהרצאה של פרופ' <a href="http://he.wikipedia.org/wiki/%D7%A0%D7%95%D7%92%D7%94_%D7%90%D7%9C%D7%95%D7%9F">נוגה אלון</a> על "חשיבה הסתברותית". אלון הוא מרצה בחסד עליון, וייתכן שזו (או אולי <a href="http://www.math.technion.ac.il/Site/events/special-lectures/Mathclub/">הפורום הספציפי</a> שבו ניתנה ההרצאה) הסיבה לכך שהוא לא היסס להציג את הנושאים שעליהם הוא דיבר בצורה קצת יותר מורכבת מההצגה הסטנדרטית שלהם. הוא דיבר על <a href="http://www.gadial.net/2008/02/23/monty_hall/">הבעיה של מונטי הול</a>, על <a href="http://he.wikipedia.org/wiki/%D7%90%D7%9C%D7%92%D7%95%D7%A8%D7%99%D7%AA%D7%9D_%D7%90%D7%A7%D7%A8%D7%90%D7%99">אלגוריתמים הסתברותיים</a> ודה-רנדומיזציה שלהם (הפיכתם לדטרמיניסטיים בלי שהדבר ילווה בפגיעה משמעותית בזמן הריצה), עם דגש על <a href="http://en.wikipedia.org/wiki/AKS_primality_test">אלגוריתם בדיקת הראשוניות AKS</a> (שהזכרתי את הדיווח הנלהב-יתר-על-המידה עליו ב"הארץ" ב<a href="http://www.gadial.net/2008/07/20/bad_math_haaretz_on_aks/">פוסט קודם</a>, ואני מקווה להציג בצורה יותר קונקרטית בעתיד) שהושג באמצעות דה-רנדומיזציה של אלגוריתם אחר; וכמובן, <a href="http://en.wikipedia.org/wiki/Probabilistic_method">בשיטה ההסתברותית</a> (שאלון חיבר <a href="http://www.amazon.com/Probabilistic-Wiley-Interscience-Discrete-Mathematics-Optimization/dp/0471370460">ספר</a> עליה) שהצגתי את קצה הקרחון שלה ב<a href="http://www.gadial.net/2007/06/30/nonconstructive_proofs_probablistic_logic/">פוסט קודם</a>. עם זאת, החלק שהכי עניין אותי בהרצאה ועליו אני רוצה לדבר בפוסט הזה היה <a href="http://en.wikipedia.org/wiki/Two_envelopes_problem">פרדוקס המעטפות</a>.</p>
<p>היחס שלי לפרדוקסים הוא כאל הוכחות בדרך השלילה. הם מגיעים לתוצאה אבסורדית, כן; אבל כל מה שאני מסיק מכך הוא שמשהו שגוי בדרך הסקת המסקנות או בהנחות היסוד שלהם. <a href="http://www.gadial.net/2008/07/16/bad_math_philosophy_arrow/">בפוסטים</a> <a href="http://www.gadial.net/2008/07/18/bad_math_philosophy_achilles_and_turtle/">קודמים</a> הראיתי ש<a href="http://he.wikipedia.org/wiki/%D7%94%D7%A4%D7%A8%D7%93%D7%95%D7%A7%D7%A1%D7%99%D7%9D_%D7%A9%D7%9C_%D7%96%D7%A0%D7%95%D7%9F">הפרדוקסים של זנון</a> לא מרשימים אותי במיוחד כי הם נראים לי כמו המחשה לבלבול שנובע מהגדרות גרועות. גם <a href="http://nimrodavissar.com/blogica/archives/125">הפרדוקס של ראסל</a> לא מטריד אותי במיוחד, כי ברור לי שתורת הקבוצות הנאיבית פשוט שגויה באספקט שלה שמאפשר את הפרדוקס. פרדוקסים כמו <a href="http://he.wikipedia.org/wiki/%D7%A4%D7%A8%D7%93%D7%95%D7%A7%D7%A1_%D7%94%D7%A9%D7%A7%D7%A8%D7%9F">פרדוקס השקרן</a> או פרדוקס "<a href="http://he.wikipedia.org/wiki/%D7%94%D7%A4%D7%A8%D7%93%D7%95%D7%A7%D7%A1_%D7%A9%D7%9C_%D7%91%D7%A8%D7%99">המספר הטבעי הקטן ביותר שלא ניתן לתאר בפחות ממאה אותיות</a>" לא מרשימים אותי כי ברור לי שהקושי בהם נעוץ בהגדרה שלהם של משהו בעזרת עצמו (כמו להגיד "אני מגדיר את x להיות x+1" ולהתפלא שלא קיבלת שום דבר בעל משמעות). <a href="http://he.wikipedia.org/wiki/%D7%A4%D7%A8%D7%93%D7%95%D7%A7%D7%A1_%D7%99%D7%95%D7%9D_%D7%94%D7%94%D7%95%D7%9C%D7%93%D7%AA">פרדוקס יום ההולדת</a> (ש<a href="http://www.gadial.net/2008/07/05/birthday_party_for_egg_solutions/">הבטחתי </a>פוסט שעוסק בו, ואקיים) ובעיות כמו מונטי הול (שלעתים מכונה "פרדוקס") הם בכלל לא פרדוקסים, אלא סך הכל תוצאות לא אינטואיטיביות.</p>
<p>לעומת כל אלו, פרדוקס המעטפות מטריד אותי. מאוד. מעולם לא זכיתי לשמוע פתרון מניח את הדעת שלו. מה שהכי מצמרר כאן (עד כמה שבעיה מתמטית יכולה להיות מצמררת) הוא שלא נראה לי שאי פעם אשמע; לפרדוקס יש "פתרון" מתמטי, הוא פשוט נוגד בצורה חריפה לא רק את האינטואיציה אלא גם את השכל הישר שלי, ונשמע לי בעיקר כמו התחמקות - אף שהוא אינו התחמקות. לטעמי, הפרדוקס מצביע בצורה נאה מאוד על בעיה בסיסית ומהותית שיש לנו כאשר אנו לוקחים עובדות מתמטיות ומנסים למצוא להם משמעות ב"עולם האמיתי", ולכן הוא פרדוקס חשוב ומעניין, ואין פלא שנוגה אלון טרח להביא אותו.</p>
<p>אם כן, מהו הפרדוקס? יש לו מספר גרסאות, ואציג שתיים: את הפשוטה, הנפוצה יותר, ואת זו שאלון הציג. הגרסה הפשוטה יותר היא סתם מטומטמת; יש בה כשל בסיסי שתכף אסביר, ולכן הפתרון במקרה שלה מיידי. במשך זמן רב הכרתי רק את הגרסה הראשונה והייתי בטוח שזהו, הפרדוקס סגור ונעול - זאת עד שבא מתמטיקאי (לא אלון), הראה לי את הגרסה השנייה ופוצץ לי את הבלון בפרצוף. בכל זאת, אי אפשר ולא כדאי להתעלם מהגרסה הראשונה, והנה היא:</p>
<p>נניח שמשחקים איתכם משחק שבו נותנים לכם שתי מעטפות חתומות ומבקשים מכם לבחור אחת. אתם יודעים שבאחת המעטפות יש סכום כסף כפול מאשר במעטפה השנייה. אתם בוחרים מעטפה (אין לך שום דרך לדעת מה בפנים, כך שזו בחירה אקראית לגמרי), פותחים אותה ומוצאים בפנים סכום כסף <span class="math">\(A\)</span>. כעת, בדיוק כמו במונטי הול, שואלים אתכם אם ברצונכם להחליף. מכיוון שאתם בוגרי מונטי הול אתם מייד קופצים על ההצעה... רגע, האמנם? מן הסתם מתבקש כאן ניתוח מתמטי כלשהו.</p>
<p>יש שתי אפשרויות: או שבמעטפה השנייה יש סכום כפול, כלומר <span class="math">\(2A\)</span>, ואז הרווחתם <span class="math">\(A\)</span>; או שבמעטפה השנייה יש  רק חצי מהסכום שבמעטפה שלכם, ואז הפסדתם <span class="math">\(\frac{1}{2}A\)</span>. סביר להניח שההסתברות שבחרתם במעטפה עם הסכום הגדול יותר היא <span class="math">\(\frac{1}{2}\)</span>. אם כן, האם כדאי להחליף או לא?</p>
<p>הדרך שבה משתמשים למדוד את כדאיות ההחלפה היא תוחלת הרווח; מעין ממוצע משוקלל של הרווח/הפסד שיכול להיווצר כתוצאה מהפעולה שלכם, כשהשיקלול הוא על פי ההסתברות של המאורע. אפשר לחשוב על תוחלת בתור הרווח הממוצע שיתקבל לאחר הרבה מאוד חזרות על המשחק; כך למשל במונטי הול, תוחלת הרווח במקרה של החלפה (אם אומרים שזכייה ברכב היא רווח 1, והפסד הוא רווח 0) היא <span class="math">\(\frac{2}{3}\)</span>.</p>
<p>חישוב התוחלת במקרה שלנו קל מאוד, והנה הוא: <span class="math">\(E=\frac{1}{2}A-\frac{1}{2}\cdot\frac{1}{2}A=\frac{1}{4}A\)</span>.</p>
<p>כלומר, תוחלת הרווח במקרה של החלפה היא חיובית. לכן כדאי להחליף.</p>
<p>כעת נכנס לתמונה הטיעון ה"פרדוקסלי", שהולך כך: הרי החישוב שלעיל נכון עבור כל <span class="math">\(A\)</span> חיובי, לא משנה מה ערכו. אם כן, מדוע צריך בכלל לפתוח את המעטפה? אפילו בלי לפתוח אותה אתה יודע שאתה רוצה להחליף. ואחרי שהחלפת, אותם שיקולים ממשיכים לעבוד, ולכן שוב אתה רוצה להחליף. מכאן שתמיד "משתלם" לך להחליף את המעטפה שלך, שוב ושוב ושוב עד אינסוף. ברור שמשהו שבור כאן.</p>
<p>מה הרמאות כאן? שכל חישובי ההסתברויות הם בלוף אחד גדול. נתחיל מכך שאם הערכים שבוחרים לשים במעטפות לא נבחרים בצורה אקראית, אז אי אפשר בכלל להשתמש בניתוח ההסתברותי שלנו. אם למשל שמים במעטפות 100 ו-200 ש"ח, אז ההסתברות שלך להרוויח אם ראית 200 ש"ח במעטפה שלך ואתה מחליף היא לא חצי; היא אפס. הניתוח שלי הניח הנחה שקרית, שההסתברות היא חצי-חצי; אבל כדי שזה יקרה, צריך שהכסף שמוכנס למעטפות ייבחר בצורה אקראית כלשהי, ולא סתם יהיה שני מספרים שהם תמיד אותו הדבר. אמנם, אין לי מושג מה המספרים הללו, ולכן כשאני רואה מספר אין לי מושג אם ההסתברות שלי להרוויח היא 0 או לא; אבל זה שחסר לי מידע לא משנה את המציאות.</p>
<p>יש עוד נימוקים לבעייתיות אבל לא איכנס אליהם כי זה שהצגתי הוא החביב עלי. השורה התחתונה היא שכדי לפתור את הבעיה המתמטית שיש כאן צריך להגדיר התפלגות כלשהי על הערכים של <span class="math">\(A\)</span> שיכולים להופיע במעטפה; אבל התפלגות כזו בהכרח תספק לי, כשחקן, מידע ותוכל לרמוז לי מה עדיף לעשות. אם אפשר היה לבחור את <span class="math">\(A\)</span> באקראי ובהתפלגות אחידה מבין כל המספרים הטבעיים, זה היה מחזיר אותי לסיטואציה שבה תמיד כדאי להחליף, בלי תלות בערך הספציפי של <span class="math">\(A\)</span>; אלא שהתפלגות אחידה שכזו אינה קיימת (תרגיל: הוכיחו). הפרדוקס בגרסה זו <a href="http://www.ynet.co.il/articles/0,7340,L-3460198,00.html">מתואר גם ב-Ynet</a>, ובדרך הצגה שהיא אמנם טובה למדי והניתוח שלה לא רע בכלל, אבל השורה התחתונה - הצורך בהגדרת התפלגות על הערכים האפשריים - לא מוזכרת שם, וכמה טוקבקיסטים העירו על כך (עם זאת, את ההצגה גונבות תגובות הטוקבקיסטים שהם פחות מדוייקים מתמטית, למשל "<span><span>היות ושני המעתפות זהות לחלוטין מבחינה חיצונית, לפי תורת הקוונטים הם בעצם אותו המעתפה.").</span></span></p>
<p>כאן מסתיים תיאור הניסוח הראשון, וזה כאמור כל מה שהכרתי מהבעיה במשך זמן רב - ובמשך זמן רב, לא חשבתי שהיא מעניינת במיוחד. אלא שכל מתמטיקאי סקרן מספיק שחושב על הבעיה יצליח, כנראה, לראות שאפשר להיפטר מהקושי הטכני שבה בלי בעיות מיוחדות - להישאר עם התפלגות על ה-<span class="math">\(A\)</span>-ים שאמנם איננה אחידה אך עדיין יוצרת את אותה תוצאה אבסורדית. נוגה אלון הציג התפלגות שכזו, אבל זו בשום פנים ואופן אינה היחידה או ה"אופטימלית" מבחינת טווח הערכים שבה; היא פשוט יחסית קלה להבנה.</p>
<p>הרעיון הוא כזה: הערכים שיוכנסו למעטפות יהיו חזקות של 10. כלומר, או 10, או 100, או 1,000 וכן הלאה עד אינסוף. הזוג 10 ו-100 יוכנס בהסתברות 1/2; הזוג 100 ו-1,000 יוכנס בהסתברות 1/4, וכן הלאה. בניסוח פורמלי, ההסתברות של הזוג <span class="math">\((10^n,10^{n+1})\)</span> היא <span class="math">\(\frac{1}{2^n}\)</span>. קל לראות שמדובר בהתפלגות חוקית (סכום ההסתברויות של כל הזוגות הוא 1). כעת נותר רק לבצע את חישוב התוחלת הישן, שעכשיו הוא מחוכם קצת יותר ואחזור עליו בשלמותו.</p>
<p>נניח שפתחנו את המעטפה וגילינו בפנים סכום של <span class="math">\(10^n\)</span> עבור איזה שהוא <span class="math">\(n\)</span> טבעי. ברור לנו שאנו נמצאים באחד משני מקרים - או שבמעטפה השנייה יש <span class="math">\(10^{n+1}\)</span> (סכום גדול פי 10) או שיש בה <span class="math">\(10^{n-1}\)</span> (סכום קטן פי עשר). היוצא מן הכלל היחיד הוא המקרה שבו מצאנו 10 במעטפה, ואז ברור לנו שכדאי להחליף (זה פועל לטובת הפרדוקס - זכרו, הפואנטה בסוף תהיה שתמיד כדאי להחליף).</p>
<p>נשים לב שהסכום <span class="math">\(10^n\)</span> (אם הוא לפחות 100) מוגרל בדיוק פעמיים: פעם אחת בהסתברות <span class="math">\(\frac{1}{2^n}\)</span> ואז הוא הסכום ה<strong>קטן</strong> יותר; ופעם אחת בהסתברות <span class="math">\(\frac{1}{2^{n-1}}\)</span> ואז הוא הסכום ה<strong>גדול</strong> יותר. במילים אחרות, ההסתברות שבמעטפה השנייה יש סכום קטן פי 10 מהסכום במעטפה שלנו היא כפולה מההסתברות שבמעטפה השנייה סכום גדול יותר. אם כן, בהסתברות <span class="math">\(\frac{1}{3}\)</span> נרוויח מהחלפת המעטפות, ובהסתברות <span class="math">\(\frac{2}{3}\)</span> נפסיד.</p>
<p>בצורה פורמלית ("בצורה פורמלית" זו דרכי לומר "מי שלא מתעניין בפרטים הטכניים המתמטים, שפשוט יאמין לי ויפסח על הפסקה") הדרך להגיע למספרים אלו היא באמצעות חישוב <a href="http://he.wikibooks.org/wiki/%D7%94%D7%A1%D7%AA%D7%91%D7%A8%D7%95%D7%AA/%D7%94%D7%A1%D7%AA%D7%91%D7%A8%D7%95%D7%AA_%D7%9E%D7%95%D7%AA%D7%A0%D7%94">הסתברות מותנה</a>; ההסתברות של המאורע "ה-<span class="math">\(10^n\)</span> שבמעטפה הוא הקטן יותר" היא <span class="math">\(\frac{1}{2^n}\)</span>; ההסתברות של המאורע "יש <span class="math">\(10^n\)</span> באחת המעטפות" היא סכום ההסתברויות של שני המקרים שבהם <span class="math">\(10^n\)</span> מוכנס למעטפות, דהיינו <span class="math">\(\frac{1}{2^n}+\frac{1}{2^{n-1}}=\frac{3}{2^n}\)</span>. כשמחלקים את ההסתברות הראשונה בשנייה, מקבלים <span class="math">\(\frac{1}{2^n}/\frac{3}{2^n}=\frac{1}{3}\)</span>, דהיינו ההסתברות המותנה של "ההחלפה משתלמת" היא אכן שליש.</p>
<p>כעת ניתן לחשב את תוחלת הרווח במקרה של החלפה. התוחלת הזו היא פשוט:</p>
<p><span class="math">\(\frac{1}{3}\cdot 9\cdot 10^n-\frac{2}{3}\cdot 9\cdot 10^{n-1}=30\cdot 10^{n-1}-6\cdot 10^{n-1}=24\cdot 10^{n-1}\)</span></p>
<p>דהיינו, תוחלת רווח חיובית (שיצאה מספר "מכוער" כי לא באמת טרחנו לשפצר את הפרמטרים של הבעיה). לכן תמיד כדאי להחליף, והפרדוקס בעינו נותר. מה הולך כאן?</p>
<p>ובכן, כפי שאמרתי לעיל, אין לי מושג מה הולך כאן. אמרתי שאני תמיד מתייחס לפרדוקסים כאל הוכחות לכך שהנחה שלנו או דרך הסקנת המסקנות שלנו שגויה - מפרדוקס המעטפות לא נותר לי אלא להסיק שהחלטה על "שווה להחליף" אינה שקולה לחישוב תוחלת הרווח מההחלפה. המסקנה הזו נראית מאוד מוזרה - איך תמודד את ה"שווה להחליף" אם לא באופן הזה? ולכן מה שהפרדוקס מעיד עליו הוא שבמקרים <strong>מסויימים</strong> זה לא מדד טוב. למרבה המזל, הפתרון ה"מתמטי" של הפרדוקס שעליו הצבעתי קודם נותן לנו מדד כלשהו למקרים המסויימים הללו.</p>
<p>הבה ונשאל את עצמנו שאלה שונה מזו שעסקנו בה עד כה. עד עכשיו עסקנו, למעשה, בתוחלת מותנה: מה הרווח הצפוי לנו מהחלפת מעטפות <strong>בהינתן</strong> שראינו במעטפה שלנו סכום כזה וכזה. כעת נעבור לעסוק בתוחלת הרווח שלנו באופן כללי. דהיינו, אם נשחק את המשחק הרבה פעמים, ותמיד נחליף, מה יהיה הרווח הממוצע שלנו?</p>
<p>אבחנה אידיוטית ראשונה היא שהתוחלת הזו תהיה <strong>שווה</strong> לתוחלת הרווח שלנו במשחק ללא החלפה. הרי את המעטפה המקורית שאנחנו מקבלים, אנחנו מקבלים באקראי מבין השתיים שנבחרו; אם אנחנו תמיד מחליפים, זה שקול לכך שפשוט נקבל באקראי דווקא את המעטפה השנייה, ושתי הסיטואציות שקולות. למי שלא משתכנע - מהנימוק הזה אבטיח שמבחינה מתמטית הוא תקף וניתן להצדיק אותו. אם כן, לכאורה ההפרש בין תוחלת הרווח שלנו בשתי האסטרטגיות היא אפס (כפי שההגיון אכן אומר); מדוע אם כן כשמסתכלים על התוחלות המותנות מקבלים יתרון להחלפה?</p>
<p>לצורך כך, הבה נחשב בפועל את תוחלת הרווח שלנו. לשם כך עלינו לשאול את עצמנו את השאלה הבאה: נניח שאנחנו לא מחליפים; מה ההסתברות שלנו לקבל את המעטפה שהסכום שבה הוא <span class="math">\(10^n\)</span>? התשובה לכך היא שקיימות שתי סיטואציות שבהן זה קורה: או שנבחר הזוג <span class="math">\(10^n, 10^{n+1}\)</span> בהסתברות <span class="math">\(\frac{1}{2^n}\)</span> ולאחר מכן בחרנו את <span class="math">\(10^n\)</span> מבין שתי המעטפות (בהסתברות <span class="math">\(\frac{1}{2}\)</span>; או שנבחר הזוג <span class="math">\(10^{n-1},10^n\)</span> בהסתברות <span class="math">\(\frac{1}{2^{n-1}}\)</span> ולאחר מכן בחרנו את <span class="math">\(10^n\)</span> - שוב, בהסתברות <span class="math">\(\frac{1}{2}\)</span>. מכאן שההסתברות הכוללת לקבל <span class="math">\(10^n\)</span> היא <span class="math">\(\frac{1}{2}\left(\frac{1}{2^n}+\frac{1}{2^{n-1}}\right)=\frac{1}{2}\cdot\frac{3}{2^{n}}=\frac{3}{2^{n+1}}\)</span>. היוצא מן הכלל הוא 10, שמתקבל בהסתברות 1/4 (למה?)</p>
<p>בשלב הזה רצוי לעשות "בדיקת שפיות" ולראות שסכום ההסתברויות של כל הערכים האפשריים (דהיינו, כל החזקות האפשריות של 10) מסתכם ל-1 (זו התכונה הבסיסית של מרחבי הסתברות - סכום ההסתברות של כל המאורעות הבסיסיים האפשריים צריך להיות 1). זה תרגיל פשוט למדי להיווכח בכך, וגם מי שלא למד טורים אינסופיים באופן פורמלי אולי יוכל להיעזר ב<a href="http://www.gadial.net/2008/06/17/infinite_series/">פוסט</a> שכתבתי על טורים שכאלו לא מזמן.</p>
<p>אם כן, אפשר לפנות לחישוב התוחלת של הכסף שמקבלים בסה"כ אם בוחרים באסטרטגיית אי-החלפה. על פי הגדרה, היא שווה לסכום על כל אחת מכמויות הכסף שעשויים לקבל, מוכפלת בהסתברות שכמות הכסף הזו תתקבל. פורמלית זה יוצא <span class="math">\(\frac{10}{4}+3\sum_{n=2}^\infty\frac{10^n}{2^{n+1}}=\frac{10}{4}+\frac{3}{2}\sum_{n=2}^\infty\left(\frac{10}{2}\right)^n\)</span>.כאן מגיעים לפאנץ' ליין, שהוא מה שחשוב גם אם לא עקבתם אחרי החישובים - הטור הזה בכלל לא מתכנס. הסכום שלו יעבור כל מספר טבעי אם רק נסכם מספיק איברים בו. פירוש הדבר הוא שהתוחלת היא <strong>אינסופית</strong>, כלומר שאם נשחק במשחק הרבה מאוד פעמים, הזכייה "הממוצעת" שלנו תהיה אינסוף.</p>
<p>ומה יקרה אם דווקא כן נחליף כל פעם את המעטפה? בכמה נזכה אז? כפי שאמרתי, המקרה הזה זהה לחלוטין לקודם מבחינת חישוב התוחלת הכללית, ולכן גם במקרה הזה נקבל אינסוף. לכן גישת ה"נחסר את תוחלת הגישה הראשונה מתוחלת הגישה השניה" לא עובדת כאן - אי אפשר לחסר אינסוף מאינסוף; אלו לא מספרים ממשיים ואין לפעולת החיסור משמעות עבורם. יתר על כן, אם היינו מנסים למצוא משמעות, היינו מגיעים מהר מאוד לאבסורדים.</p>
<p>למשל, אם למשל היינו מגדירים את החיסור של אינסוף מאינסוף כאפס, היינו אוכלים אותה בגדול כשהיינו מנסים להחיל את השיטה הזו על הפרש הטורים (שסכום כל אחד מהם אינסוף) הבאים: <span class="math">\(\sum_{n=1}^\infty (n+1)-\sum_{n=1}^\infty n\)</span> - ההפרש הוא מצד אחד אפס, על פי ההגדרה המטופשת שלנו ש"אינסוף פחות אינסוף הוא אפס"; ומצד שני, אם נחסר את הטורים איבר-איבר נקבל טור שסכומו עדיין אינסופי. בקיצור, בעיה.</p>
<p>הייתי שמח לומר שזה מסביר את הכל. שבגלל שבשני המקרים התוחלת היא אינסופית, אין פלא שנוצר הבלבול לפיו נראה שתמיד כדאי להחליף. להגיד שה"כדאי" הזה מבוסס, אי שם עמוק בפנים, על חיסור שתי התוחלות, חיסור שפשוט אינו מוגדר. לרוע המזל, למרות שמבחינה מתמטית כל זה כנראה נכון, האינטואיציה שלי לא משתפת פעולה. הפרדוקס מצביע יפה מאוד על הבעיה שבשימוש במונח "כדאי להחליף" תוך התבססות על רעיונות מתמטיים, ובפרט על השימוש בתוחלת מותנה עבורו; אבל אני לא רואה שום שימוש אפשרי אחר במונח הזה, ואני לא רואה שום פתרון שישביע את דעתי לפרדוקס.</p>
<p>למישהו יש הצעות?</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/new_blog/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>