<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>בעיית המזכירה, ואיך זה קשור למספרים הרמוניים - לא מדויק</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'David', 'Tahoma', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        /* Top navigation bar */
        .top-nav {
            background: #2c3e50;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .top-nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .top-nav .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .top-nav .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .top-nav .nav-links a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
            white-space: nowrap;
        }
        
        .top-nav .nav-links a:hover {
            background: #34495e;
        }
        
        .top-nav .search-box {
            display: flex;
            gap: 5px;
        }
        
        .top-nav .search-box input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            min-width: 150px;
        }
        
        .top-nav .search-box button {
            padding: 5px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .top-nav .search-box button:hover {
            background: #2980b9;
        }
        
        /* Blockquote styling */
        blockquote {
            background: #f9f9f9;
            border-right: 5px solid #ccc;
            margin: 1.5em 10px;
            padding: 0.75em 16px;
            position: relative;
            font-style: italic;
        }
        
        blockquote:before {
            content: '"';
            position: absolute;
            top: -10px;
            right: 8px;
            font-size: 3.5em;
            color: #ccc;
            line-height: 1;
        }
        
        blockquote p {
            display: block;
            margin: 0 0 0.75em 0;
        }
        
        blockquote p:last-child {
            margin-bottom: 0;
        }
        
        
        body {
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        header {
            margin-bottom: 40px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories,
        .post-meta .tags {
            display: inline;
        }
        
        .post-meta .categories a,
        .post-meta .tags a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-meta .categories a:hover,
        .post-meta .tags a:hover {
            text-decoration: underline;
        }
        
        article {
            font-size: 1.1em;
        }
        
        article h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.8em;
        }
        
        article h3 {
            margin-top: 25px;
            margin-bottom: 12px;
            color: #34495e;
            font-size: 1.4em;
        }
        
        article p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        article ul, article ol {
            margin-right: 30px;
            margin-bottom: 15px;
        }
        
        article li {
            margin-bottom: 8px;
        }
        
        article code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        article pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
            direction: ltr;
            text-align: left;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }
        
        /* Image styles - responsive and contained */
        article img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        
        /* Math rendering styles */
        .math {
            direction: ltr;
        }
        
        span.math {
            direction: ltr;
        }
        
        /* Override RTL for KaTeX */
        .katex {
            direction: ltr;
            unicode-bidi: embed;
        }
        
        div.math {
            display: block;
            text-align: center;
            padding: 15px 0;
            direction: ltr;
        }
        
        /* RTL adjustments for code blocks */
        .highlight {
            direction: ltr;
            text-align: left;
        }
        
        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            article {
                font-size: 1em;
            }
        }
        
        /* Post navigation */
        .post-navigation {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            gap: 20px;
        }
        
        .post-navigation .nav-link {
            flex: 1;
            text-decoration: none;
            color: #2c3e50;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .post-navigation .nav-link:hover {
            background: #e9ecef;
        }
        
        .post-navigation .nav-prev {
            text-align: right;
        }
        
        .post-navigation .nav-next {
            text-align: left;
        }
        
        .post-navigation .nav-label {
            font-size: 0.85em;
            color: #7f8c8d;
            display: block;
            margin-bottom: 5px;
        }
        
        .post-navigation .nav-title {
            font-weight: bold;
            font-size: 1.1em;
        }

    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="/" class="site-title">לא מדויק</a>
            <div class="nav-links">
                <a href="/">דף הבית</a>
                <a href="/random.html">פוסט אקראי</a>
                <a href="/post_list.html">כל הפוסטים</a>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="חיפוש...">
                    <button onclick="searchPosts()">חפש</button>
                </div>
            </div>
        </div>
    </nav>
    
    
    <div class="container">
        <!-- Post Navigation -->
        
        <nav class="post-navigation">
            
            <a href="/2011/06/15/questions_and_answers_8/" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">שאלות ותשובות - מקבץ מס&#39; 8</span>
            </a>
            

            
            <a href="/2011/06/26/random_walks_and_god/" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">מהמרים כושלים, שיכורים בביוב, ואלוהים</span>
            </a>
            
        </nav>
        
        
        <header>
            <h1>בעיית המזכירה, ואיך זה קשור למספרים הרמוניים</h1>
            <div class="post-meta">
                <span class="date">2011-06-19</span>
                
                <span class="categories">
                    | קטגוריות:
                    
                    <a href="/categories/כללי.html">כללי</a>
                    
                </span>
                
                
            </div>
        </header>
        
        <article>
            <p>נניח שאתם מנהלים זוטרים באיזו חברה ואתם מחליטים יום אחד להיות יעילים ומועילים ויורדים מטה למחלקת כוח אדם. היום בוחרים לכם מזכירה חדשה (או מזכיר חדש, למה לא? אבל אשתמש בלשון נקבה ועם מי שנפגעים מזה הסליחה), ובהתקף של יעילות ארגונית מצאתם באינטרנט את "הכללים הנכונים לבחירת מזכירה" ושלחתם לכוח אדם. הכללים הם:</p>
<ol>
    <li>יש לראיין את המועמדות אחת אחרי השניה, כאשר בסוף כל ראיון מחליטים אם להעסיק את המזכירה שרואיינה ולהעיף את כל אלו שעדיין לא רואיינו לכל הרוחות, או להעיף אותה לכל הרוחות.</li>
    <li>כל מזכירה צריך לדרג ביחס למזכירות הקודמות (לכל מזכירה קודמת יש לקבוע אם הנוכחית טובה יותר או גרועה יותר) ועל בסיס זה להחליט אם להעסיק אותה או לא.</li>
    <li>קוראים למזכירות לראיון בסדר אקראי.</li>
    <li>חייבים לבחור את המזכירה הטובה ביותר!</li>
</ol>
<p>על 4 אין פשרות!</p>
<p>טוב, גם על היתר לא. ניסו להעיר לכם שהכללים הללו לא כל כך הגיוניים (בפרט, מה הרעיון להחליט על המקום אם לבחור את המועמדת או לא? למה לא לחכות עד שמראיינים את כולן?), אבל מה הם כבר יודעים, במקום באינטרנט שבו מצאתם את הכללים אמרו שהם באו הישר מתוך "נזיר השאולין שהפסיק לשחק כדורגל ומזיז גבינות בכוח המחשבה", או משהו.</p>
<p>טוב, אז ירדתם לכוח אדם ואתם מסתכלים למראיינת מעבר לכתף שוב ושוב. בהתחלה נראה שהיא בכלל לא חושבת לפני שהיא מודה למרואיינות בנימוס ומגרשת אותן, ואתם מתחילים להיות עצבניים. אז אתם שואלים אותה מה היא עושה לעזאזל, והיא עונה לכם עם הסיפור הבלתי יאומן הבא:</p>
<p>"הגיעו היום 30 מועמדות שמתוכן אני צריכה לבחור, אז את 10 הראשונות אני דוחה בלי לחשוב בכלל, ומה-11 והלאה אני בודקת אם היא הטובה ביותר מבין כל אלו שהתראיינו עד כה, ואם כן - אני מקבלת אותה".</p>
<p>אתם מתרעמים - מה זו שיטת הבחירה המטופשת הזו? למה לדחות אוטומטית את 10 הראשונות? מה אם המזכירה הכי טובה היא בין 10 הראשונות? למה לא לחכות עד המזכירה ה-20? אין דרך חכמה יותר לבחור? חיש קל אתם מפטרים את המראיינת הסוררת. הבעיה היא בוודאי בכך שהיא עצמה לא נבחרה על פי כללי נזיר השאולין שלכם.</p>
<p>רק מה? למחרת הבוסית הגדולה קוראת לכם למשרד, מראה לכם בנימוס את הערך בויקיפדיה על "<a href="http://en.wikipedia.org/wiki/Secretary_problem">בעיית המזכירה</a>" ומעיפה אתכם מהחלון. מסתבר שדרך הפעולה של המראיינת היא האופטימלית שבה אפשר לנקוט תחת הכללים המוזרים שלכם - דרך פעולה שמצליחה בערך ב-37 אחוז מהפעמים, בלי קשר למספר המזכירות. וכעת נשאלת השאלה - למה?</p>
<p>הבה ננסח שוב את השאלה בצורה קצת יותר מדוייקת מתמטית. יש לנו <span class="math">\(n\)</span> מועמדות שנכנסות אלינו בסדר אקראי. אנחנו מראיינים אותן אחת אחת, וצריכים להחליט על קריטריון כלשהו שלפיו נחליט מתי לעצור את הראיונות ולקבל את המרואיינת הנוכחית. את הסיפור אפשר לספר גם בהקשרים שונים לגמרי - חיפוש חניה, חיפוש בני זוג, וכדומה - אבל זה פחות מעניין, ויותר מעניין הפתרון המוזר של הבעיה.</p>
<p>ראשית, בואו נחדד את עיקר הבעיה כאן - אנחנו חייבים למצוא את המזכירה <strong>הטובה ביותר</strong>. אם בחרנו את המזכירה השניה בטיבה זה נחמד, אבל חסר ערך מבחינת הכללים - גרוע בדיוק כמו שנבחר את המזכירה הגרועה ביותר. כשאנחנו מדברים על "פתרון אופטימלי" כאן הכוונה שלנו היא לפתרון <strong>שנותן את המזכירה הטובה ביותר</strong> בהסתברות הגבוהה ביותר, לא לפתרון ש"מבטיח שתמיד נהיה עם מזכירה לא רעה" או משהו בסגנון. מכיוון שזה אולי לא מה שקופץ לנו לראש אינטואיטיבית כשאנחנו חושבים על "אופטימלי" בהקשר הזה זה יכול להסביר חלק מהבלבול שלנו בנוגע לאופי של הפתרון האופטימלי המשונה.</p>
<p>מדרישת האופטימליות הזו נובע שכל פתרון לבעיה חייב לקיים כלל פשוט אחד: אם מזכירה שרואיינה זה עתה היא לא הטובה מכל המזכירות שרואיינו עד כה, לא מקבלים אותה. למה לא? כי אם היא לא הטובה מכל המזכירות שרואיינו עד כה, ברור לחלוטין שהיא לא הטובה ביותר ולכן אין שום טעם לשכור אותה (שוב - אנחנו <strong>חייבים</strong> את הטובה ביותר; כל תוצאה אחרת לא שווה כלום).</p>
<p>אם כן, מהשהסכמנו שהכלל שמוביל לבחירת מזכירה הוא "היא הטובה ביותר מבין מי שראיינו עד כה", נשאלת רק השאלה מתי להפעיל אותו. הרי ברור שיהיה מטופש להפעיל אותו כבר מהרגע הראשון - המזכירה הראשונה שאנחנו מראיינים היא הטובה ביותר מבין מי שראיינו עד כה, אבל אם המזכירות באות בסדר אקראי, ההסתברות שלנו לבחור במזכירה הטובה ביותר באופן הזה היא <span class="math">\(\frac{1}{n}\)</span>. בדוגמה של ה-30 מזכירות שלנו, זו הסתברות של <span class="math">\(\frac{1}{30}\)</span>, כלומר קצת פחות מ-4 אחוזים. אם יש 1000 מזכירות אז ההסתברות צונחת לה ל-0.1 אחוזים מביכים. ואנחנו אמרנו שבשיטה האופטימלית אפשר להצליח ב-37 אחוז מהפעמים בלי קשר בכלל למספר המזכירות - אני מקווה שאחוזי ההצלחה הללו (ובעיקר, האופן שבו הם לא תלויים בכלל במספר המזכירות) נראים כבר יותר מרשימים מאשר אולי נראו במבט ראשון.</p>
<p>אם כן, אנחנו רוצים לחכות קצת, לקבל מדגם כלשהו של מזכירות, לדחות אותן, והחל משלב מסויים להתחיל להפעיל את כלל "קבל את הטובה ביותר עד כה". מספר השלבים הזה יכול להיות קבוע ("תוך 13 שלבים, בלי קשר למספר המזכירות") ויכול להיות גם קשור איכשהו למספר המזכירות ("אחרי שבדיוק חצי מהמזכירות התראיינו") ויכול גם להיות תלוי איכשהו בראיונות שכבר בוצעו; אבל הראיונות שכבר בוצעו תמיד מניבים את אותה התוצאה - אחרי <span class="math">\(k\)</span> ראיונות יש לנו רשימה של <span class="math">\(k\)</span> מזכירות שלא קיבלנו שאפשר לסדר מהגרועה לטובה ביותר. אין לנו מידע, למשל, על האיכות של אותן מזכירות ביחס לאלו שעוד לא ראיינו. לכן אם יש כלל לקביעת הנקודה שממנה והלאה מפעילים את כלל "קבל את הטובה ביותר עד כה" הוא לא יהיה תלוי בראיונות שבוצעו עד כה (זה קצת נפנוף ידיים; אפשר לתת לזה הוכחה מדויקת אבל קצת טרחנית).</p>
<p>אם כן, תוך כמה צעדים כדאי להתחיל להפעיל את הכלל? התוצאה המפתיעה (?) היא שמדובר על <span class="math">\(\frac{n}{e}\)</span> צעדים, כאשר <span class="math">\(e=2.71828183\dots\)</span> הוא בסיס הלוגריתם הטבעי - הקבוע המפורסם ביותר במתמטיקה חוץ מ-<span class="math">\(\pi\)</span>. אמרתי כבר בבלוג שאני אוהב את <span class="math">\(e\)</span> יותר, והבעיה הזו היא דוגמה נוספת לסיבה לכך - <span class="math">\(e\)</span> צץ במקומות עוד יותר מגוונים מאשר <span class="math">\(\pi\)</span> לטעמי.</p>
<p>אוקיי, החימום נגמר - כדי להוכיח שמספר הצעדים האופטימלי הוא <span class="math">\(\frac{n}{e}\)</span> אין מנוס מהפשלת שרוולים וחישוב טיפה טכני, אבל יפה מאוד לטעמי ולא קשה כל כך. הגישה שלנו תהיה של "מבט מלמעלה" - ננסה להבין מה קורה כאשר מפעילים את השיטה עם <span class="math">\(k\)</span> צעדים שאחריהם מתחילים להפעיל את הכלל, ונחשב עבור <span class="math">\(k\)</span> זה מה הסתברות ההצלחה שלנו.</p>
<p>אז שוב, כדי שכולם יהיו איתי: עבור <span class="math">\(k\)</span> טבעי כלשהו ו-<span class="math">\(n\)</span> מזכירות, אנו בודקים מה ההסתברות לבחור את המזכירה הטובה ביותר אם את <span class="math">\(k-1\)</span> הראשונות אנו דוחים, ומקבלים את המזכירה הראשונה אחרי אותן <span class="math">\(k\)</span> שהיא טובה יותר מכל מי שהיו עד כה (אם אין כזו, אכלנו אותה).</p>
<p>כאשר <a href="http://www.gadial.net/2010/08/05/conditional_probability/">דיברתי בבלוג על הסתברות מותנית</a> הזכרתי מושג שנקרא "נוסחת ההסתברות השלמה". בואו נזכיר אותה: אם <span class="math">\(A\)</span> הוא מאורע כלשהו - במקרה שלנו, "המזכירה הטובה ביותר נבחרה", ואם <span class="math">\(B_{1},\dots,B_{n}\)</span> היא סדרה של מאורעות זרים שמתארים את מרחב ההסתברות כולו - במקרה שלנו, <span class="math">\(B_{i}\)</span> הוא המאורע "המזכירה ה-<span class="math">\(i\)</span> מבין המרואיינות היא הטובה ביותר" - אז מתקיים <span class="math">\(P\left(A\right)=\sum_{i=1}^{n}P\left(A|B_{i}\right)P\left(B_{i}\right)\)</span>, כאשר <span class="math">\(P\left(A|B_{i}\right)\)</span> מייצג את ההסתברות שהמזכירה הטובה ביותר נבחרה <strong>בהינתן</strong> שהמזכירה ה-<span class="math">\(i\)</span> הייתה הטובה ביותר.</p>
<p>בפוסט ההוא אמרתי: "על פניו היא נראית כמו דרך מסובכת יותר לכתוב את <span class="math">\(P\left(A\right)\)</span>, אך כאמור  לעתים קרובות הדרך הנוחה ביותר לחשב את <span class="math">\(P\left(A\right)\)</span> היא על ידי חלוקה למקרים שמיוצגים על ידי ה-<span class="math">\(B_{i}\)</span>". זו אכן דוגמה קלאסית לכך.</p>
<p>את <span class="math">\(P\left(B_{i}\right)\)</span> קל לחשב; מה ההסתברות לכך שהמזכירה ה-<span class="math">\(i\)</span> היא הטובה ביותר? זה קל - מכיוון שהסדר שבו המזכירות נכנסות נבחר באקראי ובהתפלגות אחידה מכל הסדרים האפשריים, כל מקום סביר באותה מידה עבור המזכירה הטובה ביותר, ולכן <span class="math">\(P\left(B_{i}\right)=\frac{1}{n}\)</span>.</p>
<p>ומהו <span class="math">\(P\left(A|B_{i}\right)\)</span>? אם <span class="math">\(i\le k\)</span> אז <span class="math">\(P\left(A|B_{i}\right)=0\)</span>, על פי החוק שלנו של לדחות אוטומטית את <span class="math">\(k\)</span> הראשונות (אם הטובה ביותר הייתה בין <span class="math">\(k\)</span> הראשונות, אין שום סיכוי שנבחר את הטובה ביותר). החלק המעניין הוא כש-<span class="math">\(i&amp;gt;k\)</span>. במקרה זה <span class="math">\(P\left(A|B_{i}\right)\)</span> הוא ההסתברות שנבחרה המזכירה במקום ה-<span class="math">\(i\)</span>, בהינתן שבמקום ה-<span class="math">\(i\)</span> אכן נמצאת המזכירה הטובה ביותר. השאלה היא - איך ייתכן שהיא לא תיבחר? זה יקרה רק אם אחת מהמזכירות במקומות <span class="math">\(k,k+1,\dots,i-1\)</span> הצליחה להידחף איכשהו - כלומר הייתה טובה יותר מכל המזכירות שלפניה.</p>
<p>את הקריטריון המסובך הזה אפשר לנסח בצורה הרבה יותר אלגנטית: מבין <span class="math">\(i-1\)</span> המזכירות הראשונות, המזכירה הטובה ביותר הייתה בין <span class="math">\(k\)</span> הראשונות. שכנעו את עצמכם שזה אכן שקול!</p>
<p>את ההסתברות של הקריטריון קל כעת לחשב - למזכירה הטובה ביותר יש <span class="math">\(i-1\)</span> מקומות אפשריים להיות בהם; כל מקום סביר באותה מידה; ולכן ההסתברות שהיא תהיה באחד מ-<span class="math">\(k\)</span> המקומות הראשונים היא <span class="math">\(\frac{k}{i-1}\)</span>. לכן <span class="math">\(P\left(B_{i}\right)=\frac{k}{i-1}\)</span>. אם זה התקיים, אז למזכירה במקום ה-<span class="math">\(i\)</span> לא היו הפרעות והיא נבחרה בודאות (הרי היא הטובה ביותר, ולכן בפרט הייתה טובה מכל המזכירות שלפניה).</p>
<p>נוסחת ההסתברות השלמה כעת נותנת לנו:</p>
<p><span class="math">\(P\left(A\right)=\sum_{i=1}^{n}P\left(A|B_{i}\right)P\left(B_{i}\right)=\sum_{i=k+1}^{n}\frac{k}{i-1}\cdot\frac{1}{n}=\frac{k}{n}\sum_{i=k+1}^{n}\frac{1}{i-1}\)</span>.</p>
<p>יופי. עכשיו נתקענו. מה עושים עם הסכום <span class="math">\(\sum_{i=k+1}^{n}\frac{1}{i-1}\)</span> המעצבן? כאן מסתיים החלק היחסית פשוט של הפוסט ואנו עוברים לחלק הטכני, שלטעמי הוא יפה ומעניין לא פחות, אבל אולי לא מיועד לבעלי לב חלש מתמטית.</p>
<p>ראשית, שימו לב לכך שהסכום שלעיל שווה ל-<span class="math">\(\sum_{i=k}^{n-1}\frac{1}{i}\)</span> בבירור (ביצענו את החלפת המשתנה הפשוטה <span class="math">\(i\mapsto i+1\)</span>). לסכום הזה קשר הדוק לאחד הטורים החשובים במתמטיקה - הטור ההרמוני, <span class="math">\(\sum_{i=1}^{\infty}\frac{1}{i}\)</span>. כפי ש<a href="http://www.gadial.net/2010/07/25/harmonic_series_converges_to_137/">כבר הראיתי בעבר בבלוג</a>, הטור הזה מתבדר לאינסוף - ככל שסוכמים בו עוד ועוד איברים, התוצאה גדלה וגדלה באופן בלתי חסום ועוברת כל מספר טבעי בשלב מסויים (אף שיש טענות שהוא דווקא מתכנס ל-137). אבל, הבה ונדבר לרגע על <strong>הסכומים החלקיים</strong> של הטור, מה שמתקבל אחרי שסוכמים רק את <span class="math">\(n\)</span> האיברים הראשונים מתוכו, כלומר <span class="math">\(H_{n}=\sum_{i=1}^{n}\frac{1}{i}\)</span>. ל-<span class="math">\(H_{n}\)</span> קוראים <strong>המספר ההרמוני</strong> ה-<span class="math">\(n\)</span>-י, ועליו המתמטיקאים יודעים לא מעט. שימו לב ש-<span class="math">\(\sum_{i=k}^{n-1}\frac{1}{i}=H_{n-1}-H_{k-1}\)</span>, ולכן השאלה שאנחנו רוצים לפתור היא בעצם זו: מהו <span class="math">\(\lim_{n\to\infty}\frac{k}{n}\left(H_{n-1}-H_{k-1}\right)\)</span>?</p>
<p>כאן כדאי לשלוף את מה שידוע על המספרים ההרמוניים. למרבה המזל, אנחנו יודעים לקרב אותם מצויין בעזרת פונקציה שאנחנו מכירים היטב - הלוגריתם הטבעי, <span class="math">\(\ln n\)</span>. למעשה, הסדרה ההרמונית <span class="math">\(H_{n}\)</span> היא מעין אנלוג בדיד של <span class="math">\(\ln n\)</span>; זאת מכיוון ש-<span class="math">\(H_{n}=\sum_{i=1}^{n}\frac{1}{i}\)</span> ואילו <span class="math">\(\ln n=\int_{1}^{n}\frac{1}{x}dx\)</span>. ניתן להוכיח, ואראה זאת בקרוב, ש-<span class="math">\(\lim_{n\to\infty}\left(H_{n}-\ln n\right)=\gamma\)</span> כאשר <span class="math">\(\gamma\)</span> הוא מספר קבוע (קטן למדי, אבל זה לא חשוב לנו) המכונה "קבוע אוילר-מסקרוני" וערכו הוא בערך <span class="math">\(\gamma=0.5772\dots\)</span>. ואני אומר "בערך" כי המספר הזה הוא עדיין תעלומה לא קטנה - עדיין לא ידוע אפילו אם הוא רציונלי או אי רציונלי.</p>
<p>דרך אחרת, אולי קצת יותר נוחה, לתאר את הגבול למעלה היא זו: <span class="math">\(H_{n}=\ln n+\gamma+o\left(1\right)\)</span>. מילולית, זה אומר "המספר ההרמוני ה-<span class="math">\(n\)</span>-י הוא <span class="math">\(\ln n\)</span> ועוד קבוע אוילר-מסקרוני, ועוד משהו שאני לא יודע איך הוא נראה אבל כש-<span class="math">\(n\)</span> שואף לאינסוף הוא שואף לאפס" (המשמעות הפורמלית של <span class="math">\(o\left(1\right)\)</span> היא זו: פונקציה <span class="math">\(f\left(n\right)\)</span> היא <span class="math">\(o\left(1\right)\)</span> - או-קטן של <span class="math">\(1\)</span> - אם <span class="math">\(\frac{f\left(n\right)}{n}\to0\)</span>).</p>
<p>כעת, מהו <span class="math">\(H_{n-1}-H_{k-1}\)</span>? עם הקירוב שתיארתי זה פשוט:</p>
<p><span class="math">\(H_{n-1}-H_{k-1}=\left(\ln\left(n-1\right)+\gamma+o\left(1\right)\right)-\left(\ln\left(k-1\right)+\gamma+o\left(1\right)\right)=\ln\left(\frac{n-1}{k-1}\right)+o\left(1\right)\)</span></p>
<p>המעבר האחרון נובע מזהות סטנדרטית בלוגריתמים: <span class="math">\(\ln a-\ln b=\ln\left(\frac{a}{b}\right)\)</span> (הרבה מהכוח של לוגריתמים נובע מכך שחיבור וחיסור שלהם מתאימים לכפל וחילוק מספרים).</p>
<p>אני משער שמדגדג לכם בשלב זה להיפטר מהמינוסים המעצבנים שדבוקים ל-<span class="math">\(n\)</span> ו-<span class="math">\(k\)</span>. ובכן, שימו לב לכך ש-<span class="math">\(H_{n-1}-H_{n}=\ln\left(\frac{n-1}{n}\right)+o\left(1\right)=\ln\left(1-\frac{1}{n}\right)+o\left(1\right)=o\left(1\right)\)</span>, כשהמעבר האחרון נובע מכך ש-<span class="math">\(\lim_{n\to\infty}\ln\left(1-\frac{1}{n}\right)=\ln\left(1\right)=0\)</span>. דרך מסובכת להגיד פורמלית את הרעיון הטריוויאלי ש-<span class="math">\(H_{n}\)</span> ו-<span class="math">\(H_{n-1}\)</span> הם אותו הדבר לכל צורך מעשי כאשר <span class="math">\(n\)</span> שואף לאינסוף, ולכן אפשר להחליף ביניהם. למי שהפורמליות עדיין חשובה לו, הנה הטריק במלואו:</p>
<p><span class="math">\(H_{n-1}-H_{k-1}=\left(H_{n-1}-H_{n}+H_{n}\right)-\left(H_{k-1}-H_{k}+H_{k}\right)=H_{n}-H_{k}+o\left(1\right)=\ln\left(\frac{n}{k}\right)+o\left(1\right)\)</span></p>
<p>אם כן, חזרה לעניינו המקורי - צמצמנו את בעיית המזכירה לגבול <span class="math">\(\lim_{n\to\infty}\frac{k}{n}\ln\left(\frac{n}{k}\right)\)</span>. כפי שאפשר לנחש, המפתח לתעלומה הוא <strong>היחס</strong> <span class="math">\(\frac{k}{n}\)</span>. צריך לזכור ש-<span class="math">\(k\)</span> אינו קבוע בהכרח, אלא הוא פונקציה כלשהי של <span class="math">\(n\)</span>, ואנחנו רוצים לדעת איזו פונקציה מניבה לנו את הערך המקסימלי - את הסתברות ההצלחה המקסימלית לבחור במזכירה הטובה ביותר. לשם כך, הבה ונסמן <span class="math">\(x=\frac{k}{n}\)</span>, וכעת עלינו לחקור את הפונקציה <span class="math">\(x\ln\left(\frac{1}{x}\right)=-x\ln x\)</span> עבור הערכים <span class="math">\(0&amp;lt;x\le1\)</span>. ב"חקירה" אני מתכוון ל"להבין איפה יש לפונקציה מקסימום אם בכלל"</p>
<p>הדרך הסטנדרטית לבצע חקירה שכזו היא באמצעות נגזרות. קל לחשב את הנגזרת של הפונקציה הזו - היא <span class="math">\(-\ln x-x\cdot\frac{1}{x}=\ln\left(\frac{1}{x}\right)-1\)</span>. על כן, הנגזרת מתאפסת כאשר <span class="math">\(\ln\left(\frac{1}{x}\right)=1\)</span>, כלומר <span class="math">\(\frac{1}{x}=e\)</span>, כלומר <span class="math">\(x=\frac{1}{e}\)</span> - הנה המספר הזה צץ סוף סוף. האם ההתאפסות הזו היא נקודת מינימום או מקסימום של הפונקציה? ובכן, אם תחקרו קצת בעצמכם תגלו שהנגזרת היא פונקציה יורדת, שבהתחלה היא חיובית ואחר כך שלילית. כלומר, הפונקציה המקורית קודם עולה, ואז יורדת - מה שאומר ש-<span class="math">\(x=\frac{1}{e}\)</span> היא נקודת המקסימום. המסקנה: אם אנחנו רוצים למקסם את הסיכוי שלנו לבחור את המזכירה הטובה ביותר, אנחנו רוצים תמיד לבחור <span class="math">\(k\)</span> כך ש-<span class="math">\(\frac{k}{n}=\frac{1}{e}\)</span>, כלומר <span class="math">\(k=\frac{n}{e}\)</span>. מכיוון ש-<span class="math">\(e\)</span> הוא אי רציונלי לעולם לא נוכל לבחור <span class="math">\(k\)</span> שיקיים את השוויון הזה בדיוק; אבל מכיוון ש-<span class="math">\(x\ln\left(\frac{1}{x}\right)\)</span> היא פונקציה רציפה, ככל שנבחר <span class="math">\(k\)</span> שקרוב יותר ל-<span class="math">\(\frac{n}{e}\)</span> נקבל סיכוי הצלחה גבוה יותר.</p>
<p>זה סוף בעיית המזכירה, אבל נשאר לנו להבין איך מוכיחים את ההערכה על גודל המספרים ההרמוניים, <span class="math">\(H_{n}=\ln n+\gamma+o\left(1\right)\)</span>. לשם כך נכניס לתמונה מושג חדש - פונקצית הזטא של רימן. עבור <span class="math">\(s&amp;gt;1\)</span> ממשי, פונקצית הזטא של רימן מוגדרת כ-<span class="math">\(\zeta\left(s\right)=\sum_{n=1}^{\infty}\frac{1}{n^{s}}\)</span> (<a href="http://www.gadial.net/2010/02/08/riemann_hypothesis_overview/">תיארתי בפירוט רב יותר</a> את הפונקציה והקשר שלה להשערת רימן בעבר). למשל, <span class="math">\(\zeta\left(2\right)=\sum_{n=1}^{\infty}\frac{1}{n^{2}}=\frac{\pi^{2}}{6}\)</span> (איך מוכיחים את השוויון הזה? גם <a href="http://www.gadial.net/2010/03/14/happy_pi_day/">את זה הראיתי בעבר</a>). בנוסף, נכליל את המספרים ההרמוניים באופן טבעי כדי שיתארו את העניין הזה: <span class="math">\(H_{n}^{\left(s\right)}=\sum_{i=1}^{n}\frac{1}{i^{s}}\)</span>.</p>
<p>לב ההוכחה הוא נעוץ בהיכרות הטובה שלנו עם <span class="math">\(\ln n\)</span>. אנחנו יודעים לתאר את <span class="math">\(\ln n\)</span> כטור אינסופי: הנוסחה המפורסמת ביותר (שאותה לא אוכיח כאן, יש גבול...) היא <span class="math">\(\ln\left(\frac{1}{1-x}\right)=\sum_{n=1}^{\infty}\frac{x^{n}}{n}\)</span> שתקפה כאשר <span class="math">\(-1\le x&amp;lt;1\)</span>. ניקח <span class="math">\(k&amp;gt;1\)</span> טבעי כלשהו וננסה להשתמש בנוסחה כדי לתאר כטור את <span class="math">\(\ln\left(\frac{k}{k-1}\right)\)</span>: מכיוון ש-<span class="math">\(\frac{k}{k-1}=\frac{1}{1-1/k}\)</span>, נקבל ש-<span class="math">\(\ln\left(\frac{k}{k-1}\right)=\sum_{n=1}^{\infty}\frac{1}{nk^{n}}\)</span>. הטור הזה נראה קצת יותר נחמד כשכותבים אותו במפורש: <span class="math">\(\ln\left(\frac{k}{k-1}\right)=\frac{1}{k}+\frac{1}{2k^{2}}+\frac{1}{3k^{3}}+\dots\)</span>.</p>
<p>כעת הבה ונקבע <span class="math">\(n\)</span> כלשהו, ונסכום את <span class="math">\(\ln\left(\frac{k}{k-1}\right)\)</span> לכל <span class="math">\(1&amp;lt;k\le n\)</span>. בזכות התכונה של הפיכת-חיבור-לכפל של לוגריתמים, התוצאה תהיה שרשרת יפה של ביטולים:</p>
<p><span class="math">\(\ln\left(\frac{n}{n-1}\right)+\ln\left(\frac{n-1}{n-2}\right)+\dots+\ln\left(\frac{3}{2}\right)+\ln\left(\frac{2}{1}\right)=\ln\left(\frac{n}{n-1}\cdot\frac{n-1}{n-2}\cdots\frac{3}{2}\cdot\frac{2}{1}\right)=\ln n\)</span></p>
<p>מה זה עזר לנו? שכעת אפשר לכתוב את <span class="math">\(\ln n\)</span> כסכום של טורים:</p>
<p><span class="math">\(\ln n=\sum_{k=2}^{n}\left(\frac{1}{k}+\frac{1}{2k^{2}}+\frac{1}{3k^{3}}+\dots\right)\)</span></p>
<p>כל טור שכזה מתכנס, והוא חיובי, ולכן ניתן לשנות את סדר האיברים בסכימה בלי חשש מעיוותים כמו זה של <a href="http://www.gadial.net/2010/04/10/riemann_series_theorem/">משפט רימן</a>. אם כן, מה קיבלנו? ש-<span class="math">\(\ln n=\sum_{k=2}^{n}\frac{1}{k}+\frac{1}{2}\sum_{k=2}^{n}\frac{1}{k^{2}}+\frac{1}{3}\sum_{k=2}^{n}\frac{1}{k^{3}}+\dots\)</span></p>
<p>כעת שימו לב ש-<span class="math">\(\sum_{k=2}^{n}\frac{1}{k}=H_{n}-1\)</span> (כי האיבר הראשון בטור, עבור <span class="math">\(k=1\)</span>, חסר). בדומה, <span class="math">\(\sum_{k=2}^{n}\frac{1}{k^{s}}=H_{n}^{\left(s\right)}-1\)</span>. לכן קיבלנו:</p>
<p><span class="math">\(\ln n=\left(H_{n}-1\right)+\frac{1}{2}\left(H_{n}^{\left(2\right)}-1\right)+\frac{1}{3}\left(H_{n}^{\left(3\right)}-1\right)+\dots\)</span></p>
<p>ולכן העברת אגפים זריזה נותנת לנו ש:</p>
<p><span class="math">\(H_{n}-\ln n=1-\frac{1}{2}\left(H_{n}^{\left(2\right)}-1\right)-\frac{1}{3}\left(H_{n}^{\left(3\right)}-1\right)+\dots\)</span></p>
<p>עד כאן זוהי תוצאה מדוייקת לחלוטין. הבעיה היא שבאגף ימין יש לנו יצור מסובך ומפחיד למדי שתלוי ב-<span class="math">\(n\)</span> ואין לנו מושג איך לחשב אותו במדוייק. מה שכן אפשר לעשות הוא להסתכל על הגבול של כל זה כאשר משאיפים את <span class="math">\(n\)</span> לאינסוף - כאן משתמשים בכך שכל אחד מסדרות המספרים ההרמוניים ה"מוכללים" כן מתכנסת:</p>
<p><span class="math">\(\lim_{n\to\infty}\left(H_{n}-\ln n\right)=1-\frac{1}{2}\left(\zeta\left(2\right)-1\right)-\frac{1}{3}\left(\zeta\left(3\right)-1\right)-\dots\)</span></p>
<p>והנה קיבלנו ייצוג נאה של <span class="math">\(\gamma\)</span>: <span class="math">\(\gamma=1-\frac{1}{2}\left(\zeta\left(2\right)-1\right)-\frac{1}{3}\left(\zeta\left(3\right)-1\right)-\dots\)</span>. הספקנים שבכם אולי יתהו למה הטור הזה מתכנס בכלל; לשם כך מספיק להראות שהטור החיובי <span class="math">\(\sum_{k=2}^{\infty}\left(\zeta\left(k\right)-1\right)\)</span> מתכנס, ואותו אפשר לכתוב כ-<span class="math">\(\sum_{k=2}^{\infty}\sum_{n=2}^{\infty}\frac{1}{n^{k}}\)</span>, להחליף את סדר הסכימה כדי לקבל סכום של טורים גאומטריים <span class="math">\(\sum_{n=2}^{\infty}\left(\sum_{k=2}^{\infty}\frac{1}{n^{k}}\right)=\sum_{n=2}^{\infty}\frac{1}{n\left(n-1\right)}\)</span> והטור הזה כבר בבירור מתכנס על ידי מבחן השוואה סטנדרטי (המעבר האחרון הוא פשוט שימוש מהיר בנוסחה לטורים גאומטריים אינסופיים).</p>
<p>עכשיו אפשר לעצור ולנשום קצת אוויר ולראות שעברנו דרך לא קטנה מאז שהתחלנו עם שיטות בחירה מוזרות למזכירות. סיפור המזכירה נגמר כאן, אבל סיפורם של המספרים ההרמוניים ממש לא; אני מקווה שבעתיד אראה עוד מקומות שבהם הם (ו-<span class="math">\(e\)</span>) צצים.</p>
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>

    
    <script>
        function searchPosts() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = '/post_list.html?search=' + encodeURIComponent(searchTerm);
            }
        }
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPosts();
            }
        });
    </script>
    
    
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>

</body>
</html>