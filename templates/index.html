{% extends "base.html" %}

{% block title %}לא מדויק{% endblock %}

{% block extra_styles %}
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: white;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            text-align: center;
        }
        
        header h1 {
            font-size: 3em;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2em;
            color: #7f8c8d;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .intro {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            text-align: justify;
            line-height: 1.8;
        }
        
        .posts-section {
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        .posts-section h2 {
            font-size: 2em;
            color: #2c3e50;
            margin-bottom: 30px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        .post-item {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .post-item:last-child {
            border-bottom: none;
        }
        
        .post-item h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        
        .post-item h3 a {
            color: #2c3e50;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .post-item h3 a:hover {
            color: #3498db;
        }
        
        .post-meta {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .post-meta .date {
            margin-left: 15px;
        }
        
        .post-meta .categories {
            display: inline;
        }
        
        .post-meta .categories a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }
        
        .post-excerpt {
            font-size: 1.1em;
            color: #555;
            line-height: 1.6;
        }
        
        .read-more {
            display: inline-block;
            margin-top: 10px;
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }
        
        .read-more:hover {
            text-decoration: underline;
        }
        
        .view-all-link {
            display: block;
            text-align: center;
            margin: 30px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .view-all-link a {
            color: #3498db;
            text-decoration: none;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .view-all-link a:hover {
            text-decoration: underline;
        }
        
        footer {
            margin-top: 40px;
            padding: 20px;
            text-align: center;
            color: #95a5a6;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            
            .container {
                padding: 10px;
            }
            
            header, .intro, .posts-section {
                padding: 20px;
            }
        }
{% endblock %}

{% block content %}
    <div class="container">
        <header>
            <h1>לא מדויק</h1>
            <p>"There's no sense in being precise when you don't even know what you're talking about." (John von Neumann)</p>
        </header>
        
        <div class="intro">
            <p>
                ברוכות וברוכים הבאים אל הבלוג "לא מדויק". המטרה שלי כאן היא פשוטה - לספר על דברים במתמטיקה שמעניינים אותי, לתת את האינטואיציה שמאחוריהם ולהתלהב מהם. לא משנה אם זה חשבון של בית הספר היסודי, מתמטיקה של התיכון, לימודים אוניברסיטאיים או סתם חידות נחמדות - להכל יש מקום.
            </p>
        </div>
        
        <div class="posts-section">
            <h2>פוסטים אחרונים</h2>
            
            {% for post in latest_posts %}
            <div class="post-item">
                <h3><a href="{{ post.url }}">{{ post.title }}</a></h3>
                <div class="post-meta">
                    <span class="date">{{ post.date }}</span>
                    {% if post.categories %}
                    <span class="categories">
                        |
                        {% for cat in post.categories %}
                        <a href="{{ baseurl }}/categories/{{ cat }}.html">{{ cat }}</a>
                        {% endfor %}
                    </span>
                    {% endif %}
                </div>
                {% if post.summary %}
                <p class="post-excerpt">{{ post.summary }}</p>
                {% endif %}
                <a href="{{ post.url }}" class="read-more">קראו עוד ←</a>
            </div>
            {% endfor %}
            
            <div class="view-all-link">
                <a href="{{ baseurl }}/post_list.html">כל הפוסטים »</a>
            </div>
        </div>
        
        <div class="posts-section" style="margin-top: 30px;">
            <h2>פוסטים אקראיים</h2>
            <div id="randomPosts">
                <!-- Random posts will be inserted here by JavaScript -->
            </div>
        </div>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>
{% endblock %}

{% block extra_scripts %}
    <script>
        // All posts data
        const allPosts = {{ all_posts | tojson }};
        
        // Shuffle array function
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        // Display random posts
        function displayRandomPosts() {
            const randomPosts = shuffleArray(allPosts).slice(0, 5);
            const container = document.getElementById('randomPosts');
            
            let html = '';
            randomPosts.forEach(post => {
                html += '<div class="post-item">';
                html += '<h3><a href="' + post.url + '">' + post.title + '</a></h3>';
                html += '<div class="post-meta">';
                html += '<span class="date">' + post.date + '</span>';
                if (post.categories && post.categories.length > 0) {
                    html += '<span class="categories"> | ';
                    post.categories.forEach((cat, index) => {
                        html += '<a href="{{ baseurl }}/categories/' + cat + '.html">' + cat + '</a>';
                        if (index < post.categories.length - 1) html += ' ';
                    });
                    html += '</span>';
                }
                html += '</div>';
                if (post.summary) {
                    html += '<p class="post-excerpt">' + post.summary + '</p>';
                }
                html += '<a href="' + post.url + '" class="read-more">קראו עוד ←</a>';
                html += '</div>';
            });
            
            container.innerHTML = html;
        }
        
        // Display random posts on page load
        displayRandomPosts();
    </script>
{% endblock %}
