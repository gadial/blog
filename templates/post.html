{% extends "base.html" %}

{% block title %}{{ post.title }} - לא מדויק{% endblock %}
{% block title_text %}{{ post.title }} - לא מדויק{% endblock %}
{% block title_text2 %}{{ post.title }} - לא מדויק{% endblock %}

{% block og_type %}article{% endblock %}
{% block og_url %}https://gadial.net{{ post.url }}{% endblock %}
{% block og_title %}{{ post.title }}{% endblock %}
{% block og_description %}{{ post.excerpt|default(post.title, true) }}{% endblock %}

{% block og_image %}
{% if post.metadata.get('image') %}
<meta property="og:image" content="https://gadial.net{{ post.metadata.image }}" />
{% else %}
<meta property="og:image" content="http://gadial.net/img/main/default-card.png" />
{% endif %}
{% endblock %}

{% block twitter_card %}
{% if post.metadata.get('image') %}
<meta name="twitter:card" content="summary_large_image">
{% else %}
<meta name="twitter:card" content="summary">
{% endif %}
{% endblock %}

{% block twitter_url %}https://gadial.net{{ post.url }}{% endblock %}
{% block twitter_title %}{{ post.title }}{% endblock %}
{% block twitter_description %}{{ post.excerpt|default(post.title, true) }}{% endblock %}

{% block twitter_image %}
{% if post.metadata.get('image') %}
<meta property="twitter:image" content="https://gadial.net{{ post.metadata.image }}" />
{% else %}
<meta property="twitter:image" content="http://gadial.net/img/main/default-card.png" />
{% endif %}
{% endblock %}

{% block extra_head %}
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">
{% endblock %}

{% block content %}
    <div class="container">
        <!-- Post Navigation -->
        {% if prev_post or next_post %}
        <nav class="post-navigation">
            {% if prev_post %}
            <a href="{{ prev_post.url }}" class="nav-link nav-prev">
                <span class="nav-label">פוסט ישן יותר →</span>
                <span class="nav-title">{{ prev_post.title }}</span>
            </a>
            {% else %}
            <div></div>
            {% endif %}

            {% if next_post %}
            <a href="{{ next_post.url }}" class="nav-link nav-next">
                <span class="nav-label">← פוסט חדש יותר</span>
                <span class="nav-title">{{ next_post.title }}</span>
            </a>
            {% else %}
            <div></div>
            {% endif %}
        </nav>
        {% endif %}
        
        <header>
            <h1>{{ post.title }}</h1>
            <div class="post-meta">
                <span class="date">{{ post.date.strftime('%Y-%m-%d') }}</span>
                {% if post.categories %}
                <span class="categories">
                    | קטגוריות:
                    {% for cat in post.categories %}
                    <a href="/categories/{{ cat }}.html">{{ cat }}</a>
                    {% endfor %}
                </span>
                {% endif %}
                {% if post.tags %}
                <span class="tags">
                    | תגיות:
                    {% for tag in post.tags %}
                    <a href="/tags/{{ tag }}.html">{{ tag }}</a>
                    {% endfor %}
                </span>
                {% endif %}
            </div>
        </header>
        
        <article>
            {{ post.content | safe }}
        </article>
        
        <footer>
            <p>© כל הזכויות שמורות לגדי אלכסנדרוביץ'</p>
        </footer>
    </div>
{% endblock %}

{% block extra_scripts %}
    <!-- Auto-render KaTeX math -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError: false
            });
        });
    </script>
{% endblock %}
