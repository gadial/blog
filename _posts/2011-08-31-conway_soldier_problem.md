---
id: 1306
title: "חידת החיילים של קונווי"
date: 2011-08-31 13:06:17
layout: post
categories: 
  - משחקים וחידות מתמטיות
tags: 
  - יחס הזהב
  - משחקים מתמטיים
  - קונווי
  - שמורות
social_media_share: true
---
<a href="http://www.gadial.net/">הפוסט הראשון</a> שנכתב בבלוג עסק ברעיון מתמטי מקסים - שמורות, והאופן שבו אפשר להשתמש בהן כדי להראות שדברים מסויימים הם בלתי אפשריים. <a href="http://www.gadial.net/2009/06/25/mahshevet/">פוסט נוסף</a> שפרסמתי בעבר עסק במשחק "מחשבת" (Peg Solitaire) ובאופן שבו שמורות אכלו גם אותו בלי מלח, או ליתר דיוק הראו שוריאציה עליו איננה פתירה. כעת אני רוצה לעסוק בוריאציה מחוכמת נוספת של המשחק שהומצאה על ידי המתמטיקאי ג'ון קונווי אי שם בשנות השישים, ובהוכחת אי-קיום מבוססת שמורות שקשורה אליו והיא מחוכמת קצת יותר מההוכחות שהראיתי עד כה.

המשחק הוא כזה: לוח המשחק הוא לוח משבצות <strong>אינסופי</strong>. בתוך הלוח עובר לו קו גבול אופקי, כך שבכל משבצת שמתחת לקו הגבול יש חייל, ובאף משבצת מעליו אין חייל. המשחק מבוסס על הזזה של חיילים בכיוונים למעלה-למטה וימינה-שמאלה על פי כללי ה"אכילה" של משחק הדמקה: כדי להזיז חייל הוא קופץ מעל חייל אחר ונוחת במשבצת שבצידו השני, אם היא פנויה (אם היא לא פנויה אסור להזיז את החייל באופן הזה). החייל שמעליו קפצו "נאכל" ומסולק מהלוח (שימו לב שלמרות שהאכילה היא כמו בדמקה, החיילים לא זזים באלכסון; אפשר לנסח את החידה גם עבור תנועה באלכסון וזה לא משנה הרבה, אבל זה פוגע בדמיון למחשבת).

מטרת המשחק: להביא חייל כלשהו רחוק ככל שאפשר אל מעבר לגבול. פורמלית, אנחנו רוצים שקוארדינטת ה-{% equation %}y{% endequation %} של החייל תהיה מקסימלית. כמה רחוק אפשר להגיע?

נסו לשחק את המשחק כעת. לא צריך לוח אינסופי - לוח דמקה רגיל שמלא בחיילי דמקה בחציו התחתון יספיק אם רוצים לקבל תחושה של המשחק. בהמשך יהיו ספוילרים למשחק אז לאלו מכם שרוצים לגבש עליו דעה באופן עצמאי, אל תקראו הלאה בינתיים.

<strong><a href="{{site.baseurl}}{{site.post_images}}/2011/08/conway_soldiers.png"><img class="alignnone size-full wp-image-1308" title="conway_soldiers" alt="תמונת משחק החיילים של קונווי" src="{{site.baseurl}}{{site.post_images}}/2011/08/conway_soldiers.png" width="500" height="300" /></a>
</strong>

קרוב לודאי שכל אחד מכם יצליח להגיע למרחק 1 מהגבול (הצעד הראשון במשחק בהכרח עושה זאת), וגם להגיע למרחק 2 מהגבול זה לא קשה במיוחד; להגיע למרחק 3 זה כבר יותר מאתגר, ולהגיע למרחק 4 זה עוד יותר מאתגר. להגיע ל-5 זה כבר ממש מאתגר, בהתחשב בעובדה שזה בלתי אפשרי. זה מה שאנחנו רוצים להוכיח בפוסט הזה.

אז איך מוכיחים שדבר כזה הוא פשוט בלתי אפשרי? ראשית, הבה ונפשט קצת את מה שצריך להוכיח - מספיק להראות שבלתי אפשרי להביא חייל למשבצת {% equation %}\left(0,5\right){% endequation %}, כלומר המשבצת שב"אמצע" הלוח האינסופי ובגובה 5 מעל הגבול. זה נובע די בקלות מהסימטריה של הלוח - אם, למשל, אני מצליח להביא חייל למשבצת {% equation %}\left(3,5\right){% endequation %}, כל שעלי לעשות הוא לחזור <strong>בדיוק על אותה סדרת צעדים</strong> אבל כשכולה מופעלת על חיילים במרחק 3 שמאלה מהחיילים שעליהם פעלתי קודם, כדי להביא חייל למשבצת {% equation %}\left(0,5\right){% endequation %}. במילים אחרות, אם אפשר להביא חייל למשבצת <strong>כלשהי</strong> במרחק 5 מעל הגבול, אז אפשר להביא חייל גם ל-{% equation %}\left(0,5\right){% endequation %}. אם אראה שלא ניתן להביא חייל לשם, פירוש הדבר שלא ניתן להביא חייל לשום משבצת במרחק 5 מעל הגבול.

התעלול, בבסיסו, הוא אותו תעלול כמו בפוסט הקודם על מחשבת. אנחנו הולכים לתת ערך מספרי כלשהו לכל משבצת בלוח, והשמורה שלנו תהיה סכום הערכים של כל המשבצות שיש עליהן חיילים. מה שנראה הוא שככל שמשחקים במשחק, הערך המספרי הזה לא יכול לגדול (הוא עשוי לקטון, אבל זה לא מחוייב המציאות). כמו כן נראה שבתחילת המשחק הערך הזה הוא 1, ושבכל סיטואציה במשחק שבה יש חייל ב-{% equation %}\left(0,5\right){% endequation %}, הערך הוא <strong>לפחות</strong> 1 והדרך היחידה שהוא יהיה 1 היא אם החייל שב-{% equation %}\left(0,5\right){% endequation %} הוא החייל היחיד שנותר בחיים. זה יסיים את ההוכחה בגלל שיש אינסוף חיילים ומשחק תמיד כולל מספר סופי של צעדים (מי שלא השתכנע - נחזור לדיון הזה בסוף).

האתגר המרכזי הוא להחליט איך לחלק ערכים מספריים למשבצות בלוח בצורה "חכמה". הבעיה הראשונה שיש לנו כאן היא שיש <strong>אינסוף</strong> חיילים. זה אומר שהסכום של הערכים של המשבצות שיש עליהם חיילים הוא סכום אינסופי; איך ייתכן שערכו יהיה סופי, או 1?

ובכן, על טורים אינסופיים <a href="http://www.gadial.net/2008/06/17/infinite_series/">כבר דיברתי בעבר</a>. לא אחזור לדיון העקרוני כאן אלא אצטט רק את מה שחשוב לנו: אם {% equation %}q{% endequation %} הוא מספר חיובי קטן מ-1, אז מתקיימת הנוסחה הבאה ("סכום טור הנדסי אינסופי"): {% equation %}\sum_{n=0}^{\infty}q^{n}=\frac{1}{1-q}{% endequation %}. כלומר, הסכום {% equation %}q^{0}+q^{1}+q^{2}+\dots{% endequation %} דווקא כן מסתכם למספר סופי, וזה כל מה שנזדקק לו כאן. לספקנים שביניכם, ההוכחה של אי-פתירות החידה הזו היא דווקא הזדמנות טובה להיווכח בכוחו של מושג הסכום האינסופי; את כל ההוכחה שאני עומד לכתוב מכאן ואילך אפשר לכתוב גם בלי להזדקק למילה "סכום" אלא רק לדבר על גבולות; ההוכחה תהיה טובה באותה מידה, אם כי ברורה פחות, וזה ממחיש שהמושג עצמו מועיל לנו בלי קשר לשם שאנחנו נותנים לו.

אם כן, מראש אנו מחליטים שלכל משבצת ניתן ערך שהוא מהצורה {% equation %}q^{n}{% endequation %}, אבל השאלה היא רק מה יהיה {% equation %}q{% endequation %} ומה יהיה ה-{% equation %}n{% endequation %} שמתאים לכל משבצת. נשאיר את בחירת {% equation %}q{% endequation %} להמשך - נגיע עוד מעט למקום שבו הבחירה שלו נובעת מאליה וחלקכם יגלו שמדובר על אחיו של ידיד ותיק - ונדבר לעת עתה על מה שהולך להיות בחזקה.

נניח ש-{% equation %}\left(x,y\right){% endequation %} היא משבצת כלשהי. מה המרחק שלה ממשבצת היעד שלנו, {% equation %}\left(0,5\right){% endequation %}? ובכן, זה תלוי בשאלה איך מודדים מרחק, נכון? בהקשר שלנו הגיוני למדוד מרחק במספר צעדים שחייל דמקה צריך לבצע כדי להגיע מ-{% equation %}\left(x,y\right){% endequation %} אל {% equation %}\left(0,5\right){% endequation %}. בכל צעד שלו, החייל משנה ב-1 את אחת מהקוארדינטות, אך לא יכול לשנות את שתיהן בו זמנית. אז מה המרחק של, נניח, {% equation %}\left(2,1\right){% endequation %} מ-{% equation %}\left(0,5\right){% endequation %}? צריך ללכת שני צעדים שמאלה ועוד ארבעה צעדים למעלה - סך הכל {% equation %}2+4=6{% endequation %}. למה שני צעדים שמאלה? כי זה ערכו של {% equation %}2-0{% endequation %}. ולמה שני צעדים למעלה? כי זה ערכו של {% equation %}5-0{% endequation %}. שימו לב איזה חיים קלים עשיתי לעצמי - תמיד חיסרתי את הקטן מהגדול כדי לקבל מספר חיובי. באופן כללי משתמשים בסימון לערך מוחלט כדי להגיד שעושים את זה, ומקבלים שבאופן כללי המרחק מ-{% equation %}\left(x,y\right){% endequation %} אל {% equation %}\left(a,b\right){% endequation %} הוא {% equation %}\left|x-a\right|+\left|y-b\right|{% endequation %}. השיטה הזו למדידת מרחק נקראת "מטריקת מנהטן" או "מטריקת נהגי המוניות" - אני מנחש שתוכלו לנחש למה.

במקרה שלנו, המרחק מ-{% equation %}\left(0,5\right){% endequation %} הוא {% equation %}|x|+\left|5-y\right|{% endequation %} (עקרונית לא סביר שנדבר על משבצת שקוארדינטת ה-{% equation %}y{% endequation %} שלה גדולה מ-5 אבל אנחנו לא רוצים לפסול שום דבר על הסף). כדי לפשט את החיים והסימונים אשתמש ב-{% equation %}d{% endequation %} כדי לציין את זה בקיצור כשה-{% equation %}x{% endequation %} וה-{% equation %}y{% endequation %} הספציפיים לא חשובים לנו. במילים אחרות, {% equation %}q^{d}{% endequation %} יהיה הערך המספרי של כל משבצת שמרחקה מהיעד הוא {% equation %}d{% endequation %}. כך למשל הערך של היעד עצמו הוא 1, של כל משבצת שרחוקה ממנה בצעד אחד הוא {% equation %}q{% endequation %} (אלו המשבצות {% equation %}\left(0,4\right),\left(0,6\right),\left(1,5\right),\left(-1,5\right){% endequation %}) וכן הלאה.

עכשיו אנחנו רוצים להתחיל לנתח מה קורה לניקוד הכולל במשחק כשמזיזים כלי.

כשמזיזים כלי רוב המשבצות נותרות ללא שינוי. השינוי הוא בדיוק בשלוש משבצות - זו שבה היה הכלי שהזזנו, זו שבה היה הכלי שקפצו מעליו ונאכל, וזו שבה הכלי שהזזנו נחת. אם כן, הניקוד גם קטן פעמיים (עבור כל אחת משתי המשבצות שאיבדה את הכלי שהיה בה) וגם גדל (עבור המשבצת החדשה שיש בה כלי). כדי להבין כמה הוא בדיוק משתנה צריך להפריד לכמה מקרים.

במקרה הראשון, הכלי המקפץ <strong>התקרב</strong> אל היעד יותר מאשר קודם. נניח שקודם הוא היה במרחק {% equation %}d{% endequation %} מהיעד, וכשהוא נע הוא עבר שתי משבצות (הוא דילג על פני משבצת אחת ונכנס לבאה אחריה), זה אומר שאחרי ההגעה הוא נמצא במרחק {% equation %}d-2{% endequation %} מהיעד. הכלי שמעליו הוא קפץ חייב להיות במרחק {% equation %}d-1{% endequation %} מהיעד, מהטעם הפשוט שהוא נמצא בין משבצת שמרחקה מהיעד {% equation %}d-2{% endequation %} ומשבצת שמרחקה מהיעד {% equation %}d{% endequation %} (אם הוא היה במרחק {% equation %}d-2{% endequation %} או קטן יותר בעצמו, לא ייתכן ששכנו היה במרחק {% equation %}d{% endequation %} - גם השכן היה קרוב יותר; בדומה, אם הוא במרחק {% equation %}d{% endequation %} או גדול יותר, לא ייתכן שיש לו שכן במרחק {% equation %}d-2{% endequation %}). לכן מהניקוד הכולל מופחת {% equation %}q^{d}+q^{d-1}{% endequation %} ומתווסף אליו {% equation %}q^{d-2}{% endequation %}. אנחנו רוצים שהסוג הזה של צעדים - אלו שבהם כלי מתקרב למטרה - <strong>לא ישנה את הניקוד הכללי</strong>. לשם כך חייב להתקיים {% equation %}q^{d-2}=q^{d}+q^{d-1}{% endequation %}. אנחנו רוצים {% equation %}q{% endequation %} חיובי (אם {% equation %}q=0{% endequation %} אז הניקוד הכולל הוא תמיד 0 וזה לא עוזר לכלום) ולכן מותר לחלק ב-{% equation %}q^{d-2}{% endequation %}, להעביר אגפים ולקבל את המשוואה: {% equation %}q^{2}+q-1=0{% endequation %}.

את המשוואה הזו אפשר לפתור עם נוסחת השורשים הרגילה: פתרונותיה הם {% equation %}\frac{-1\pm\sqrt{5}}{2}{% endequation %}. בפני עצמם המספרים הללו נראים קצת מכוערים, אבל כשנותנים להם סימונים ושמות מפוצצים הם פתאום הופכים ליפים יותר. יש מספר מפורסם למדי (מהסיבות הנכונות או שלא מהסיבות הנכונות) בשם "יחס הזהב", {% equation %}\varphi{% endequation %}, שלא אתחיל לתאר כאן - רק אציין שמבחינה מספרית, {% equation %}\varphi=\frac{\sqrt{5}+1}{2}{% endequation %}, שזה בדיוק מינוס של אחד הפתרונות שקיבלנו. אבל הפתרון הזה ממילא לא מעניין אותנו - אנחנו מתעניינים בפתרון השני, החיובי הקטן מ-1, {% equation %}\frac{\sqrt{5}-1}{2}{% endequation %}, שאסמן כ-{% equation %}\lambda{% endequation %} (למה למבדא? כי אין לי רעיון יותר טוב, זה למה). אז לא קשה לראות שמתקיים {% equation %}\varphi-1=\lambda{% endequation %} אבל פרט לכך יחס הזהב לא יעניין אותנו יותר.

אם כן, ה-{% equation %}\lambda{% endequation %} שבחרנו מקיים {% equation %}\lambda^{2}+\lambda-1=0{% endequation %} ולכן גם {% equation %}\lambda^{d-2}=\lambda^{d}+\lambda^{d-1}{% endequation %} ולכן צעד "לכיוון היעד" לא מגדיל את הניקוד בשיטת הניקוד שלנו. מה עם סוגי הצעדים האחרים?

ובכן, יש צעד "הרחק מהיעד" שבו מתחילים במרחק {% equation %}d{% endequation %} ומסיימים במרחק {% equation %}d+2{% endequation %} אחרי שאוכלים כלי במרחק {% equation %}d+1{% endequation %}. במקרה כזה השינוי בניקוד יהיה {% equation %}\lambda^{d+2}-\lambda^{d+1}-\lambda^{d}=\lambda^{d}\left(\lambda^{2}-\lambda-1\right){% endequation %}. כעת, אם {% equation %}\lambda^{2}+\lambda-1=0{% endequation %} ו-{% equation %}\lambda^{2}-\lambda-1{% endequation %} מתקבל ממנו על ידי הפחתת {% equation %}2\lambda{% endequation %}, ברור ש-{% equation %}\lambda^{2}-\lambda-1&lt;0{% endequation %}, כלומר צעד "הרחק מהיעד" מקטין את הניקוד הכללי (וזה לא ממש מפתיע).

בדומה, יש צעד "נייטרלי" שבו מתחילים במרחק {% equation %}d{% endequation %} ומסיימים במרחק {% equation %}d{% endequation %}. זה קורה רק כשחולפים מעל כלי שנמצא בקו ישר עם היעד, ולכן קרוב יותר, כלומר במרחק {% equation %}d-1{% endequation %}. במקרה זה השינוי בניקוד יהיה {% equation %}\lambda^{d}-\lambda^{d}-\lambda^{d-1}=-\lambda^{d-1}{% endequation %} וזה שינוי שהוא בבירור שלילי.

מסקנה: עבור בחירת ה-{% equation %}\lambda{% endequation %} שלנו, הניקוד הכולל במהלך המשחק לא יכול לגדול. כמו כן ברור שחייל שנמצא על משבצת היעד מוסיף 1 לניקוד הכולל ({% equation %}\lambda^{0}{% endequation %}). כל שנותר להבין כעת הוא מה הניקוד הכולל בתחילת המשחק, כשכל החיילים מעבר לגבול. כאן סוף סוף מגיעה מתמטיקה טיפה טכנית אבל אתם כבר יודעים את הסוף - זה יצא 1; אז מי שמתייאש, לא נורא, זה לא העיקר.

בואו נתחיל מהשורה הראשונה שעל הגבול. המרחק של האמצע שלה - {% equation %}\left(0,0\right){% endequation %} - מהיעד הוא 5. המרחק של שני אלו שמצדדיו - 6, ואחר כך 7 וכדומה. בגלל שזה יותר נוח, בואו נסכום קודם כל את הערך המספרי של החלק ה"חיובי" של השורה - כל התאים מ-{% equation %}\left(0,0\right){% endequation %} כולל וימינה ממנו. נקבל את הסכום הבא:

{% equation %}\lambda^{5}+\lambda^{6}+\lambda^{7}+\dots=\lambda^{5}\left(1+\lambda+\lambda^{2}+\dots\right)=\frac{\lambda^{5}}{1-\lambda}{% endequation %}

החלק השמאלי של השורה, לא כולל {% equation %}\left(0,0\right){% endequation %}, זה אותו הדבר רק מתחיל מ-{% equation %}\lambda^{6}{% endequation %}, ולכן נקבל {% equation %}\frac{\lambda^{6}}{1-\lambda}{% endequation %}.

בשורה השניה התא האמצעי ({% equation %}\left(0,-1\right){% endequation %}) הוא במרחק 6, ולכן נקבל שסכום החלק הימני הוא {% equation %}\frac{\lambda^{6}}{1-\lambda}{% endequation %} וסכום החלק השמאלי הוא {% equation %}\frac{\lambda^{7}}{1-\lambda}{% endequation %}, וכן הלאה.

בסופו של דבר נרצה לסכום גם את כל תוצאות הביניים הללו. כל תוצאה פרט ל-{% equation %}\frac{\lambda^{5}}{1-\lambda}{% endequation %} מופיעה פעמיים, ולכן נקבל:

{% equation %}\frac{\lambda^{5}}{1-\lambda}+2\left(\frac{\lambda^{6}}{1-\lambda}+\frac{\lambda^{7}}{1-\lambda}+\dots\right){% endequation %}

נוציא גורם משותף מהסוגריים ונקבל:

{% equation %}\frac{\lambda^{5}}{1-\lambda}+\frac{2\lambda^{6}}{1-\lambda}\left(1+\lambda+\lambda^{2}\dots\right){% endequation %}

ועל ידי שימוש נוסף בנוסחת הסכום של טור הנדסי נקבל לבסוף:

{% equation %}\frac{\lambda^{5}}{1-\lambda}+\frac{2\lambda^{6}}{\left(1-\lambda\right)^{2}}{% endequation %}

ועכשיו נחבר ונקבל:

{% equation %}\frac{\lambda^{5}+\lambda^{6}}{\left(1-\lambda\right)^{2}}{% endequation %}

לא ברור איך להתקדם מהדבר הזה, עד שנזכרים שבחרנו את {% equation %}\lambda{% endequation %} באופן כזה שיקיים את המשוואה {% equation %}\lambda^{2}+\lambda=1{% endequation %}. כעת הכל נהיה יותר פשוט. במונה נוציא את הגורם {% equation %}\lambda^{4}{% endequation %} ונקבל ש-{% equation %}\lambda^{5}+\lambda^{6}=\lambda^{4}\cdot1=\lambda^{4}{% endequation %}, ובמכנה נקבל ש-{% equation %}\left(1-\lambda\right)^{2}=\left(\lambda^{2}+\lambda-\lambda\right)^{2}=\lambda^{4}{% endequation %} והנה המונה והמכנה מצטמצמים ומקבלים 1. קסם!

נסכם: בתחילת המשחק, סכום כל המשבצות שיש עליהן חיילים הוא 1. במהלך המשחק הניקוד הכולל יכול רק לרדת או להישאר כמו שהוא. ב"סוף" המשחק (כשיש חייל ביעד, {% equation %}\left(0,5\right){% endequation %}) הניקוד של אותה משבצת הוא 1 ושל כל משבצת אחרת שיש עליה חייל הוא חיובי, ולכן אם בסוף המשחק יש יותר מחייל אחד על הלוח, לא ייתכן שיהיה חייל במשבצת היעד. זה אומר שאם המשחק נמשך <strong>מספר סופי של צעדים</strong> אז אין שום דרך להגיע למשבצת {% equation %}\left(0,5\right){% endequation %}. מלכתחילה זה סוג המשחק שעליו אנחנו חושבים כשמציגים לנו את החידה.

מה שההוכחה שלנו לא פוסלת הוא את האפשרות שאחרי <strong>מספר אינסופי</strong> של צעדים יישאר על הלוח רק חייל אחד והוא יהיה במשבצת {% equation %}\left(0,5\right){% endequation %}. יש סיבה טובה מאוד לכך שהיא לא פוסלת את האפשרות הזו - כי <strong>אפשר</strong> להביא את המשחק למצב הזה אם אפשר לבצע אינסוף צעדים. כמובן שזה מעלה את השאלה מייד איך אפשר לדבר על משחק עם אינסוף צעדים, וכאן העסק מסתבך. יש דרכים שונות להגדיר את ההתנהגות של משחק עם אינסוף צעדים, ולרוע המזל הדרך הטבעית ביותר, שמשתמשת ב<a href="http://www.gadial.net/2011/05/25/ordinals_overview/">סודרים</a> לא תעבוד - גם עבורה אפשר להוכיח שהמשחק לא יהיה פתיר. המודל שבו המשחק כן פתיר הוא מסובך יותר וכולל סוג מוזר למדי של צעדים (מעין צעדים שבהם הזמן מורץ אחורנית; יש לזה הצדקה במודל המדובר) ואני מעדיף לא להציג אותו כאן ולהותיר את הפוסט הזה פשוט וממוקד יחסית. המטרה שלי כאן הייתה להציג שימוש לא טריוויאלי (אם כי לא מסובך) של שמורות ואני מקווה שהצלחתי בכך.
