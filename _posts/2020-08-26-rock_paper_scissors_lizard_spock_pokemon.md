---
title: "אבן נייר ומספרים ולטאה וספוק ובלבאוזר וצ'רמנדר וגרפים איזומורפיים"
layout: post
categories:
  - תורת הגרפים
tags:
  - אבן נייר ומספריים
---

אחד מהמשחקים הללו ש"כולם מכירים" הוא "אבן, נייר ומספרים". החוקים פשוטים: שני שחקנים עומדים ושרים לעצמם שיר בסגנון "אבן נייר ומספרים המנצח מבין השניים אחת שתיים שלוש" וחיש קל שולחים יד קדימה באחת משלוש צורות: "אבן" (אגרוף), "מספרים" (אצבע ואמה זקורות) ו"נייר" (כף יד פשוטה). ואז... המשחק מסתיים בתיקו כי שני השחקנים שלפו את אותו הדבר, ו"המנצח מבין השניים" שבשם השיר נחשף במערומיו!

אבל אם השחקנים שלפו דברים שונים, המנצח נקבע על פי חוקים סבוכים שאפשר לנסח כך: "אבן שוברת מספריים שגוזרים נייר שעוטפת אבן". כלומר: כל "נשק" שאפשר לשלוף מנצח את אחד מהנשקים האחרים, ומפסיד לאחד מהנשקים האחרים. אם שני השחקנים בוחרים נשק באקראי, אז הם ינצחו בשליש מהפעמים, יפסידו בשליש מהפעמים ובשליש מהפעמים המשחק ייגמר בתיקו. כשמשחקים יותר מפעם אחת ברצף כבר נכנס לתמונה מרכיב פסיכולוגי מעניין - קשה לשחקנים "להגריל באקראי" נשק בראש, כך שכל שחקן משחק באופן מוטה; מה האסטרטגיה שכדאי לשחקן לאמץ כדי לנצח כמה שיותר פעמים? על זה אני לא הולך לדבר הפעם, אבל זה תחום מגניב בפני עצמו.

לא מזמן הילד בן ה-5 שלי סיפר לי על החידושים האחרונים בעולם האבן-נייר-ומספריים: מתברר שאצלם בגן יש נשקים נוספים שכוללים (בין היתר) "בור", "פצצה", "קשת", "רובה" וגם "פיל" ו"תרנגולת" עם חוקים סבוכים מאוד של מי מנצח את מי. הבעיה עם החוקים השרירותיים שהמציאו באותו גן היא שהם <strong>מוטים</strong> לטובת נשקים מסויימים - למיטב זכרוני "בור" מנצח כמעט כל דבר שם. מה שהיינו <strong>רוצים</strong> שיקרה, אם אנחנו רוצים משחק מעניין, הוא שכל נשק ינצח <strong>בדיוק</strong> חצי מהנשקים האחרים, ויפסיד לחצי מהנשקים האחרים, גם בגרסאות המוכללות.

אם יש ארבעה נשקים, קל לראות שזה בלתי אפשרי: אם נבחר את אחד מהנשקים, נותרו לנו 3 אחרים. מכיוון ש-3 הוא מספר אי זוגי, אי אפשר לחלק אותו ל-2; אי אפשר שהנשק שלנו ינצח {% equation %}1.5{% endequation %} מהנשקים ויפסיד ל-{% equation %}1.5{% endequation %} מהנשקים. אם כן, כדי שמשחק "אבן נייר ומספריים מוכלל" יעבוד, הכרחי שמספר הנשקים בו יהיה <strong>אי זוגי</strong>.

מכאן אנחנו מקבלים שההכללה הראשונה של אבן נייר ומספריים צריכה להיות עבור 5 נשקים. הכללה מוכרת שכזו נקראת "אבן-נייר-מספרים-לטאה-ספוק" והיא <a href="http://www.samkass.com/theories/RPSSL.html">הומצאה</a> בידי סם קס וקרן ברילה ואחר כך הופיעה בתוכנית הטלוויזיה "המפץ הגדול" כך שעכשיו כל היקום מכיר אותה. מה זו לטאה אנחנו יודעים, ומחווים אותה באמצעות הצמדת אצבעות לאגודל בצורה שמזכירה ראש של לטאה; "ספוק" הוא הדמות של לאונרד נימוי מתוכנית הטלוויזיה Star Trek. ספוק הוא חצי וולקני, כלומר שייך לגזע חייזרים ששם דגש על לוגיקה ומחווה שלום בעזרת פיצול אצבעות (מחווה שלאונרד נימוי עצמו המציא, בהשראת ברכת הכוהנים).

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/spock.jpg" alt=""/>

הנשקים מתנהגים כך: אבן-נייר-מספרים מתנהגים כמקודם זה עם זה; לטאה מנצחת את ספוק ("מרעילה אותו") ואת הנייר ("אוכלת אותו"), אבל מפסידה לסלע ולמספריים שמחסלים אותה בצורה די בנאלית. ספוק לעומת זאת יודע לפצפץ את הסלע והמספריים אבל הנייר מבלבל אותו (כנראה כתוב בצד אחד של הנייר "מה שכתוב בצד השני הוא שקר" ובצד השני כתוב "מה שכתוב בצד השני הוא אמת"). את כל זה אפשר להציג בדיאגרמה הבאה:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/rpsls.png" alt=""/>

כאן מתעוררת בי כבר שאלה - מה זה בעצם אומר, שהמשחק הזה "הומצא" בידי סם קס וקרן ברילה? מה שהם בוודאי המציאו זה את <strong>השמות</strong> של הנשקים החדשים (לטאה וספוק), את <strong>מחוות הידיים</strong> בשבילם ואת <strong>הנימוקים</strong> לכך שנשק אחד מנצח את השני. כל אלו הם דברים חשובים ביותר - בלעדיהם לא נזכור את חוקי המשחק והוא לא ייראה לנו מגניב. אבל מבחינה <strong>מתמטית</strong> הם לא רלוונטיים - אלו "רק" סימונים וסיפורים, והמתמטיקה מתעניינת בהפשטה - במה שנשאר אחרי שמסירים את הדברים הללו. כמו שהמתמטיקה מתעסקת בשאלה "כמה זה 2+3" שהיא הפשטה של שאלות קונקרטיות כמו "כמה זה שני תפוחים ועוד שלושה תפוחים" או "לאיזו קומה נגיע אם אנחנו בקומה 2 ואנחנו עולים שלוש קומות".

אחרי ההפשטה, מה שנשאר לנו מהמשחק הוא זה:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/RPS5_RAW.png" alt=""/>

ציור כזה נקרא <strong>גרף</strong>. יש בו שני סוגים של דברים: "עיגולים" ו"חצים". לעיגולים קוראים <strong>צמתים</strong> ולחצים קוראים <strong>קשתות</strong>. ברמה הכי פורמלית של העניין, גרף הוא קבוצה {% equation %}V{% endequation %} של צמתים (במקרה שלנו, הצמתים הם המספרים מ-1 עד 5) ועוד קבוצה {% equation %}E{% endequation %} של קשתות, כשכל קשת היא זוג של צמתים, עם חשיבות לסדר: {% equation %}e=\left(v,u\right){% endequation %}, ולפעמים מסמנים פשוט {% equation %}v\overset{e}{\to}u{% endequation %}.

גרף כזה הוא נקודת ההתחלה שלנו כשאנחנו באים לבנות משחק "אבן-נייר-ומספריים" מוכלל עבור חמישה נשקים - אנחנו לוקחים את הגרף, נותנים שם לכל צומת, ואז עבור כל קשת {% equation %}v\overset{e}{\to}u{% endequation %} אנחנו ממציאים הסבר למה {% equation %}v{% endequation %} מנצח את {% equation %}u{% endequation %}.

בואו נעשה את זה בפועל, באמצעות <strong>פוקימונים</strong>. הרעיון בפוקימונים הוא שלכל פוקימון יש "טיפוס" - יש פוקימוני אש, פוקימוני מים וכדומה. חלק מסוגי הפוקימונים פגיעים להתקפות מסוג פוקימונים אחר - למשל, פוקימון אש פגיע להתקפות מים. כבר במשחק הפוקימונים הראשון, שלושת הפוקימונים "הבסיסיים" ביותר - צ'רמנדר עבור "אש", סקווירטל עבור "מים" ובלבאוזר עבור "עשב" - נבחרו כדי לקיים יחסים כמו באבן נייר ומספריים: אש מנצחת עשב שמנצח מים שמנצחים אש:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/RPS-3Pokemon.png" alt=""/>

אני רוצה להכליל את זה עבור חמישה פוקימונים, כך שכל פוקימון פגיע לשניים אחרים, ושניים אחרים פגיעים אליו. לרוע המזל, המבנה של משחק הפוקימונים הוא כזה שלא ניתן <strong>להרחיב</strong> את השלשה של אש-מים-עשב כדי להשיג את זה (אין עוד טיפוסי פוקימונים שמשתלבים בצורה סימטרית עם שלושת אלו) אבל אם אחליף את "מים" ב"קרח" (שמיוצג על ידי הפוקימון לאפרס שהוא פוקימון משולב של מים/קרח) ואוסיף פנימה את פוקימון ה"אדמה" דיגלט ואת פוקימון ה"סלע" אוניקס, אני אוכל לקבל את משחק האבן-נייר-ומספרים מוכלל שרציתי.

בואו ניקח את הגרף שהראיתי קודם:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/RPS5_RAW.png" alt=""/>

ועכשיו נתחיל להחליף את המספרים בו בפוקימונים. מכיוון שהמספר הסידורי של פוקימון העשב בלבאוזר הוא 1, נשים אותו במקום המספר 1 בגרף:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/RPS-5Pokemon-1.png" alt=""/>

עכשיו, מהצומת של בלבאוזר יוצאות שתי קשתות, אל הצמתים 2 ו-3. המשמעות שאני רוצה שתהיה לקשת {% equation %}v\overset{e}{\to}u{% endequation %} היא "{% equation %}v{% endequation %} מנצח את {% equation %}u{% endequation %}" ולכן אני רוצה לשים בצמתים 2 ו-3 את הפוקימונים ש"עשב" מנצח - במקרה שלנו, הפוקימונים של "קרקע" ו"סלע". אז אני אשים אותם שם, אבל צריך להיות זהירים: יש לי <strong>שתי דרכים</strong> לעשות את זה. או "2 הופך לסלע, 3 הופך לקרקע" או "2 הופך לקרקע, 3 הופך לסלע". האם שתי הדרכים לגיטימיות? ובכן, לא! כי אני רוצה להמשיך לכבד את היחס {% equation %}3\to2{% endequation %} שמופיע בגרף. מכיוון ש-3 מנצח את 2, גם מי ש-3 יהפוך אליו צריך לנצח את מי ש-2 הופך אליו. על פי חוקי הפוקימונים קרקע מנצחת סלע, ולכן 3 יהפוך לפוקימון הקרקע ו-2 יהפוך לפוקימון הסלע:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/RPS-5Pokemon-2.png" alt=""/>

עכשיו אפשר להתפנות לשאלה איזה פוקימונים יחליפו את 4 ו-5. כמו קודם, גם כאן הסתכלות על החצים קובעת לנו מה חייב להופיע שם: נותרו לנו רק פוקימוני אש וקרח, ועל פי חוקי הפוקימונים אש מנצחת קרח. מכיוון שהקשת {% equation %}5\to4{% endequation %} מראה ש-5 מנצח את 4, אז בהכרח 5 חייב להיות אש ואילו 4 חייב להיות קרח:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/RPS-5Pokemon-3.png" alt=""/>

זה משלים את הגרף החדש שלנו, אבל שימו לב שאפילו לא בדקתי את כל הקשתות במפורש. למשל, יש לנו בגרף את הקשת "קרח{% equation %}\leftarrow{% endequation %}קרקע" שלא התייחסתי אליה במפורש. צריך לבדוק שהקשר הזה באמת מתקיים; אבל הדוגמא שלי הונדסה בקפידה כדי להתאים לחוקים הללו אז אתם יכולים להאמין לי שזה מתקיים גם בלי לרוץ לחפש מידע באינטרנט על פוקימונים.

בשביל מה זה היה טוב? ראשית, כי פוקימונים זה כיף אז אם אפשר לעשות גרסה אלטרנטיבית של אבן-נייר-מספריים-לטאה-ספוק עם פוקימונים, למה לא? אבל שנית, כי רציתי להדגים פה את האופן שבו אנחנו לוקחים את הגרף האבסטרקטי ו"מלבישים" עליו בגד נוסף של פוקימונים. הבגד הזה, מבחינה מתמטית, הוא רק <strong>סימונים אחרים</strong> לאותו גרף כמו קודם. וכפי שכבר אמרתי - סימונים אחרים זה חשוב. זה הופך את הגרף למעניין ויפה, אבל התוכן המתמטי <strong>זהה</strong>.

כדי לראות את זה, בואו נשים זה לצד זה את שני הגרפים כוכבי הפוסט:

<img src="{{site.baseurl}}{{site.post_images}}/2020/08/RPS5-2-Variations.png" alt=""/>

זה לגמרי "אותו הגרף רק עם סימונים שונים". הדרך המתמטית להשתכנע בזה היא בעזרת <strong>פונקציה</strong> - משהו שמתאים לכל סימון מהגרף הימני סימון מהגרף השמאלי (יש לי פוסט על פונקציות <a href="https://gadial.net/2020/01/12/what_are_functions/">כאן</a>). הפונקציה במקרה שלנו היא זו:

<ul> <li><strong>אבן</strong> עוברת אל <strong>עשב</strong></li>


<li><strong>מספריים</strong> עוברים אל <strong>קרקע</strong></li>


<li><strong>נייר</strong> עובר אל <strong>אש</strong></li>


<li><strong>לטאה</strong> עוברת אל <strong>סלע</strong></li>


<li><strong>ספוק</strong> עובר אל <strong>קרח</strong></li>

</ul>

הפונקציה שהצגתי כרגע היא מה שנקרא "חד-חד-ערכית ועל" (יש לי פוסט על פונקציות כאלו <a href="https://gadial.net/2020/05/15/invertible_functions/">כאן</a>). "חד-חד-ערכית" אומר שאין שני קלטים לפונקציה שעוברים לאותו פלט (כלומר, לא קורה למשל שגם ספוק וגם לטאה עוברים אל סלע). "על" אומר שכל סימן מהגרף השמאלי באמת מתקבל בתור פלט לאחד מהקלטים. ההגדרות הפורמליות הללו הן הדרך של המתמטיקה לתפוס את הקונספט של "אותו הדבר עד כדי שינוי סימונים".

במקרה של גרף, יש לנו <strong>מבנה נוסף</strong> שאנחנו רוצים להתחשב בו - השאלה "מאיפה לאיפה יש קשת". אני רוצה שאם ניקח שני קלטים {% equation %}x,y{% endequation %} מהגרף המקורי כך שיש קשת {% equation %}x\to y{% endequation %} אז תהיה קשת גם מהפלט של {% equation %}x{% endequation %} אל הפלט של {% equation %}y{% endequation %} - זה מה שהתאמצתי כל כך לשמור עליו כשבניתי את הגרף של הפוקימונים. בואו נראה איך זה כתוב פורמלית במתמטית: אם יש לנו <strong>שני גרפים</strong>, {% equation %}G_{1}=\left(V_{1},E_{1}\right){% endequation %} ו-{% equation %}G_{2}=\left(V_{2},E_{2}\right){% endequation %}, ויש לנו פונקציה {% equation %}f:V_{1}\to V_{2}{% endequation %} (כלומר, פונקציה שלוקחת קלט ששייך ל-{% equation %}V_{1}{% endequation %} ומחזירה פלט ששייך ל-{% equation %}V_{2}{% endequation %}) אנחנו רוצים שיתקיים ש-{% equation %}u\to v{% endequation %} מתקיים אם ורק אם {% equation %}f\left(u\right)\to f\left(v\right){% endequation %} (או קצת יותר פורמלית: ש-{% equation %}\left(u,v\right)\in E_{1}{% endequation %} מתקיים אם ורק אם {% equation %}\left(f\left(u\right),f\left(v\right)\right)\in E_{2}{% endequation %}).

במקרה שבו יש לנו פונקציה {% equation %}f{% endequation %} שמקיימת את התנאי הנ"ל והיא חד-חד-ערכית ועל, אומרים שהגרפים {% equation %}G_{1},G_{2}{% endequation %} הם <strong>איזומורפיים</strong> ושהפונקציה {% equation %}f{% endequation %} הזו היא <strong>איזומורפיזם </strong>של הגרפים הללו. המושג הזה, של איזומורפיזם של גרפים, הוא המושג המתמטי המרכזי שהולך לשחק תפקיד בכל מה שאני רוצה לדבר עליו בהקשר של אבן-נייר-ומספריים בהמשך.

נקודה אחת ששווה להתייחס אליה היא שהאיזומורפיזם שמצאתי בין גרף הלטאה-ספוק וגרף הפוקימונים הוא לא האיזומורפיזם <strong>היחיד</strong> שאפשר למצוא. הייתי יכול לעשות גם את הדבר הבא:

<ul> <li><strong>אבן</strong> עוברת אל <strong>סלע</strong> (זה מה שרציתי לעשות מההתחלה! זה הכי טבעי!)</li>


<li><strong>מספריים</strong> עוברים אל <strong>קרח</strong></li>


<li><strong>נייר</strong> עובר אל <strong>קרקע</strong></li>


<li><strong>לטאה</strong> עוברת אל <strong>אש</strong></li>


<li><strong>ספוק</strong> עובר אל <strong>עשב</strong></li>

</ul>

למעשה, לא קשה לראות שקורה הדבר הבא: אם אני רוצה לבנות איזומורפיזם בין שני הגרפים, אני יכול לבחור <strong>איזה צומת שמתחשק לי</strong> ולהעביר את <strong>אבן</strong> אליו. מרגע שהעברתי אליו את <strong>אבן</strong>, כל יתר מה שהאיזומורפיזם עושה נקבע בלי שתהיה לי שליטה על זה, רק מתוך יחסי ה"מי מצביע על מי". אם תעברו שוב על התהליך שבו בניתי את גרף הפוקימונים, זה בדיוק מה שקרה שם: מרגע שקבעתי ש-1 עובר אל בלבאוזר כבר לא הייתה לי שליטה על המשך התהליך. זה אומר שבסך הכל יש 5 איזומורפיזמים בין הגרפים, אחד לכל פלט אפשרי של "אבן".

לסיום, בואו נגיע אל הפואנטה שלי בפוסט הזה. אמרתי שאיזומורפיזם פירושו "שני הגרפים הללו הם אותו הדבר עד כדי סימונים". מבחינה מתמטית אבן-נייר-מספריים-לטאה-ספוק הוא <strong>אותו משחק בדיוק</strong> כמו משחק הפוקימונים שלי, אפילו אם החוויה שלנו כשאנחנו משחקים במשחקים היא שונה כי אנחנו אוהבים את ספוק יותר מפוקימונים או ההפך. האם זה <strong>חייב</strong> להיות כך? האם כל משחק דמוי אבן-נייר-ומספריים עם 5 "נשקים" יהיה איזומורפי לכל משחק אחר שכזה? התשובה היא <strong>כן</strong>, ואותו דבר נכון גם למשחקים עם 3 נשקים. אם זה נראה מובן מאליו, נפלא; האם זה נראה מובן מאליו גם למשחקים עם 7 נשקים? כי בהם התשובה היא <strong>לא</strong>. יש שלושה משחקים <strong>שונים</strong> עם 7 נשקים. לא שונים במובן של "סימונים שונים" אלא שונים במובן של <strong>לא איזומורפיים</strong>. כלומר, מכאן העסק מתחיל להסתבך באמת. על זה נדבר בפוסט הבא. 