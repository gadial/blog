---
id: 758
title: "אז מה לפיוצ'רמה ולתורת החבורות?"
date: 2010-09-14 11:15:36
layout: post
categories: 
  - משחקים וחידות מתמטיות
  - מתמטיקה בראי התקשורת
  - קומבינטוריקה
tags: 
  - הוכחות יפות
  - מתמטיקה פופולרית מוצלחת
  - פיוצ'מרה
  - תמורות
---
<a href="http://en.wikipedia.org/wiki/Futurama">פיוצ'רמה</a> הייתה מאז ומעולם קומדיית מד"ב מוצלחת; היא לוקחת רעיונות מד"ביים יפים ומעניינים, ואז מרביצה להם, עושה מהם צחוק, משתוללת איתם בצורה חסרת הגיון ובאופן כללי הורסת אותם לחלוטין באופן המצחיק ביותר האפשרי. שש שנים לאחר ביטולה היא הוקמה סוף סוף לתחייה, וחזרה אנרגטית ומצחיקה יותר מאי פעם. למי שטרם ראה, אני מאוד ממליץ לראות את הסדרה (ואני מקווה שגיליתי לפחות לקורא אחד שהסדרה קמה לתחיה ושיש עונה חדשה לראות).

באחד מ<a href="http://theinfosphere.org/The_Prisoner_of_Benda">הפרקים</a> המצחיקים והמטורללים ביותר בעונה החדשה הסדרה קופצת על הרעיון המוכר של שני אנשים שמחליפים גוף, הפעם באמצעות מכונה-להחלפת-מוחות. אלא שיש קאץ': מרגע שהמכונה החליפה בין זוג מסויים, בגלל ממבו-ג'מבו מדעי כלשהו היא לא יכולה להחליף ביניהם שוב. מכיוון שהם רוצים לחזור לגוף המקורי הם מערבים מישהו שלישי בעניין, אלא שגם זה נוחל כשלון חרוץ. כדי לא לגלוש יותר מדי לעלילת הפרק אכנה את הנפשות הפועלות בשמות אליס, בוב וצ'רלי. אז אליס ובוב התחלפו, ולאחר מכן כדי לנסות ולחזור לגופם המקורי, אליס (בגופו של בוב) התחלפה עם צ'רלי. מה יש לנו עכשיו? אליס בתוך צ'רלי, בוב בתוך אליס, צ'רלי בתוך בוב. מה מה מה?

המתמטיקה לא יכולה לסבול תיאורים מילוליים כאלו. צריך לעשות סדר ולכתוב את הכל במסודר. ראשית כל ננסה להבין איזה אובייקט מתמטי יש לנו כאן - המושג המתאים הוא <strong><a href="http://he.wikipedia.org/wiki/%D7%AA%D7%9E%D7%95%D7%A8%D7%94_%28%D7%9E%D7%AA%D7%9E%D7%98%D7%99%D7%A7%D7%94%29">תמורה</a></strong> (ובעברית: פרמוטציה), אחד מהמושגים הבסיסיים שבתורת החבורות (אם כי יש להודות שאין הרבה תורת החבורות בפוסט הזה - הרעיונות הם בעיקרם קומבינטוריים). תמורה של {% equation %}n{% endequation %} מספרים או אותיות מתארת החלפה ביניהם - כל מספר עובר למספר אחר מהקבוצה. התיאור של "כל אדם עובר לגוף אחר" הוא די מדוייק כאן. הנה הדרך שבה מתארים את התמורה שעברו אליס, בוב וצ'רלי: {% equation %}\left(\begin{array}{ccc}a & b & c\\c & a & b\end{array}\right){% endequation %}. ה-{% equation %}a,b,c{% endequation %} שלמעלה מסמלים את המוחות של אליס, בוב וצ'רלי; ה-{% equation %}c,a,b{% endequation %} שלמטה מסמלים את הגופים שאליהם הם עברו. {% equation %}a{% endequation %} מעל {% equation %}c{% endequation %} אומר "אליס עברה לגוף של צ'רלי", ו-{% equation %}b{% endequation %} מעל {% equation %}a{% endequation %} אומר שבוב עבר לגוף של אליס, וכן הלאה. המצב התקין שבו כל אחד בגוף האמיתי שלו מתואר על ידי {% equation %}\left(\begin{array}{ccc}a & b & c\\a & b & c\end{array}\right){% endequation %} (דבר כזה נקרא "תמורת הזהות"). לא יודע מה איתכם, אבל לי הרבה יותר קל להבין את הסיטואציה כשאני רואה {% equation %}\left(\begin{array}{ccc}a & b & c\\c & a & b\end{array}\right){% endequation %} מול העיניים. זה לקח חשוב לדעתי - סימונים מתמטיים נועדים לעשות את החיים <strong>קלים יותר</strong>, למרות שלעתים קרובות אוהבים להציג אותם כדברים קשים ומבלבלים.

כיצד ניתן להמשיך מהמצב הנוכחי? מכיוון ש-{% equation %}a{% endequation %} רוצה לחזור ל-{% equation %}a{% endequation %}, וכרגע הוא ב-{% equation %}c{% endequation %}, אז מתבקש להחליף את הגוף של {% equation %}c{% endequation %} עם הגוף של {% equation %}a{% endequation %}. זה יעביר אותנו לסיטואציה {% equation %}\left(\begin{array}{ccc}a & b & c\\a & c & b\end{array}\right){% endequation %} - תמורה שזהה לקודמת פרט לכך ש-{% equation %}a,c{% endequation %} בשורה התחתונה החליפו את מקומותיהם. אבל זה מצב בעייתי כי החלפת הגופים של {% equation %}b,c{% endequation %} כבר בוצעה פעם אחת ולא חוקי לבצע אותה שוב. אז עושה רושם שאי אפשר לתקן את הסיטואציה המעוותת על ידי הכנסת דמות חדשה אחת לתמונה. האם אפשר עם שתיים? כמובן שהפרק חיש קל יוצר ערבוביה איומה ונוראית מכל הדמויות בסדרה, אבל לבסוף הכל בא על מקומו בשלום כשמסתבר שאכן, אפשר לתקן כל מהומה שכזו - ולא משנה כמה הדמויות התערבבו, ולא משנה כמה החלפות כבר בוצעו (ולכן "נשרפו" ואסור להשתמש בהן יותר) אם מכניסים לתמונה שתי דמויות חדשות שאפשר להשתמש בהן.

הכותב של הפרק, קן קילר, הוא בעל דוקטורט במתמטיקה, ולכן כנראה החליט להתייחס לבעיה שהוא עצמו יצר ברצינות ולא סתם לנפנף אותה הצידה. הוא ישב וטרח לפתור אותה בעצמו (זו לא בעיה קשה במיוחד, אבל גם לא סטנדרטית לגמרי - האיסור על שימוש חוזר באותה תמורה מסבך את העניינים), וכתב הוכחה שמציגה את הפתרון, ובסופו של דבר גם הציג אותה בפרק עצמו (כמובן, צריך להיות זריזים ולהקפיא את המסך כדי לקרוא אותה בשלמותה אבל אנשים טובים כבר טרחו והעלו את <a href="http://pool.theinfosphere.org/images/4/4e/Prisoner_of_Benda_Theorem_on_Chalkboard.png">התמונה המתאימה</a> לרשת) ובפרק אפילו רואים איך האלגוריתם פועל במקרה הספציפי שלו. זה ללא ספק המופע הרציני ביותר של מתמטיקה שראיתי אי פעם בסדרת טלוויזיה או בסרט; זה <strong>בדיוק</strong> איך שלדעתי צריך לעשות את זה. כל הכבוד לפיוצ'רמה!

אם כן, מה הפתרון? קילר משתמש בתעלול נפוץ שנוקטים בו כשעוסקים בתמורות - כל תמורה אפשר לפרק למכפלת מעגלים זרים. למה הכוונה? ובכן, נניח שנתונה לנו תמורה כללית כלשהי. נבחר באופן שרירותי את אחד מהמשתתפים במשחק ונסמן אותו ב-{% equation %}1{% endequation %}. כעת, נסמן את מי ש-{% equation %}1{% endequation %} עבר אליו כ-{% equation %}2{% endequation %}, ואת מי ש-{% equation %}2{% endequation %} עבר אליו כ-{% equation %}3{% endequation %} וכן הלאה. מתישהו חייב להופיע מישהו שכבר סימנו במספר כי יש רק מספר סופי של משתתפים במשחק. כלומר, יש מספר {% equation %}k{% endequation %} שעובר למספר שכבר ראינו. אבל לאן {% equation %}k{% endequation %} יכול לעבור בכלל? הוא לא יכול לעבור ל-{% equation %}2{% endequation %}, כי {% equation %}2{% endequation %} כבר תפוס - {% equation %}1{% endequation %} עבר אליו. וגם ל-{% equation %}3{% endequation %} הוא לא יכול לעבור מאותה סיבה, וכן הלאה; אם כן, הוא יכול לעבור רק ל-{% equation %}1{% endequation %}. זהו ה"מעגל" המדובר - {% equation %}1{% endequation %} עובר ל-{% equation %}2{% endequation %}, ו-{% equation %}2{% endequation %} עובר ל-{% equation %}3{% endequation %} וכן הלאה. מסמנים זאת כ-{% equation %}\left(\begin{array}{cccc}1 & 2 & \cdots & k\\2 & 3 & \cdots & 1\end{array}\right){% endequation %} (ולעתים גם כ-{% equation %}\left(123\dots k\right){% endequation %} אבל לא אשתמש כאן בסימון זה).

עכשיו, ייתכן מאוד שלא תפסתי את כל המשתתפים בתמורה באופן הזה. אם כן, פשוט אקח מישהו שטרם סימנתי, אסמן אותו ואתחיל לבנות מעגל חדש החל ממנו. כך למשל התמורה {% equation %}\left(\begin{array}{cccc}1 & 2 & 3 & 4\\3 & 4 & 1 & 2\end{array}\right){% endequation %} ניתנת לתיאור כמכפלת שני המעגלים {% equation %}\left(\begin{array}{cc}1 & 3\\3 & 1\end{array}\right)\left(\begin{array}{cc}2 & 4\\4 & 2\end{array}\right){% endequation %} (אם כי אם ננקוט בשיטה שהצעתי, המספור של האיברים יהיה שונה). הפאנץ' פה הוא שיספיק לנו לטפל בכל מעגל בנפרד ו"לתקן" אותו, כל עוד לא נעבור על הכלל שלפיו אסור לבצע את אותה החלפה יותר מפעם אחת.

אם כן, נניח שיש לנו את המעגל {% equation %}\left(\begin{array}{cccc}1 & 2 & \cdots & k\\2 & 3 & \cdots & 1\end{array}\right){% endequation %}. מה עושים? קילר מציע קודם כל להכניס למשחק <strong>שני</strong> שחקנים חדשים, {% equation %}x,y{% endequation %}. נקבל את התמורה {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\2 & 3 & \cdots & 1 & x & y\end{array}\right){% endequation %}. כעת הוא מציע להחליף את מי שבגוף של {% equation %}1{% endequation %} עם מי שבגוף של {% equation %}x{% endequation %} - הוא מסמן זאת כ-{% equation %}\left\langle 1,x\right\rangle {% endequation %}. בפועל זה אומר להחליף את שני המספרים בשורה התחתונה של התמורה שמעליהם, בשורה העליונה, מופיעים {% equation %}1{% endequation %} ו-{% equation %}x{% endequation %}. כלומר, נקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\x & 3 & \cdots & 1 & 2 & y\end{array}\right){% endequation %}.

עכשיו קילר מציע לבצע את {% equation %}\left\langle 2,x\right\rangle {% endequation %}. נקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\x & 2 & \cdots & 1 & 3 & y\end{array}\right){% endequation %}. אני מניח שהרעיון ברור כעת - "תיקנו" את {% equation %}2{% endequation %}, ואם נבצע את {% equation %}\left\langle x,3\right\rangle {% endequation %} נתקן גם את 3 וכן הלאה. אז למה לא מספיק להשתמש ב-{% equation %}x{% endequation %} וחסל? כי אם נמשיך להשתמש ב-{% equation %}x{% endequation %} לכל אורך הדרך, בסופו של דבר נגיע לתמורה {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\x & 2 & \cdots & k & 1 & y\end{array}\right){% endequation %} וכדי לתקן אותה נזדקק להחלפה {% equation %}\left\langle 1,x\right\rangle {% endequation %} שכבר ביצענו. פתרון אפשרי אחד הוא לבצע כעת {% equation %}\left\langle x,y\right\rangle {% endequation %} ולקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\x & 2 & \cdots & k & y & 1\end{array}\right){% endequation %} ולאחר מכן לבצע {% equation %}\left\langle 1,y\right\rangle {% endequation %} ולקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\1 & 2 & \cdots & k & y & x\end{array}\right){% endequation %} אבל אז אמנם תיקנו את המעגל המקורי, אך במחיר החלפה של {% equation %}x,y{% endequation %} שכבר לא נוכל לתקן (כי ביצענו את {% equation %}\left\langle x,y\right\rangle {% endequation %}).

לכן קילר מציע להפסיק את השימוש ב-{% equation %}x{% endequation %} אי שם באמצע הדרך. הוא מציע לעשות את זה במקום שרירותי שהוא מסמן ב-{% equation %}i{% endequation %}, ואני אדגים את זה עבור {% equation %}i=1{% endequation %}. כלומר, אני מבצע רק את ההחלפה {% equation %}\left\langle x,1\right\rangle {% endequation %} ומקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\x & 3 & \cdots & 1 & 2 & y\end{array}\right){% endequation %}. כעת קילר מכניס את {% equation %}y{% endequation %} לפעולה; אם {% equation %}x{% endequation %} ביצע את כל ההחלפות עד {% equation %}\left\langle x,i\right\rangle {% endequation %}, אז מעתה ואילך יתבצעו החלפות {% equation %}\left\langle y,i+1\right\rangle {% endequation %} ומעלה. כלומר, אני מבצע את ההחלפה {% equation %}\left\langle y,2\right\rangle {% endequation %} ומקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & \cdots & k & x & y\\x & y & \cdots & 1 & 2 & 3\end{array}\right){% endequation %}, ואז מבצע את {% equation %}\left\langle y,3\right\rangle {% endequation %} ובכך "מתקן" את 3, וכן הלאה וכן הלאה עד שאני מקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & 3\cdots & k & x & y\\x & y & 3\cdots & k & 2 & 1\end{array}\right){% endequation %}. כלומר, גם {% equation %}x{% endequation %} וגם {% equation %}y{% endequation %} נמצאים עכשיו בתוך שטח האויב, אבל קל מאוד לתקן את זה - מבצעים {% equation %}\left\langle y,1\right\rangle {% endequation %} ו-{% equation %}\left\langle x,2\right\rangle {% endequation %} (ובאופן כללי: {% equation %}\left\langle x,i+1\right\rangle {% endequation %}). אלו שתי החלפות שמובטח לי שטרם עשיתי (כי את ההחלפות עם {% equation %}x{% endequation %} הפסקתי ב-{% equation %}\left\langle x,i\right\rangle {% endequation %} ואת ההחלפות עם {% equation %}y{% endequation %} התחלתי רק מ-{% equation %}\left\langle y,i+1\right\rangle {% endequation %}). והופס - אני אקבל {% equation %}\left(\begin{array}{cccccc}1 & 2 & 3\cdots & k & x & y\\1 & 2 & 3\cdots & k & y & x\end{array}\right){% endequation %}. זה בדיוק הפתרון שקיבלתי גם קודם, בהבדל משמעותי אחד: כעת <strong>טרם ביצעתי את ההחלפה</strong> {% equation %}\left\langle x,y\right\rangle {% endequation %}! אני יכול לבצע אותה כעת ולקבל שהכל שב על מקומו בשלום. שימו לב שכל ההחלפות שביצעתי היו מהצורה {% equation %}\left\langle x,i\right\rangle {% endequation %} ו-{% equation %}\left\langle y,i\right\rangle {% endequation %} עבור {% equation %}1\le i\le k{% endequation %} כלשהם. כלומר, כל החלפה עירבה את {% equation %}x{% endequation %} או את {% equation %}y{% endequation %} ולכן לא ייתכן שנבצע החלפה "אסורה" - פשוט כי כל ההחלפות שהביאו את התמורה למצבה הנוכחי היו בין זוגות שבהם לא הופיע לא {% equation %}x{% endequation %} ולא {% equation %}y{% endequation %}.

אלא מה? זה פותר מעגל אחד, אבל אמרנו שהתמורה הכללית עשויה להיות מורכבת ממספר מעגלים. הבעיה הזו נפתרת עם אבחנה פשוטה אבל מקסימה: לא חייבים להזדרז ולתקן את ההחלפה בין {% equation %}x{% endequation %} ו-{% equation %}y{% endequation %}; אפשר לשלוח אותם לטפל במעגל הבא בתור, ולא רק שזה יעבוד באותו האופן, זה גם יחזיר את {% equation %}x,y{% endequation %} לגופים המקוריים שלהם בלי הצורך להחליף אותם במפורש (למה?). כמובן, ייתכן שנצטרך לשלוח אותם לטפל במעגל נוסף, ואז הם שוב יתחלפו... אבל בסופו של דבר, אחרי שנסיים עם כל המעגלים, אחד משניים: או שהם בגוף המקורי שלהם ואז אין בעיה, או שהם הוחלפו, ואז נבצע את ההחלפה {% equation %}\left\langle x,y\right\rangle {% endequation %} ששמרנו לסוף, ונסיים.

כעת כל מה שנותר לעשות הוא לחכות לפרק של פיוצ'רמה שיציג את ההוכחה של <a href="http://he.wikipedia.org/wiki/%D7%94%D7%9E%D7%A9%D7%A4%D7%98_%D7%94%D7%90%D7%97%D7%A8%D7%95%D7%9F_%D7%A9%D7%9C_%D7%A4%D7%A8%D7%9E%D7%94">המשפט האחרון של פרמה</a>, בתקווה ששולי הפרק אינם צרים מלהכילה.
